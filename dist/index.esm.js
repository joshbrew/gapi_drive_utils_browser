var US=Object.create;var ma=Object.defineProperty;var qS=Object.getOwnPropertyDescriptor;var $S=Object.getOwnPropertyNames;var jS=Object.getPrototypeOf,zS=Object.prototype.hasOwnProperty;var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fu=(t,e)=>{for(var r in e)ma(t,r,{get:e[r],enumerable:!0})},HS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $S(e))!zS.call(t,i)&&i!==r&&ma(t,i,{get:()=>e[i],enumerable:!(n=qS(e,i))||n.enumerable});return t};var Lt=(t,e,r)=>(r=t!=null?US(jS(t)):{},HS(e||!t||!t.__esModule?ma(r,"default",{value:t,enumerable:!0}):r,t));var Tu=I((OO,Aa)=>{"use strict";var xb=Object.prototype.hasOwnProperty,_e="~";function xi(){}Object.create&&(xi.prototype=Object.create(null),new xi().__proto__||(_e=!1));function Ib(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function Au(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Ib(r,n||t,i),s=_e?_e+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function Fo(t,e){--t._eventsCount===0?t._events=new xi:delete t._events[e]}function we(){this._events=new xi,this._eventsCount=0}we.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)xb.call(r,n)&&e.push(_e?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};we.prototype.listeners=function(e){var r=_e?_e+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};we.prototype.listenerCount=function(e){var r=_e?_e+e:e,n=this._events[r];return n?n.fn?1:n.length:0};we.prototype.emit=function(e,r,n,i,o,s){var a=_e?_e+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,f,u;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,i),!0;case 5:return c.fn.call(c.context,r,n,i,o),!0;case 6:return c.fn.call(c.context,r,n,i,o,s),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];c.fn.apply(c.context,f)}else{var h=c.length,d;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,r);break;case 3:c[u].fn.call(c[u].context,r,n);break;case 4:c[u].fn.call(c[u].context,r,n,i);break;default:if(!f)for(d=1,f=new Array(l-1);d<l;d++)f[d-1]=arguments[d];c[u].fn.apply(c[u].context,f)}}return!0};we.prototype.on=function(e,r,n){return Au(this,e,r,n,!1)};we.prototype.once=function(e,r,n){return Au(this,e,r,n,!0)};we.prototype.removeListener=function(e,r,n,i){var o=_e?_e+e:e;if(!this._events[o])return this;if(!r)return Fo(this,o),this;var s=this._events[o];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&Fo(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==r||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:Fo(this,o)}return this};we.prototype.removeAllListeners=function(e){var r;return e?(r=_e?_e+e:e,this._events[r]&&Fo(this,r)):(this._events=new xi,this._eventsCount=0),this};we.prototype.off=we.prototype.removeListener;we.prototype.addListener=we.prototype.on;we.prefixed=_e;we.EventEmitter=we;typeof Aa<"u"&&(Aa.exports=we)});var Bu=I(Lo=>{"use strict";Lo.byteLength=Fb;Lo.toByteArray=Ob;Lo.fromByteArray=Cb;var ct=[],Pe=[],vb=typeof Uint8Array<"u"?Uint8Array:Array,ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Or=0,Cu=ka.length;Or<Cu;++Or)ct[Or]=ka[Or],Pe[ka.charCodeAt(Or)]=Or;var Or,Cu;Pe[45]=62;Pe[95]=63;function Mu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Fb(t){var e=Mu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function kb(t,e,r){return(e+r)*3/4-r}function Ob(t){var e,r=Mu(t),n=r[0],i=r[1],o=new vb(kb(t,n,i)),s=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=Pe[t.charCodeAt(c)]<<18|Pe[t.charCodeAt(c+1)]<<12|Pe[t.charCodeAt(c+2)]<<6|Pe[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Pe[t.charCodeAt(c)]<<2|Pe[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=Pe[t.charCodeAt(c)]<<10|Pe[t.charCodeAt(c+1)]<<4|Pe[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Lb(t){return ct[t>>18&63]+ct[t>>12&63]+ct[t>>6&63]+ct[t&63]}function Db(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Lb(n));return i.join("")}function Cb(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(Db(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(ct[e>>2]+ct[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ct[e>>10]+ct[e>>4&63]+ct[e<<2&63]+"=")),i.join("")}});var Pu=I(Oa=>{Oa.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,u=r?i-1:0,h=r?-1:1,d=t[e+u];for(u+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=o*256+t[e+u],u+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+t[e+u],u+=h,f-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l}return(d?-1:1)*s*Math.pow(2,o-n)};Oa.write=function(t,e,r,n,i,o){var s,a,c,l=o*8-i-1,f=(1<<l)-1,u=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,E=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+u>=1?e+=h/c:e+=h*Math.pow(2,1-u),e*c>=2&&(s++,c/=2),s+u>=f?(a=0,s=f):s+u>=1?(a=(e*c-1)*Math.pow(2,i),s=s+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=a&255,d+=E,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+d]=s&255,d+=E,s/=256,l-=8);t[r+d-E]|=w*128}});var We=I(_n=>{"use strict";var La=Bu(),bn=Pu(),Wu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_n.Buffer=S;_n.SlowBuffer=qb;_n.INSPECT_MAX_BYTES=50;var Do=2147483647;_n.kMaxLength=Do;S.TYPED_ARRAY_SUPPORT=Mb();!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Mb(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}});Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function Ut(t){if(t>Do)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,S.prototype),e}function S(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ba(t)}return ju(t,e,r)}S.poolSize=8192;function ju(t,e,r){if(typeof t=="string")return Pb(t,e);if(ArrayBuffer.isView(t))return Wb(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(lt(t,ArrayBuffer)||t&&lt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(lt(t,SharedArrayBuffer)||t&&lt(t.buffer,SharedArrayBuffer)))return Ca(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return S.from(n,e,r);let i=Ub(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return S.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}S.from=function(t,e,r){return ju(t,e,r)};Object.setPrototypeOf(S.prototype,Uint8Array.prototype);Object.setPrototypeOf(S,Uint8Array);function zu(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Bb(t,e,r){return zu(t),t<=0?Ut(t):e!==void 0?typeof r=="string"?Ut(t).fill(e,r):Ut(t).fill(e):Ut(t)}S.alloc=function(t,e,r){return Bb(t,e,r)};function Ba(t){return zu(t),Ut(t<0?0:Pa(t)|0)}S.allocUnsafe=function(t){return Ba(t)};S.allocUnsafeSlow=function(t){return Ba(t)};function Pb(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!S.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Hu(t,e)|0,n=Ut(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Da(t){let e=t.length<0?0:Pa(t.length)|0,r=Ut(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Wb(t){if(lt(t,Uint8Array)){let e=new Uint8Array(t);return Ca(e.buffer,e.byteOffset,e.byteLength)}return Da(t)}function Ca(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,S.prototype),n}function Ub(t){if(S.isBuffer(t)){let e=Pa(t.length)|0,r=Ut(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Ua(t.length)?Ut(0):Da(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Da(t.data)}function Pa(t){if(t>=Do)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Do.toString(16)+" bytes");return t|0}function qb(t){return+t!=t&&(t=0),S.alloc(+t)}S.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==S.prototype};S.compare=function(e,r){if(lt(e,Uint8Array)&&(e=S.from(e,e.offset,e.byteLength)),lt(r,Uint8Array)&&(r=S.from(r,r.offset,r.byteLength)),!S.isBuffer(e)||!S.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};S.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};S.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return S.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=S.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(lt(s,Uint8Array))o+s.length>i.length?(S.isBuffer(s)||(s=S.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(S.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Hu(t,e){if(S.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||lt(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ma(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ed(t).length;default:if(i)return n?-1:Ma(t).length;e=(""+e).toLowerCase(),i=!0}}S.byteLength=Hu;function $b(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Qb(this,e,r);case"utf8":case"utf-8":return Gu(this,e,r);case"ascii":return Xb(this,e,r);case"latin1":case"binary":return Jb(this,e,r);case"base64":return Yb(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zb(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}S.prototype._isBuffer=!0;function Lr(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}S.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Lr(this,r,r+1);return this};S.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Lr(this,r,r+3),Lr(this,r+1,r+2);return this};S.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Lr(this,r,r+7),Lr(this,r+1,r+6),Lr(this,r+2,r+5),Lr(this,r+3,r+4);return this};S.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Gu(this,0,e):$b.apply(this,arguments)};S.prototype.toLocaleString=S.prototype.toString;S.prototype.equals=function(e){if(!S.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:S.compare(this,e)===0};S.prototype.inspect=function(){let e="",r=_n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Wu&&(S.prototype[Wu]=S.prototype.inspect);S.prototype.compare=function(e,r,n,i,o){if(lt(e,Uint8Array)&&(e=S.from(e,e.offset,e.byteLength)),!S.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,c=Math.min(s,a),l=this.slice(i,o),f=e.slice(r,n);for(let u=0;u<c;++u)if(l[u]!==f[u]){s=l[u],a=f[u];break}return s<a?-1:a<s?1:0};function Vu(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Ua(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=S.from(e,n)),S.isBuffer(e))return e.length===0?-1:Uu(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Uu(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Uu(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(f,u){return o===1?f[u]:f.readUInt16BE(u*o)}let l;if(i){let f=-1;for(l=r;l<s;l++)if(c(t,l)===c(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===a)return f*o}else f!==-1&&(l-=l-f),f=-1}else for(r+a>s&&(r=s-a),l=r;l>=0;l--){let f=!0;for(let u=0;u<a;u++)if(c(t,l+u)!==c(e,u)){f=!1;break}if(f)return l}return-1}S.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};S.prototype.indexOf=function(e,r,n){return Vu(this,e,r,n,!0)};S.prototype.lastIndexOf=function(e,r,n){return Vu(this,e,r,n,!1)};function jb(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(Ua(a))return s;t[r+s]=a}return s}function zb(t,e,r,n){return Co(Ma(e,t.length-r),t,r,n)}function Hb(t,e,r,n){return Co(nE(e),t,r,n)}function Vb(t,e,r,n){return Co(ed(e),t,r,n)}function Gb(t,e,r,n){return Co(iE(e,t.length-r),t,r,n)}S.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return jb(this,e,r,n);case"utf8":case"utf-8":return zb(this,e,r,n);case"ascii":case"latin1":case"binary":return Hb(this,e,r,n);case"base64":return Vb(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gb(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Yb(t,e,r){return e===0&&r===t.length?La.fromByteArray(t):La.fromByteArray(t.slice(e,r))}function Gu(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,l,f,u;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],(c&192)===128&&(u=(o&31)<<6|c&63,u>127&&(s=u));break;case 3:c=t[i+1],l=t[i+2],(c&192)===128&&(l&192)===128&&(u=(o&15)<<12|(c&63)<<6|l&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:c=t[i+1],l=t[i+2],f=t[i+3],(c&192)===128&&(l&192)===128&&(f&192)===128&&(u=(o&15)<<18|(c&63)<<12|(l&63)<<6|f&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return Kb(n)}var qu=4096;function Kb(t){let e=t.length;if(e<=qu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=qu));return r}function Xb(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Jb(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Qb(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=oE[t[o]];return i}function Zb(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}S.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,S.prototype),i};function ce(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUintLE=S.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ce(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};S.prototype.readUintBE=S.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ce(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};S.prototype.readUint8=S.prototype.readUInt8=function(e,r){return e=e>>>0,r||ce(e,1,this.length),this[e]};S.prototype.readUint16LE=S.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||ce(e,2,this.length),this[e]|this[e+1]<<8};S.prototype.readUint16BE=S.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||ce(e,2,this.length),this[e]<<8|this[e+1]};S.prototype.readUint32LE=S.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};S.prototype.readUint32BE=S.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};S.prototype.readBigUInt64LE=lr(function(e){e=e>>>0,En(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ii(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});S.prototype.readBigUInt64BE=lr(function(e){e=e>>>0,En(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ii(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});S.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ce(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};S.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ce(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};S.prototype.readInt8=function(e,r){return e=e>>>0,r||ce(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};S.prototype.readInt16LE=function(e,r){e=e>>>0,r||ce(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};S.prototype.readInt16BE=function(e,r){e=e>>>0,r||ce(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};S.prototype.readInt32LE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};S.prototype.readInt32BE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};S.prototype.readBigInt64LE=lr(function(e){e=e>>>0,En(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ii(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});S.prototype.readBigInt64BE=lr(function(e){e=e>>>0,En(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ii(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});S.prototype.readFloatLE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),bn.read(this,e,!0,23,4)};S.prototype.readFloatBE=function(e,r){return e=e>>>0,r||ce(e,4,this.length),bn.read(this,e,!1,23,4)};S.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||ce(e,8,this.length),bn.read(this,e,!0,52,8)};S.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||ce(e,8,this.length),bn.read(this,e,!1,52,8)};function Ae(t,e,r,n,i,o){if(!S.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}S.prototype.writeUintLE=S.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ae(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};S.prototype.writeUintBE=S.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ae(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};S.prototype.writeUint8=S.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,1,255,0),this[r]=e&255,r+1};S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Yu(t,e,r,n,i){Zu(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function Ku(t,e,r,n,i){Zu(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}S.prototype.writeBigUInt64LE=lr(function(e,r=0){return Yu(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});S.prototype.writeBigUInt64BE=lr(function(e,r=0){return Ku(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});S.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ae(this,e,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};S.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Ae(this,e,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};S.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};S.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};S.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};S.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};S.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ae(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};S.prototype.writeBigInt64LE=lr(function(e,r=0){return Yu(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});S.prototype.writeBigInt64BE=lr(function(e,r=0){return Ku(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xu(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ju(t,e,r,n,i){return e=+e,r=r>>>0,i||Xu(t,e,r,4,34028234663852886e22,-34028234663852886e22),bn.write(t,e,r,n,23,4),r+4}S.prototype.writeFloatLE=function(e,r,n){return Ju(this,e,r,!0,n)};S.prototype.writeFloatBE=function(e,r,n){return Ju(this,e,r,!1,n)};function Qu(t,e,r,n,i){return e=+e,r=r>>>0,i||Xu(t,e,r,8,17976931348623157e292,-17976931348623157e292),bn.write(t,e,r,n,52,8),r+8}S.prototype.writeDoubleLE=function(e,r,n){return Qu(this,e,r,!0,n)};S.prototype.writeDoubleBE=function(e,r,n){return Qu(this,e,r,!1,n)};S.prototype.copy=function(e,r,n,i){if(!S.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};S.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!S.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=S.isBuffer(e)?e:S.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var Sn={};function Wa(t,e,r){Sn[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Wa("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Wa("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Wa("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=$u(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=$u(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function $u(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function eE(t,e,r){En(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ii(e,t.length-(r+1))}function Zu(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new Sn.ERR_OUT_OF_RANGE("value",a,t)}eE(n,i,o)}function En(t,e){if(typeof t!="number")throw new Sn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ii(t,e,r){throw Math.floor(t)!==t?(En(t,r),new Sn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Sn.ERR_BUFFER_OUT_OF_BOUNDS:new Sn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var tE=/[^+/0-9A-Za-z-_]/g;function rE(t){if(t=t.split("=")[0],t=t.trim().replace(tE,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Ma(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function nE(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function iE(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function ed(t){return La.toByteArray(rE(t))}function Co(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function lt(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Ua(t){return t!==t}var oE=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function lr(t){return typeof BigInt>"u"?sE:t}function sE(){throw new Error("BigInt not supported")}});var V=I((fD,id)=>{"use strict";id.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var An=I((uD,Po)=>{"use strict";var{AbortController:od,AbortSignal:yE}=typeof self<"u"?self:typeof window<"u"?window:void 0;Po.exports=od;Po.exports.AbortSignal=yE;Po.exports.default=od});var Ai=I((dD,Ga)=>{"use strict";var Tn=typeof Reflect=="object"?Reflect:null,sd=Tn&&typeof Tn.apply=="function"?Tn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Wo;Tn&&typeof Tn.ownKeys=="function"?Wo=Tn.ownKeys:Object.getOwnPropertySymbols?Wo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wo=function(e){return Object.getOwnPropertyNames(e)};function pE(t){console&&console.warn&&console.warn(t)}var cd=Number.isNaN||function(e){return e!==e};function B(){B.init.call(this)}Ga.exports=B;Ga.exports.once=SE;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var ad=10;function Uo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return ad},set:function(t){if(typeof t!="number"||t<0||cd(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ad=t}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||cd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ld(t){return t._maxListeners===void 0?B.defaultMaxListeners:t._maxListeners}B.prototype.getMaxListeners=function(){return ld(this)};B.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")sd(c,this,r);else for(var l=c.length,f=yd(c,l),n=0;n<l;++n)sd(f[n],this,r);return!0};function fd(t,e,r,n){var i,o,s;if(Uo(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=ld(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,pE(a)}return t}B.prototype.addListener=function(e,r){return fd(this,e,r,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(e,r){return fd(this,e,r,!0)};function wE(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ud(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=wE.bind(n);return i.listener=r,n.wrapFn=i,i}B.prototype.once=function(e,r){return Uo(r),this.on(e,ud(this,e,r)),this};B.prototype.prependOnceListener=function(e,r){return Uo(r),this.prependListener(e,ud(this,e,r)),this};B.prototype.removeListener=function(e,r){var n,i,o,s,a;if(Uo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():mE(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function dd(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?gE(i):yd(i,i.length)}B.prototype.listeners=function(e){return dd(this,e,!0)};B.prototype.rawListeners=function(e){return dd(this,e,!1)};B.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hd.call(t,e)};B.prototype.listenerCount=hd;function hd(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?Wo(this._events):[]};function yd(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function mE(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function gE(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function SE(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}pd(t,e,o,{once:!0}),e!=="error"&&bE(t,i,{once:!0})})}function bE(t,e,r){typeof t.on=="function"&&pd(t,"error",e,r)}function pd(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var me=I((hD,Ka)=>{"use strict";var EE=We(),{kResistStopPropagation:_E,SymbolDispose:xE}=V(),IE=globalThis.AbortSignal||An().AbortSignal,NE=globalThis.AbortController||An().AbortController,AE=Object.getPrototypeOf(async function(){}).constructor,wd=globalThis.Blob||EE.Blob,TE=typeof wd<"u"?function(e){return e instanceof wd}:function(e){return!1},md=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},RE=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},Ya=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Ka.exports={AggregateError:Ya,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof AE},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:TE,deprecate(t,e){return t},addAbortListener:Ai().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);md(e,"signal"),RE(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[_E]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[xE](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:IE.any||function(e){if(e.length===1)return e[0];let r=new NE,n=()=>r.abort();return e.forEach(i=>{md(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Ka.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var xe=I((yD,bd)=>{"use strict";var{format:vE,inspect:qo,AggregateError:FE}=me(),kE=globalThis.AggregateError||FE,OE=Symbol("kIsNodeError"),LE=["string","function","number","object","Function","Object","boolean","bigint","symbol"],DE=/^([A-Z][a-z0-9]*)+$/,CE="__node_internal_",$o={};function Dr(t,e){if(!t)throw new $o.ERR_INTERNAL_ASSERTION(e)}function gd(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function ME(t,e,r){if(typeof e=="function")return Dr(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Dr(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:vE(e,...r)}function de(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(ME(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[OE]=!0,$o[t]=n}function Sd(t){let e=CE+t.name;return Object.defineProperty(t,"name",{value:e}),t}function BE(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new kE([e,t],e.message);return r.code=e.code,r}return t||e}var Xa=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new $o.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};de("ERR_ASSERTION","%s",Error);de("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Dr(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let c of e)Dr(typeof c=="string","All expected entries have to be of type string"),LE.includes(c)?i.push(c.toLowerCase()):DE.test(c)?o.push(c):(Dr(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=qo(r,{depth:-1});n+=`. Received ${c}`}}else{let c=qo(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);de("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=qo(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);de("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);de("ERR_MISSING_ARGS",(...t)=>{Dr(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);de("ERR_OUT_OF_RANGE",(t,e,r)=>{Dr(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=gd(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=gd(n)),n+="n"):n=qo(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);de("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);de("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);de("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);de("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);de("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);de("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);de("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);de("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);de("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);de("ERR_STREAM_WRITE_AFTER_END","write after end",Error);de("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);bd.exports={AbortError:Xa,aggregateTwoErrors:Sd(BE),hideStackFrames:Sd,codes:$o}});var vn=I((pD,Fd)=>{"use strict";var{ArrayIsArray:Qa,ArrayPrototypeIncludes:Id,ArrayPrototypeJoin:Nd,ArrayPrototypeMap:PE,NumberIsInteger:Za,NumberIsNaN:WE,NumberMAX_SAFE_INTEGER:UE,NumberMIN_SAFE_INTEGER:qE,NumberParseInt:$E,ObjectPrototypeHasOwnProperty:jE,RegExpPrototypeExec:Ad,String:zE,StringPrototypeToUpperCase:HE,StringPrototypeTrim:VE}=V(),{hideStackFrames:Ue,codes:{ERR_SOCKET_BAD_PORT:GE,ERR_INVALID_ARG_TYPE:ge,ERR_INVALID_ARG_VALUE:Rn,ERR_OUT_OF_RANGE:Cr,ERR_UNKNOWN_SIGNAL:Ed}}=xe(),{normalizeEncoding:YE}=me(),{isAsyncFunction:KE,isArrayBufferView:XE}=me().types,_d={};function JE(t){return t===(t|0)}function QE(t){return t===t>>>0}var ZE=/^[0-7]+$/,e0="must be a 32-bit unsigned integer or an octal string";function t0(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Ad(ZE,t)===null)throw new Rn(e,t,e0);t=$E(t,8)}return Td(t,e),t}var r0=Ue((t,e,r=qE,n=UE)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!Za(t))throw new Cr(e,"an integer",t);if(t<r||t>n)throw new Cr(e,`>= ${r} && <= ${n}`,t)}),n0=Ue((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!Za(t))throw new Cr(e,"an integer",t);if(t<r||t>n)throw new Cr(e,`>= ${r} && <= ${n}`,t)}),Td=Ue((t,e,r=!1)=>{if(typeof t!="number")throw new ge(e,"number",t);if(!Za(t))throw new Cr(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Cr(e,`>= ${n} && <= ${i}`,t)});function ec(t,e){if(typeof t!="string")throw new ge(e,"string",t)}function i0(t,e,r=void 0,n){if(typeof t!="number")throw new ge(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&WE(t))throw new Cr(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var o0=Ue((t,e,r)=>{if(!Id(r,t)){let i="must be one of: "+Nd(PE(r,o=>typeof o=="string"?`'${o}'`:zE(o)),", ");throw new Rn(e,t,i)}});function Rd(t,e){if(typeof t!="boolean")throw new ge(e,"boolean",t)}function Ja(t,e,r){return t==null||!jE(t,e)?r:t[e]}var s0=Ue((t,e,r=null)=>{let n=Ja(r,"allowArray",!1),i=Ja(r,"allowFunction",!1);if(!Ja(r,"nullable",!1)&&t===null||!n&&Qa(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new ge(e,"Object",t)}),a0=Ue((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ge(e,"a dictionary",t)}),jo=Ue((t,e,r=0)=>{if(!Qa(t))throw new ge(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Rn(e,t,n)}});function c0(t,e){jo(t,e);for(let r=0;r<t.length;r++)ec(t[r],`${e}[${r}]`)}function l0(t,e){jo(t,e);for(let r=0;r<t.length;r++)Rd(t[r],`${e}[${r}]`)}function f0(t,e){jo(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new ge(i,"AbortSignal",n);vd(n,i)}}function u0(t,e="signal"){if(ec(t,e),_d[t]===void 0)throw _d[HE(t)]!==void 0?new Ed(t+" (signals must use all capital letters)"):new Ed(t)}var d0=Ue((t,e="buffer")=>{if(!XE(t))throw new ge(e,["Buffer","TypedArray","DataView"],t)});function h0(t,e){let r=YE(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Rn("encoding",e,`is invalid for data of length ${n}`)}function y0(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&VE(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new GE(e,t,r);return t|0}var vd=Ue((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ge(e,"AbortSignal",t)}),p0=Ue((t,e)=>{if(typeof t!="function")throw new ge(e,"Function",t)}),w0=Ue((t,e)=>{if(typeof t!="function"||KE(t))throw new ge(e,"Function",t)}),m0=Ue((t,e)=>{if(t!==void 0)throw new ge(e,"undefined",t)});function g0(t,e,r){if(!Id(r,t))throw new ge(e,`('${Nd(r,"|")}')`,t)}var S0=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function xd(t,e){if(typeof t>"u"||!Ad(S0,t))throw new Rn(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function b0(t){if(typeof t=="string")return xd(t,"hints"),t;if(Qa(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];xd(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Rn("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Fd.exports={isInt32:JE,isUint32:QE,parseFileMode:t0,validateArray:jo,validateStringArray:c0,validateBooleanArray:l0,validateAbortSignalArray:f0,validateBoolean:Rd,validateBuffer:d0,validateDictionary:a0,validateEncoding:h0,validateFunction:p0,validateInt32:n0,validateInteger:r0,validateNumber:i0,validateObject:s0,validateOneOf:o0,validatePlainFunction:w0,validatePort:y0,validateSignalName:u0,validateString:ec,validateUint32:Td,validateUndefined:m0,validateUnion:g0,validateAbortSignal:vd,validateLinkHeaderValue:b0}});var fr=I((wD,Dd)=>{var J=Dd.exports={},dt,ht;function tc(){throw new Error("setTimeout has not been defined")}function rc(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?dt=setTimeout:dt=tc}catch{dt=tc}try{typeof clearTimeout=="function"?ht=clearTimeout:ht=rc}catch{ht=rc}})();function kd(t){if(dt===setTimeout)return setTimeout(t,0);if((dt===tc||!dt)&&setTimeout)return dt=setTimeout,setTimeout(t,0);try{return dt(t,0)}catch{try{return dt.call(null,t,0)}catch{return dt.call(this,t,0)}}}function E0(t){if(ht===clearTimeout)return clearTimeout(t);if((ht===rc||!ht)&&clearTimeout)return ht=clearTimeout,clearTimeout(t);try{return ht(t)}catch{try{return ht.call(null,t)}catch{return ht.call(this,t)}}}var qt=[],Fn=!1,Mr,zo=-1;function _0(){!Fn||!Mr||(Fn=!1,Mr.length?qt=Mr.concat(qt):zo=-1,qt.length&&Od())}function Od(){if(!Fn){var t=kd(_0);Fn=!0;for(var e=qt.length;e;){for(Mr=qt,qt=[];++zo<e;)Mr&&Mr[zo].run();zo=-1,e=qt.length}Mr=null,Fn=!1,E0(t)}}J.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];qt.push(new Ld(t,e)),qt.length===1&&!Fn&&kd(Od)};function Ld(t,e){this.fun=t,this.array=e}Ld.prototype.run=function(){this.fun.apply(null,this.array)};J.title="browser";J.browser=!0;J.env={};J.argv=[];J.version="";J.versions={};function $t(){}J.on=$t;J.addListener=$t;J.once=$t;J.off=$t;J.removeListener=$t;J.removeAllListeners=$t;J.emit=$t;J.prependListener=$t;J.prependOnceListener=$t;J.listeners=function(t){return[]};J.binding=function(t){throw new Error("process.binding is not supported")};J.cwd=function(){return"/"};J.chdir=function(t){throw new Error("process.chdir is not supported")};J.umask=function(){return 0}});var pt=I((mD,Kd)=>{"use strict";var{SymbolAsyncIterator:Cd,SymbolIterator:Md,SymbolFor:Br}=V(),Bd=Br("nodejs.stream.destroyed"),Pd=Br("nodejs.stream.errored"),nc=Br("nodejs.stream.readable"),ic=Br("nodejs.stream.writable"),Wd=Br("nodejs.stream.disturbed"),x0=Br("nodejs.webstream.isClosedPromise"),I0=Br("nodejs.webstream.controllerErrorFunction");function Ho(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Vo(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function N0(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function yt(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Ud(t){return!!(t&&!yt(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function qd(t){return!!(t&&!yt(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function $d(t){return!!(t&&!yt(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function A0(t){return Ud(t)||qd(t)||$d(t)}function T0(t,e){return t==null?!1:e===!0?typeof t[Cd]=="function":e===!1?typeof t[Md]=="function":typeof t[Cd]=="function"||typeof t[Md]=="function"}function Go(t){if(!yt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Bd]||n!=null&&n.destroyed)}function jd(t){if(!Vo(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function R0(t,e){if(!Vo(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function v0(t){if(!Ho(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function zd(t,e){if(!Ho(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Hd(t){return t&&t[nc]!=null?t[nc]:typeof t?.readable!="boolean"?null:Go(t)?!1:Ho(t)&&t.readable&&!zd(t)}function Vd(t){return t&&t[ic]!=null?t[ic]:typeof t?.writable!="boolean"?null:Go(t)?!1:Vo(t)&&t.writable&&!jd(t)}function F0(t,e){return yt(t)?Go(t)?!0:!(e?.readable!==!1&&Hd(t)||e?.writable!==!1&&Vd(t)):null}function k0(t){var e,r;return yt(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function O0(t){var e,r;return yt(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function L0(t){if(!yt(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Gd(t)?t._closed:null}function Gd(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Yd(t){return typeof t._sent100=="boolean"&&Gd(t)}function D0(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function C0(t){if(!yt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Yd(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function M0(t){var e;return!!(t&&((e=t[Wd])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function B0(t){var e,r,n,i,o,s,a,c,l,f;return!!(t&&((e=(r=(n=(i=(o=(s=t[Pd])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((f=t._writableState)===null||f===void 0)&&f.errored))}Kd.exports={isDestroyed:Go,kIsDestroyed:Bd,isDisturbed:M0,kIsDisturbed:Wd,isErrored:B0,kIsErrored:Pd,isReadable:Hd,kIsReadable:nc,kIsClosedPromise:x0,kControllerErrorFunction:I0,kIsWritable:ic,isClosed:L0,isDuplexNodeStream:N0,isFinished:F0,isIterable:T0,isReadableNodeStream:Ho,isReadableStream:Ud,isReadableEnded:v0,isReadableFinished:zd,isReadableErrored:O0,isNodeStream:yt,isWebStream:A0,isWritable:Vd,isWritableNodeStream:Vo,isWritableStream:qd,isWritableEnded:jd,isWritableFinished:R0,isWritableErrored:k0,isServerRequest:D0,isServerResponse:Yd,willEmitClose:C0,isTransformStream:$d}});var jt=I((gD,lc)=>{var ur=fr(),{AbortError:ih,codes:P0}=xe(),{ERR_INVALID_ARG_TYPE:W0,ERR_STREAM_PREMATURE_CLOSE:Xd}=P0,{kEmptyObject:sc,once:ac}=me(),{validateAbortSignal:U0,validateFunction:q0,validateObject:$0,validateBoolean:j0}=vn(),{Promise:z0,PromisePrototypeThen:H0,SymbolDispose:oh}=V(),{isClosed:V0,isReadable:Jd,isReadableNodeStream:oc,isReadableStream:G0,isReadableFinished:Qd,isReadableErrored:Zd,isWritable:eh,isWritableNodeStream:th,isWritableStream:Y0,isWritableFinished:rh,isWritableErrored:nh,isNodeStream:K0,willEmitClose:X0,kIsClosedPromise:J0}=pt(),kn;function Q0(t){return t.setHeader&&typeof t.abort=="function"}var cc=()=>{};function sh(t,e,r){var n,i;if(arguments.length===2?(r=e,e=sc):e==null?e=sc:$0(e,"options"),q0(r,"callback"),U0(e.signal,"options.signal"),r=ac(r),G0(t)||Y0(t))return Z0(t,e,r);if(!K0(t))throw new W0("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:oc(t),s=(i=e.writable)!==null&&i!==void 0?i:th(t),a=t._writableState,c=t._readableState,l=()=>{t.writable||h()},f=X0(t)&&oc(t)===o&&th(t)===s,u=rh(t,!1),h=()=>{u=!0,t.destroyed&&(f=!1),!(f&&(!t.readable||o))&&(!o||d)&&r.call(t)},d=Qd(t,!1),E=()=>{d=!0,t.destroyed&&(f=!1),!(f&&(!t.writable||s))&&(!s||u)&&r.call(t)},w=R=>{r.call(t,R)},N=V0(t),_=()=>{N=!0;let R=nh(t)||Zd(t);if(R&&typeof R!="boolean")return r.call(t,R);if(o&&!d&&oc(t,!0)&&!Qd(t,!1))return r.call(t,new Xd);if(s&&!u&&!rh(t,!1))return r.call(t,new Xd);r.call(t)},A=()=>{N=!0;let R=nh(t)||Zd(t);if(R&&typeof R!="boolean")return r.call(t,R);r.call(t)},T=()=>{t.req.on("finish",h)};Q0(t)?(t.on("complete",h),f||t.on("abort",_),t.req?T():t.on("request",T)):s&&!a&&(t.on("end",l),t.on("close",l)),!f&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",E),t.on("finish",h),e.error!==!1&&t.on("error",w),t.on("close",_),N?ur.nextTick(_):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?f||ur.nextTick(A):(!o&&(!f||Jd(t))&&(u||eh(t)===!1)||!s&&(!f||eh(t))&&(d||Jd(t)===!1)||c&&t.req&&t.aborted)&&ur.nextTick(A);let x=()=>{r=cc,t.removeListener("aborted",_),t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",T),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",E),t.removeListener("error",w),t.removeListener("close",_)};if(e.signal&&!N){let R=()=>{let Ee=r;x(),Ee.call(t,new ih(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)ur.nextTick(R);else{kn=kn||me().addAbortListener;let Ee=kn(e.signal,R),U=r;r=ac((...ve)=>{Ee[oh](),U.apply(t,ve)})}}return x}function Z0(t,e,r){let n=!1,i=cc;if(e.signal)if(i=()=>{n=!0,r.call(t,new ih(void 0,{cause:e.signal.reason}))},e.signal.aborted)ur.nextTick(i);else{kn=kn||me().addAbortListener;let s=kn(e.signal,i),a=r;r=ac((...c)=>{s[oh](),a.apply(t,c)})}let o=(...s)=>{n||ur.nextTick(()=>r.apply(t,s))};return H0(t[J0].promise,o,o),cc}function e_(t,e){var r;let n=!1;return e===null&&(e=sc),(r=e)!==null&&r!==void 0&&r.cleanup&&(j0(e.cleanup,"cleanup"),n=e.cleanup),new z0((i,o)=>{let s=sh(t,e,a=>{n&&s(),a?o(a):i()})})}lc.exports=sh;lc.exports.finished=e_});var Pr=I((SD,yh)=>{"use strict";var wt=fr(),{aggregateTwoErrors:t_,codes:{ERR_MULTIPLE_CALLBACK:r_},AbortError:n_}=xe(),{Symbol:lh}=V(),{kIsDestroyed:i_,isDestroyed:o_,isFinished:s_,isServerRequest:a_}=pt(),fh=lh("kDestroy"),fc=lh("kConstruct");function uh(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function c_(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(uh(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?ah(this,t,e):this.once(fh,function(o){ah(this,t_(o,t),e)}),this)}function ah(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;uh(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?wt.nextTick(l_,t,o):wt.nextTick(dh,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function l_(t,e){uc(t,e),dh(t)}function dh(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function uc(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function f_(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function dc(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?wt.nextTick(uc,t,e):uc(t,e))}function u_(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(fc,e),!(t.listenerCount(fc)>1)&&wt.nextTick(d_,t)}function d_(t){let e=!1;function r(n){if(e){dc(t,n??new r_);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(fh,n):n?dc(t,n,!0):wt.nextTick(h_,t)}try{t._construct(n=>{wt.nextTick(r,n)})}catch(n){wt.nextTick(r,n)}}function h_(t){t.emit(fc)}function ch(t){return t?.setHeader&&typeof t.abort=="function"}function hh(t){t.emit("close")}function y_(t,e){t.emit("error",e),wt.nextTick(hh,t)}function p_(t,e){!t||o_(t)||(!e&&!s_(t)&&(e=new n_),a_(t)?(t.socket=null,t.destroy(e)):ch(t)?t.abort():ch(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?wt.nextTick(y_,t,e):wt.nextTick(hh,t),t.destroyed||(t[i_]=!0))}yh.exports={construct:u_,destroyer:p_,destroy:c_,undestroy:f_,errorOrDestroy:dc}});var Xo=I((bD,wh)=>{"use strict";var{ArrayIsArray:w_,ObjectSetPrototypeOf:ph}=V(),{EventEmitter:Yo}=Ai();function Ko(t){Yo.call(this,t)}ph(Ko.prototype,Yo.prototype);ph(Ko,Yo);Ko.prototype.pipe=function(t,e){let r=this;function n(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function c(f){l(),Yo.listenerCount(this,"error")===0&&this.emit("error",f)}hc(r,"error",c),hc(t,"error",c);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function hc(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):w_(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}wh.exports={Stream:Ko,prependListener:hc}});var Ti=I((ED,Jo)=>{"use strict";var{SymbolDispose:m_}=V(),{AbortError:mh,codes:g_}=xe(),{isNodeStream:gh,isWebStream:S_,kControllerErrorFunction:b_}=pt(),E_=jt(),{ERR_INVALID_ARG_TYPE:Sh}=g_,yc,__=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Sh(e,"AbortSignal",t)};Jo.exports.addAbortSignal=function(e,r){if(__(e,"signal"),!gh(r)&&!S_(r))throw new Sh("stream",["ReadableStream","WritableStream","Stream"],r);return Jo.exports.addAbortSignalNoValidate(e,r)};Jo.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=gh(e)?()=>{e.destroy(new mh(void 0,{cause:t.reason}))}:()=>{e[b_](new mh(void 0,{cause:t.reason}))};if(t.aborted)r();else{yc=yc||me().addAbortListener;let n=yc(t,r);E_(e,n[m_])}return e}});var _h=I((xD,Eh)=>{"use strict";var{StringPrototypeSlice:bh,SymbolIterator:x_,TypedArrayPrototypeSet:Qo,Uint8Array:I_}=V(),{Buffer:pc}=We(),{inspect:N_}=me();Eh.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return pc.alloc(0);let r=pc.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Qo(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[x_](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=bh(o,0,e),this.head=n,n.data=bh(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=pc.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)Qo(r,s,n-e),e-=s.length;else{e===s.length?(Qo(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(Qo(r,new I_(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return N_(this,{...r,depth:0,customInspect:!1})}}});var Ri=I((ID,Ah)=>{"use strict";var{MathFloor:A_,NumberIsInteger:T_}=V(),{validateInteger:R_}=vn(),{ERR_INVALID_ARG_VALUE:v_}=xe().codes,xh=16*1024,Ih=16;function F_(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Nh(t){return t?Ih:xh}function k_(t,e){R_(e,"value",0),t?Ih=e:xh=e}function O_(t,e,r,n){let i=F_(e,n,r);if(i!=null){if(!T_(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new v_(o,i)}return A_(i)}return Nh(t.objectMode)}Ah.exports={getHighWaterMark:O_,getDefaultHighWaterMark:Nh,setDefaultHighWaterMark:k_}});var vh=I((wc,Rh)=>{var Zo=We(),mt=Zo.Buffer;function Th(t,e){for(var r in t)e[r]=t[r]}mt.from&&mt.alloc&&mt.allocUnsafe&&mt.allocUnsafeSlow?Rh.exports=Zo:(Th(Zo,wc),wc.Buffer=Wr);function Wr(t,e,r){return mt(t,e,r)}Wr.prototype=Object.create(mt.prototype);Th(mt,Wr);Wr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return mt(t,e,r)};Wr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=mt(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Wr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return mt(t)};Wr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Zo.SlowBuffer(t)}});var Oh=I(kh=>{"use strict";var gc=vh().Buffer,Fh=gc.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function L_(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function D_(t){var e=L_(t);if(typeof e!="string"&&(gc.isEncoding===Fh||!Fh(t)))throw new Error("Unknown encoding: "+t);return e||t}kh.StringDecoder=vi;function vi(t){this.encoding=D_(t);var e;switch(this.encoding){case"utf16le":this.text=U_,this.end=q_,e=4;break;case"utf8":this.fillLast=B_,e=4;break;case"base64":this.text=$_,this.end=j_,e=3;break;default:this.write=z_,this.end=H_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=gc.allocUnsafe(e)}vi.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};vi.prototype.end=W_;vi.prototype.text=P_;vi.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function mc(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function C_(t,e,r){var n=e.length-1;if(n<r)return 0;var i=mc(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=mc(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=mc(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function M_(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function B_(t){var e=this.lastTotal-this.lastNeed,r=M_(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function P_(t,e){var r=C_(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function W_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function U_(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function q_(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function $_(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function j_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function z_(t){return t.toString(this.encoding)}function H_(t){return t&&t.length?this.write(t):""}});var Sc=I((AD,Mh)=>{"use strict";var Lh=fr(),{PromisePrototypeThen:V_,SymbolAsyncIterator:Dh,SymbolIterator:Ch}=V(),{Buffer:G_}=We(),{ERR_INVALID_ARG_TYPE:Y_,ERR_STREAM_NULL_VALUES:K_}=xe().codes;function X_(t,e,r){let n;if(typeof e=="string"||e instanceof G_)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Dh])i=!0,n=e[Dh]();else if(e&&e[Ch])i=!1,n=e[Ch]();else throw new Y_("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(l,f){V_(a(l),()=>Lh.nextTick(f,l),u=>Lh.nextTick(f,u||l))};async function a(l){let f=l!=null,u=typeof n.throw=="function";if(f&&u){let{value:h,done:d}=await n.throw(l);if(await h,d)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function c(){for(;;){try{let{value:l,done:f}=i?await n.next():n.next();if(f)o.push(null);else{let u=l&&typeof l.then=="function"?await l:l;if(u===null)throw s=!1,new K_;if(o.push(u))continue;s=!1}}catch(l){o.destroy(l)}break}}return o}Mh.exports=X_});var ki=I((TD,ey)=>{var Qe=fr(),{ArrayPrototypeIndexOf:J_,NumberIsInteger:Q_,NumberIsNaN:Z_,NumberParseInt:ex,ObjectDefineProperties:Tc,ObjectKeys:tx,ObjectSetPrototypeOf:Wh,Promise:Uh,SafeSet:rx,SymbolAsyncDispose:nx,SymbolAsyncIterator:ix,Symbol:ox}=V();ey.exports=v;v.ReadableState=ns;var{EventEmitter:sx}=Ai(),{Stream:dr,prependListener:ax}=Xo(),{Buffer:bc}=We(),{addAbortSignal:cx}=Ti(),qh=jt(),k=me().debuglog("stream",t=>{k=t}),lx=_h(),Dn=Pr(),{getHighWaterMark:fx,getDefaultHighWaterMark:ux}=Ri(),{aggregateTwoErrors:Bh,codes:{ERR_INVALID_ARG_TYPE:dx,ERR_METHOD_NOT_IMPLEMENTED:hx,ERR_OUT_OF_RANGE:yx,ERR_STREAM_PUSH_AFTER_EOF:px,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:wx},AbortError:mx}=xe(),{validateObject:gx}=vn(),Ur=ox("kPaused"),{StringDecoder:$h}=Oh(),Sx=Sc();Wh(v.prototype,dr.prototype);Wh(v,dr);var Ec=()=>{},{errorOrDestroy:On}=Dn,Ln=1,bx=2,jh=4,Fi=8,zh=16,es=32,ts=64,Hh=128,Ex=256,_x=512,xx=1024,Nc=2048,Ac=4096,Ix=8192,Nx=16384,Ax=32768,Vh=65536,Tx=1<<17,Rx=1<<18;function ne(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Tc(ns.prototype,{objectMode:ne(Ln),ended:ne(bx),endEmitted:ne(jh),reading:ne(Fi),constructed:ne(zh),sync:ne(es),needReadable:ne(ts),emittedReadable:ne(Hh),readableListening:ne(Ex),resumeScheduled:ne(_x),errorEmitted:ne(xx),emitClose:ne(Nc),autoDestroy:ne(Ac),destroyed:ne(Ix),closed:ne(Nx),closeEmitted:ne(Ax),multiAwaitDrain:ne(Vh),readingMore:ne(Tx),dataEmitted:ne(Rx)});function ns(t,e,r){typeof r!="boolean"&&(r=e instanceof gt()),this.state=Nc|Ac|zh|es,t&&t.objectMode&&(this.state|=Ln),r&&t&&t.readableObjectMode&&(this.state|=Ln),this.highWaterMark=t?fx(this,t,"readableHighWaterMark",r):ux(!1),this.buffer=new lx,this.length=0,this.pipes=[],this.flowing=null,this[Ur]=null,t&&t.emitClose===!1&&(this.state&=~Nc),t&&t.autoDestroy===!1&&(this.state&=~Ac),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new $h(t.encoding),this.encoding=t.encoding)}function v(t){if(!(this instanceof v))return new v(t);let e=this instanceof gt();this._readableState=new ns(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&cx(t.signal,this)),dr.call(this,t),Dn.construct(this,()=>{this._readableState.needReadable&&rs(this,this._readableState)})}v.prototype.destroy=Dn.destroy;v.prototype._undestroy=Dn.undestroy;v.prototype._destroy=function(t,e){e(t)};v.prototype[sx.captureRejectionSymbol]=function(t){this.destroy(t)};v.prototype[nx]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new mx,this.destroy(t)),new Uh((e,r)=>qh(this,n=>n&&n!==t?r(n):e(null)))};v.prototype.push=function(t,e){return Gh(this,t,e,!1)};v.prototype.unshift=function(t,e){return Gh(this,t,e,!0)};function Gh(t,e,r,n){k("readableAddChunk",e);let i=t._readableState,o;if(i.state&Ln||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=bc.from(e,r).toString(i.encoding):(e=bc.from(e,r),r=""))):e instanceof bc?r="":dr._isUint8Array(e)?(e=dr._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new dx("chunk",["string","Buffer","Uint8Array"],e))),o)On(t,o);else if(e===null)i.state&=~Fi,kx(t,i);else if(i.state&Ln||e&&e.length>0)if(n)if(i.state&jh)On(t,new wx);else{if(i.destroyed||i.errored)return!1;_c(t,i,e,!0)}else if(i.ended)On(t,new px);else{if(i.destroyed||i.errored)return!1;i.state&=~Fi,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?_c(t,i,e,!1):rs(t,i)):_c(t,i,e,!1)}else n||(i.state&=~Fi,rs(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function _c(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&Vh?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&ts&&is(t)),rs(t,e)}v.prototype.isPaused=function(){let t=this._readableState;return t[Ur]===!0||t.flowing===!1};v.prototype.setEncoding=function(t){let e=new $h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var vx=1073741824;function Fx(t){if(t>vx)throw new yx("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Ph(t,e){return t<=0||e.length===0&&e.ended?0:e.state&Ln?1:Z_(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}v.prototype.read=function(t){k("read",t),t===void 0?t=NaN:Q_(t)||(t=ex(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Fx(t)),t!==0&&(e.state&=~Hh),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return k("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?xc(this):is(this),null;if(t=Ph(t,e),t===0&&e.ended)return e.length===0&&xc(this),null;let n=(e.state&ts)!==0;if(k("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,k("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,k("reading, ended or constructing",n);else if(n){k("do read"),e.state|=Fi|es,e.length===0&&(e.state|=ts);try{this._read(e.highWaterMark)}catch(o){On(this,o)}e.state&=~es,e.reading||(t=Ph(r,e))}let i;return t>0?i=Qh(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&xc(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function kx(t,e){if(k("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?is(t):(e.needReadable=!1,e.emittedReadable=!0,Yh(t))}}function is(t){let e=t._readableState;k("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(k("emitReadable",e.flowing),e.emittedReadable=!0,Qe.nextTick(Yh,t))}function Yh(t){let e=t._readableState;k("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Xh(t)}function rs(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Qe.nextTick(Ox,t,e))}function Ox(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(k("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}v.prototype._read=function(t){throw new hx("_read()")};v.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new rx(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),k("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==Qe.stdout&&t!==Qe.stderr?a:N;n.endEmitted?Qe.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,A){k("onunpipe"),_===r&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,f())}function a(){k("onend"),t.end()}let c,l=!1;function f(){k("cleanup"),t.removeListener("close",E),t.removeListener("finish",w),c&&t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",N),r.removeListener("data",h),l=!0,c&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&c()}function u(){l||(n.pipes.length===1&&n.pipes[0]===t?(k("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(k("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),c||(c=Lx(r,t),t.on("drain",c))}r.on("data",h);function h(_){k("ondata");let A=t.write(_);k("dest.write",A),A===!1&&u()}function d(_){if(k("onerror",_),N(),t.removeListener("error",d),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?On(t,_):t.emit("error",_)}}ax(t,"error",d);function E(){t.removeListener("finish",w),N()}t.once("close",E);function w(){k("onfinish"),t.removeListener("close",E),N()}t.once("finish",w);function N(){k("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?u():n.flowing||(k("pipe resume"),r.resume()),t};function Lx(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(k("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(k("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}v.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=J_(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};v.prototype.on=function(t,e){let r=dr.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,k("on readable",n.length,n.reading),n.length?is(this):n.reading||Qe.nextTick(Dx,this)),r};v.prototype.addListener=v.prototype.on;v.prototype.removeListener=function(t,e){let r=dr.prototype.removeListener.call(this,t,e);return t==="readable"&&Qe.nextTick(Kh,this),r};v.prototype.off=v.prototype.removeListener;v.prototype.removeAllListeners=function(t){let e=dr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Qe.nextTick(Kh,this),e};function Kh(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ur]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Dx(t){k("readable nexttick read 0"),t.read(0)}v.prototype.resume=function(){let t=this._readableState;return t.flowing||(k("resume"),t.flowing=!t.readableListening,Cx(this,t)),t[Ur]=!1,this};function Cx(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Qe.nextTick(Mx,t,e))}function Mx(t,e){k("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Xh(t),e.flowing&&!e.reading&&t.read(0)}v.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ur]=!0,this};function Xh(t){let e=t._readableState;for(k("flow",e.flowing);e.flowing&&t.read()!==null;);}v.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{On(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=tx(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};v.prototype[ix]=function(){return Jh(this)};v.prototype.iterator=function(t){return t!==void 0&&gx(t,"options"),Jh(this,t)};function Jh(t,e){typeof t.read!="function"&&(t=v.wrap(t,{objectMode:!0}));let r=Bx(t,e);return r.stream=t,r}async function*Bx(t,e){let r=Ec;function n(s){this===t?(r(),r=Ec):r=s}t.on("readable",n);let i,o=qh(t,{writable:!1},s=>{i=s?Bh(i,s):null,r(),r=Ec});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new Uh(n)}}}catch(s){throw i=Bh(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Dn.destroyer(t,null):(t.off("readable",n),o())}}Tc(v.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Tc(ns.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ur]!==!1},set(t){this[Ur]=!!t}}});v._fromList=Qh;function Qh(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function xc(t){let e=t._readableState;k("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Qe.nextTick(Px,e,t))}function Px(t,e){if(k("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Qe.nextTick(Wx,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function Wx(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}v.from=function(t,e){return Sx(v,t,e)};var Ic;function Zh(){return Ic===void 0&&(Ic={}),Ic}v.fromWeb=function(t,e){return Zh().newStreamReadableFromReadableStream(t,e)};v.toWeb=function(t,e){return Zh().newReadableStreamFromStreamReadable(t,e)};v.wrap=function(t,e){var r,n;return new v({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){Dn.destroyer(t,i),o(i)}}).wrap(t)}});var ls=I((RD,dy)=>{var qr=fr(),{ArrayPrototypeSlice:ny,Error:Ux,FunctionPrototypeSymbolHasInstance:iy,ObjectDefineProperty:oy,ObjectDefineProperties:qx,ObjectSetPrototypeOf:sy,StringPrototypeToLowerCase:$x,Symbol:jx,SymbolHasInstance:zx}=V();dy.exports=G;G.WritableState=Di;var{EventEmitter:Hx}=Ai(),Oi=Xo().Stream,{Buffer:os}=We(),cs=Pr(),{addAbortSignal:Vx}=Ti(),{getHighWaterMark:Gx,getDefaultHighWaterMark:Yx}=Ri(),{ERR_INVALID_ARG_TYPE:Kx,ERR_METHOD_NOT_IMPLEMENTED:Xx,ERR_MULTIPLE_CALLBACK:ay,ERR_STREAM_CANNOT_PIPE:Jx,ERR_STREAM_DESTROYED:Li,ERR_STREAM_ALREADY_FINISHED:Qx,ERR_STREAM_NULL_VALUES:Zx,ERR_STREAM_WRITE_AFTER_END:eI,ERR_UNKNOWN_ENCODING:cy}=xe().codes,{errorOrDestroy:Cn}=cs;sy(G.prototype,Oi.prototype);sy(G,Oi);function Fc(){}var Mn=jx("kOnFinished");function Di(t,e,r){typeof r!="boolean"&&(r=e instanceof gt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Gx(this,t,"writableHighWaterMark",r):Yx(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=rI.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,as(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Mn]=[]}function as(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Di.prototype.getBuffer=function(){return ny(this.buffered,this.bufferedIndex)};oy(Di.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function G(t){let e=this instanceof gt();if(!e&&!iy(G,this))return new G(t);this._writableState=new Di(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Vx(t.signal,this)),Oi.call(this,t),cs.construct(this,()=>{let r=this._writableState;r.writing||Oc(this,r),Lc(this,r)})}oy(G,zx,{__proto__:null,value:function(t){return iy(this,t)?!0:this!==G?!1:t&&t._writableState instanceof Di}});G.prototype.pipe=function(){Cn(this,new Jx)};function ly(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!os.isEncoding(r))throw new cy(r);typeof n!="function"&&(n=Fc)}if(e===null)throw new Zx;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=os.from(e,r),r="buffer");else if(e instanceof os)r="buffer";else if(Oi._isUint8Array(e))e=Oi._uint8ArrayToBuffer(e),r="buffer";else throw new Kx("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new eI:i.destroyed&&(o=new Li("write")),o?(qr.nextTick(n,o),Cn(t,o,!0),o):(i.pendingcb++,tI(t,i,e,r,n))}G.prototype.write=function(t,e,r){return ly(this,t,e,r)===!0};G.prototype.cork=function(){this._writableState.corked++};G.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Oc(this,t))};G.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=$x(e)),!os.isEncoding(e))throw new cy(e);return this._writableState.defaultEncoding=e,this};function tI(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Fc&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function ty(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Li("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function ry(t,e,r,n){--e.pendingcb,n(r),kc(e),Cn(t,r)}function rI(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Cn(t,new ay);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?qr.nextTick(ry,t,r,e,i):ry(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Oc(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},qr.nextTick(nI,r.afterWriteTickInfo)):fy(t,r,1,i))}function nI({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,fy(t,e,r,n)}function fy(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&kc(e),Lc(t,e)}function kc(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new Li("write"))}let r=t[Mn].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Li("end"))}as(t)}function Oc(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?Fc:l=>{for(let f=s;f<r.length;++f)r[f].callback(l)},c=e.allNoop&&s===0?r:ny(r,s);c.allBuffers=e.allBuffers,ty(t,e,!0,e.length,c,"",a),as(e)}else{do{let{chunk:a,encoding:c,callback:l}=r[s];r[s++]=null;let f=i?1:a.length;ty(t,e,!1,f,a,c,l)}while(s<r.length&&!e.writing);s===r.length?as(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}G.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Xx("_write()")};G.prototype._writev=null;G.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=ly(this,t,e);o instanceof Ux&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Lc(this,n,!0),n.ended=!0):n.finished?i=new Qx("end"):n.destroyed&&(i=new Li("end"))),typeof r=="function"&&(i||n.finished?qr.nextTick(r,i):n[Mn].push(r)),this};function ss(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function iI(t,e){let r=!1;function n(i){if(r){Cn(t,i??ay());return}if(r=!0,e.pendingcb--,i){let o=e[Mn].splice(0);for(let s=0;s<o.length;s++)o[s](i);Cn(t,i,e.sync)}else ss(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,qr.nextTick(vc,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function oI(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,iI(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Lc(t,e,r){ss(e)&&(oI(t,e),e.pendingcb===0&&(r?(e.pendingcb++,qr.nextTick((n,i)=>{ss(i)?vc(n,i):i.pendingcb--},t,e)):ss(e)&&(e.pendingcb++,vc(t,e))))}function vc(t,e){e.pendingcb--,e.finished=!0;let r=e[Mn].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}qx(G.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var sI=cs.destroy;G.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Mn].length)&&qr.nextTick(kc,r),sI.call(this,t,e),this};G.prototype._undestroy=cs.undestroy;G.prototype._destroy=function(t,e){e(t)};G.prototype[Hx.captureRejectionSymbol]=function(t){this.destroy(t)};var Rc;function uy(){return Rc===void 0&&(Rc={}),Rc}G.fromWeb=function(t,e){return uy().newStreamWritableFromWritableStream(t,e)};G.toWeb=function(t){return uy().newWritableStreamFromStreamWritable(t)}});var Ty=I((vD,Ay)=>{var Dc=fr(),aI=We(),{isReadable:cI,isWritable:lI,isIterable:hy,isNodeStream:fI,isReadableNodeStream:yy,isWritableNodeStream:py,isDuplexNodeStream:uI,isReadableStream:wy,isWritableStream:my}=pt(),gy=jt(),{AbortError:Iy,codes:{ERR_INVALID_ARG_TYPE:dI,ERR_INVALID_RETURN_VALUE:Sy}}=xe(),{destroyer:Pn}=Pr(),hI=gt(),Ny=ki(),yI=ls(),{createDeferredPromise:by}=me(),Ey=Sc(),_y=globalThis.Blob||aI.Blob,pI=typeof _y<"u"?function(e){return e instanceof _y}:function(e){return!1},wI=globalThis.AbortController||An().AbortController,{FunctionPrototypeCall:xy}=V(),hr=class extends hI{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Ay.exports=function t(e,r){if(uI(e))return e;if(yy(e))return Bn({readable:e});if(py(e))return Bn({writable:e});if(fI(e))return Bn({writable:!1,readable:!1});if(wy(e))return Bn({readable:Ny.fromWeb(e)});if(my(e))return Bn({writable:yI.fromWeb(e)});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=mI(e);if(hy(i))return Ey(hr,i,{objectMode:!0,write:o,final:s,destroy:a});let c=i?.then;if(typeof c=="function"){let l,f=xy(c,i,u=>{if(u!=null)throw new Sy("nully","body",u)},u=>{Pn(l,u)});return l=new hr({objectMode:!0,readable:!1,write:o,final(u){s(async()=>{try{await f,Dc.nextTick(u,null)}catch(h){Dc.nextTick(u,h)}})},destroy:a})}throw new Sy("Iterable, AsyncIterable or AsyncFunction",r,i)}if(pI(e))return t(e.arrayBuffer());if(hy(e))return Ey(hr,e,{objectMode:!0,writable:!1});if(wy(e?.readable)&&my(e?.writable))return hr.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?yy(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?py(e?.writable)?e?.writable:t(e.writable):void 0;return Bn({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return xy(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{Pn(i,o)}),i=new hr({objectMode:!0,writable:!1,read(){}})}throw new dI(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function mI(t){let{promise:e,resolve:r}=by(),n=new wI,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:c,cb:l}=await s;if(Dc.nextTick(l),c)return;if(i.aborted)throw new Iy(void 0,{cause:i.reason});({promise:e,resolve:r}=by()),yield a}}(),{signal:i}),write(s,a,c){let l=r;r=null,l({chunk:s,done:!1,cb:c})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function Bn(t){let e=t.readable&&typeof t.readable.read!="function"?Ny.wrap(t.readable):t.readable,r=t.writable,n=!!cI(e),i=!!lI(r),o,s,a,c,l;function f(u){let h=c;c=null,h?h(u):u&&l.destroy(u)}return l=new hr({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(gy(r,u=>{i=!1,u&&Pn(e,u),f(u)}),l._write=function(u,h,d){r.write(u,h)?d():o=d},l._final=function(u){r.end(),s=u},r.on("drain",function(){if(o){let u=o;o=null,u()}}),r.on("finish",function(){if(s){let u=s;s=null,u()}})),n&&(gy(e,u=>{n=!1,u&&Pn(e,u),f(u)}),e.on("readable",function(){if(a){let u=a;a=null,u()}}),e.on("end",function(){l.push(null)}),l._read=function(){for(;;){let u=e.read();if(u===null){a=l._read;return}if(!l.push(u))return}}),l._destroy=function(u,h){!u&&c!==null&&(u=new Iy),a=null,o=null,s=null,c===null?h(u):(c=h,Pn(r,u),Pn(e,u))},l}});var gt=I((FD,Fy)=>{"use strict";var{ObjectDefineProperties:gI,ObjectGetOwnPropertyDescriptor:zt,ObjectKeys:SI,ObjectSetPrototypeOf:Ry}=V();Fy.exports=Ze;var Bc=ki(),qe=ls();Ry(Ze.prototype,Bc.prototype);Ry(Ze,Bc);{let t=SI(qe.prototype);for(let e=0;e<t.length;e++){let r=t[e];Ze.prototype[r]||(Ze.prototype[r]=qe.prototype[r])}}function Ze(t){if(!(this instanceof Ze))return new Ze(t);Bc.call(this,t),qe.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}gI(Ze.prototype,{writable:{__proto__:null,...zt(qe.prototype,"writable")},writableHighWaterMark:{__proto__:null,...zt(qe.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...zt(qe.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...zt(qe.prototype,"writableBuffer")},writableLength:{__proto__:null,...zt(qe.prototype,"writableLength")},writableFinished:{__proto__:null,...zt(qe.prototype,"writableFinished")},writableCorked:{__proto__:null,...zt(qe.prototype,"writableCorked")},writableEnded:{__proto__:null,...zt(qe.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...zt(qe.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Cc;function vy(){return Cc===void 0&&(Cc={}),Cc}Ze.fromWeb=function(t,e){return vy().newStreamDuplexFromReadableWritablePair(t,e)};Ze.toWeb=function(t){return vy().newReadableWritablePairFromDuplex(t)};var Mc;Ze.from=function(t){return Mc||(Mc=Ty()),Mc(t,"body")}});var Uc=I((kD,Oy)=>{"use strict";var{ObjectSetPrototypeOf:ky,Symbol:bI}=V();Oy.exports=Ht;var{ERR_METHOD_NOT_IMPLEMENTED:EI}=xe().codes,Wc=gt(),{getHighWaterMark:_I}=Ri();ky(Ht.prototype,Wc.prototype);ky(Ht,Wc);var Ci=bI("kCallback");function Ht(t){if(!(this instanceof Ht))return new Ht(t);let e=t?_I(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Wc.call(this,t),this._readableState.sync=!1,this[Ci]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",xI)}function Pc(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function xI(){this._final!==Pc&&Pc.call(this)}Ht.prototype._final=Pc;Ht.prototype._transform=function(t,e,r){throw new EI("_transform()")};Ht.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[Ci]=r})};Ht.prototype._read=function(){if(this[Ci]){let t=this[Ci];this[Ci]=null,t()}}});var $c=I((OD,Dy)=>{"use strict";var{ObjectSetPrototypeOf:Ly}=V();Dy.exports=Wn;var qc=Uc();Ly(Wn.prototype,qc.prototype);Ly(Wn,qc);function Wn(t){if(!(this instanceof Wn))return new Wn(t);qc.call(this,t)}Wn.prototype._transform=function(t,e,r){r(null,t)}});var ys=I((LD,Wy)=>{var Mi=fr(),{ArrayIsArray:II,Promise:NI,SymbolAsyncIterator:AI,SymbolDispose:TI}=V(),hs=jt(),{once:RI}=me(),vI=Pr(),Cy=gt(),{aggregateTwoErrors:FI,codes:{ERR_INVALID_ARG_TYPE:Jc,ERR_INVALID_RETURN_VALUE:jc,ERR_MISSING_ARGS:kI,ERR_STREAM_DESTROYED:OI,ERR_STREAM_PREMATURE_CLOSE:LI},AbortError:DI}=xe(),{validateFunction:CI,validateAbortSignal:MI}=vn(),{isIterable:$r,isReadable:zc,isReadableNodeStream:ds,isNodeStream:My,isTransformStream:Un,isWebStream:BI,isReadableStream:Hc,isReadableFinished:PI}=pt(),WI=globalThis.AbortController||An().AbortController,Vc,Gc,Yc;function By(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=hs(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,vI.destroyer(t,o||new OI("pipe")))},cleanup:i}}function UI(t){return CI(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Kc(t){if($r(t))return t;if(ds(t))return qI(t);throw new Jc("val",["Readable","Iterable","AsyncIterable"],t)}async function*qI(t){Gc||(Gc=ki()),yield*Gc.prototype[AI].call(t)}async function us(t,e,r,{end:n}){let i,o=null,s=l=>{if(l&&(i=l),o){let f=o;o=null,f()}},a=()=>new NI((l,f)=>{i?f(i):o=()=>{i?f(i):l()}});e.on("drain",s);let c=hs(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let l of t)e.write(l)||await a();n&&(e.end(),await a()),r()}catch(l){r(i!==l?FI(i,l):l)}finally{c(),e.off("drain",s)}}async function Xc(t,e,r,{end:n}){Un(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function $I(...t){return Py(t,RI(UI(t)))}function Py(t,e,r){if(t.length===1&&II(t[0])&&(t=t[0]),t.length<2)throw new kI("streams");let n=new WI,i=n.signal,o=r?.signal,s=[];MI(o,"options.signal");function a(){E(new DI)}Yc=Yc||me().addAbortListener;let c;o&&(c=Yc(o,a));let l,f,u=[],h=0;function d(T){E(T,--h===0)}function E(T,x){var R;if(T&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=T),!(!l&&!x)){for(;u.length;)u.shift()(l);(R=c)===null||R===void 0||R[TI](),n.abort(),x&&(l||s.forEach(Ee=>Ee()),Mi.nextTick(e,l,f))}}let w;for(let T=0;T<t.length;T++){let x=t[T],R=T<t.length-1,Ee=T>0,U=R||r?.end!==!1,ve=T===t.length-1;if(My(x)){let D=function(re){re&&re.name!=="AbortError"&&re.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(re)};var A=D;if(U){let{destroy:re,cleanup:Nr}=By(x,R,Ee);u.push(re),zc(x)&&ve&&s.push(Nr)}x.on("error",D),zc(x)&&ve&&s.push(()=>{x.removeListener("error",D)})}if(T===0)if(typeof x=="function"){if(w=x({signal:i}),!$r(w))throw new jc("Iterable, AsyncIterable or Stream","source",w)}else $r(x)||ds(x)||Un(x)?w=x:w=Cy.from(x);else if(typeof x=="function"){if(Un(w)){var N;w=Kc((N=w)===null||N===void 0?void 0:N.readable)}else w=Kc(w);if(w=x(w,{signal:i}),R){if(!$r(w,!0))throw new jc("AsyncIterable",`transform[${T-1}]`,w)}else{var _;Vc||(Vc=$c());let D=new Vc({objectMode:!0}),re=(_=w)===null||_===void 0?void 0:_.then;if(typeof re=="function")h++,re.call(w,ue=>{f=ue,ue!=null&&D.write(ue),U&&D.end(),Mi.nextTick(d)},ue=>{D.destroy(ue),Mi.nextTick(d,ue)});else if($r(w,!0))h++,us(w,D,d,{end:U});else if(Hc(w)||Un(w)){let ue=w.readable||w;h++,us(ue,D,d,{end:U})}else throw new jc("AsyncIterable or Promise","destination",w);w=D;let{destroy:Nr,cleanup:wa}=By(w,!1,!0);u.push(Nr),ve&&s.push(wa)}}else if(My(x)){if(ds(w)){h+=2;let D=jI(w,x,d,{end:U});zc(x)&&ve&&s.push(D)}else if(Un(w)||Hc(w)){let D=w.readable||w;h++,us(D,x,d,{end:U})}else if($r(w))h++,us(w,x,d,{end:U});else throw new Jc("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=x}else if(BI(x)){if(ds(w))h++,Xc(Kc(w),x,d,{end:U});else if(Hc(w)||$r(w))h++,Xc(w,x,d,{end:U});else if(Un(w))h++,Xc(w.readable,x,d,{end:U});else throw new Jc("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=x}else w=Cy.from(x)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&Mi.nextTick(a),w}function jI(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new LI)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;PI(t)?Mi.nextTick(s):t.once("end",s)}else r();return hs(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),hs(e,{readable:!1,writable:!0},r)}Wy.exports={pipelineImpl:Py,pipeline:$I}});var Zc=I((DD,Hy)=>{"use strict";var{pipeline:zI}=ys(),ps=gt(),{destroyer:HI}=Pr(),{isNodeStream:ws,isReadable:Uy,isWritable:qy,isWebStream:Qc,isTransformStream:jr,isWritableStream:$y,isReadableStream:jy}=pt(),{AbortError:VI,codes:{ERR_INVALID_ARG_VALUE:zy,ERR_MISSING_ARGS:GI}}=xe(),YI=jt();Hy.exports=function(...e){if(e.length===0)throw new GI("streams");if(e.length===1)return ps.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=ps.from(e[0])),typeof e[e.length-1]=="function"){let d=e.length-1;e[d]=ps.from(e[d])}for(let d=0;d<e.length;++d)if(!(!ws(e[d])&&!Qc(e[d]))){if(d<e.length-1&&!(Uy(e[d])||jy(e[d])||jr(e[d])))throw new zy(`streams[${d}]`,r[d],"must be readable");if(d>0&&!(qy(e[d])||$y(e[d])||jr(e[d])))throw new zy(`streams[${d}]`,r[d],"must be writable")}let n,i,o,s,a;function c(d){let E=s;s=null,E?E(d):d?a.destroy(d):!h&&!u&&a.destroy()}let l=e[0],f=zI(e,c),u=!!(qy(l)||$y(l)||jr(l)),h=!!(Uy(f)||jy(f)||jr(f));if(a=new ps({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(f!=null&&f.readableObjectMode),writable:u,readable:h}),u){if(ws(l))a._write=function(E,w,N){l.write(E,w)?N():n=N},a._final=function(E){l.end(),i=E},l.on("drain",function(){if(n){let E=n;n=null,E()}});else if(Qc(l)){let w=(jr(l)?l.writable:l).getWriter();a._write=async function(N,_,A){try{await w.ready,w.write(N).catch(()=>{}),A()}catch(T){A(T)}},a._final=async function(N){try{await w.ready,w.close().catch(()=>{}),i=N}catch(_){N(_)}}}let d=jr(f)?f.readable:f;YI(d,()=>{if(i){let E=i;i=null,E()}})}if(h){if(ws(f))f.on("readable",function(){if(o){let d=o;o=null,d()}}),f.on("end",function(){a.push(null)}),a._read=function(){for(;;){let d=f.read();if(d===null){o=a._read;return}if(!a.push(d))return}};else if(Qc(f)){let E=(jr(f)?f.readable:f).getReader();a._read=async function(){for(;;)try{let{value:w,done:N}=await E.read();if(!a.push(w))return;if(N){a.push(null);return}}catch{return}}}}return a._destroy=function(d,E){!d&&s!==null&&(d=new VI),o=null,n=null,i=null,s===null?E(d):(s=E,ws(f)&&HI(f,d))},a}});var tp=I((CD,rl)=>{"use strict";var KI=globalThis.AbortController||An().AbortController,{codes:{ERR_INVALID_ARG_VALUE:XI,ERR_INVALID_ARG_TYPE:Bi,ERR_MISSING_ARGS:JI,ERR_OUT_OF_RANGE:QI},AbortError:St}=xe(),{validateAbortSignal:zr,validateInteger:Vy,validateObject:Hr}=vn(),ZI=V().Symbol("kWeak"),eN=V().Symbol("kResistStopPropagation"),{finished:tN}=jt(),rN=Zc(),{addAbortSignalNoValidate:nN}=Ti(),{isWritable:iN,isNodeStream:oN}=pt(),{deprecate:sN}=me(),{ArrayPrototypePush:aN,Boolean:cN,MathFloor:Gy,Number:lN,NumberIsNaN:fN,Promise:Yy,PromiseReject:Ky,PromiseResolve:uN,PromisePrototypeThen:Xy,Symbol:Qy}=V(),ms=Qy("kEmpty"),Jy=Qy("kEof");function dN(t,e){if(e!=null&&Hr(e,"options"),e?.signal!=null&&zr(e.signal,"options.signal"),oN(t)&&!iN(t))throw new XI("stream",t,"must be writable");let r=rN(this,t);return e!=null&&e.signal&&nN(e.signal,r),r}function gs(t,e){if(typeof t!="function")throw new Bi("fn",["Function","AsyncFunction"],t);e!=null&&Hr(e,"options"),e?.signal!=null&&zr(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Gy(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Gy(e.highWaterMark)),Vy(r,"options.concurrency",1),Vy(n,"options.highWaterMark",0),n+=r,async function*(){let o=me().AbortSignalAny([e?.signal].filter(cN)),s=this,a=[],c={signal:o},l,f,u=!1,h=0;function d(){u=!0,E()}function E(){h-=1,w()}function w(){f&&!u&&h<r&&a.length<n&&(f(),f=null)}async function N(){try{for await(let _ of s){if(u)return;if(o.aborted)throw new St;try{if(_=t(_,c),_===ms)continue;_=uN(_)}catch(A){_=Ky(A)}h+=1,Xy(_,E,d),a.push(_),l&&(l(),l=null),!u&&(a.length>=n||h>=r)&&await new Yy(A=>{f=A})}a.push(Jy)}catch(_){let A=Ky(_);Xy(A,E,d),a.push(A)}finally{u=!0,l&&(l(),l=null)}}N();try{for(;;){for(;a.length>0;){let _=await a[0];if(_===Jy)return;if(o.aborted)throw new St;_!==ms&&(yield _),a.shift(),w()}await new Yy(_=>{l=_})}}finally{u=!0,f&&(f(),f=null)}}.call(this)}function hN(t=void 0){return t!=null&&Hr(t,"options"),t?.signal!=null&&zr(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new St({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Zy(t,e=void 0){for await(let r of tl.call(this,t,e))return!0;return!1}async function yN(t,e=void 0){if(typeof t!="function")throw new Bi("fn",["Function","AsyncFunction"],t);return!await Zy.call(this,async(...r)=>!await t(...r),e)}async function pN(t,e){for await(let r of tl.call(this,t,e))return r}async function wN(t,e){if(typeof t!="function")throw new Bi("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),ms}for await(let n of gs.call(this,r,e));}function tl(t,e){if(typeof t!="function")throw new Bi("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:ms}return gs.call(this,r,e)}var el=class extends JI{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function mN(t,e,r){var n;if(typeof t!="function")throw new Bi("reducer",["Function","AsyncFunction"],t);r!=null&&Hr(r,"options"),r?.signal!=null&&zr(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let l=new St(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await tN(this.destroy(l)),l}let o=new KI,s=o.signal;if(r!=null&&r.signal){let l={once:!0,[ZI]:this,[eN]:!0};r.signal.addEventListener("abort",()=>o.abort(),l)}let a=!1;try{for await(let l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new St;i?e=await t(e,l,{signal:s}):(e=l,i=!0)}if(!a&&!i)throw new el}finally{o.abort()}return e}async function gN(t){t!=null&&Hr(t,"options"),t?.signal!=null&&zr(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new St(void 0,{cause:t.signal.reason});aN(e,n)}return e}function SN(t,e){let r=gs.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function ep(t){if(t=lN(t),fN(t))return 0;if(t<0)throw new QI("number",">= 0",t);return t}function bN(t,e=void 0){return e!=null&&Hr(e,"options"),e?.signal!=null&&zr(e.signal,"options.signal"),t=ep(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new St;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new St;t--<=0&&(yield o)}}.call(this)}function EN(t,e=void 0){return e!=null&&Hr(e,"options"),e?.signal!=null&&zr(e.signal,"options.signal"),t=ep(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new St;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new St;if(t-- >0&&(yield o),t<=0)return}}.call(this)}rl.exports.streamReturningOperators={asIndexedPairs:sN(hN,"readable.asIndexedPairs will be removed in a future version."),drop:bN,filter:tl,flatMap:SN,map:gs,take:EN,compose:dN};rl.exports.promiseReturningOperators={every:yN,forEach:wN,reduce:mN,toArray:gN,some:Zy,find:pN}});var nl=I((MD,rp)=>{"use strict";var{ArrayPrototypePop:_N,Promise:xN}=V(),{isIterable:IN,isNodeStream:NN,isWebStream:AN}=pt(),{pipelineImpl:TN}=ys(),{finished:RN}=jt();il();function vN(...t){return new xN((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!NN(o)&&!IN(o)&&!AN(o)){let s=_N(t);n=s.signal,i=s.end}TN(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}rp.exports={finished:RN,pipeline:vN}});var il=I((BD,up)=>{var{Buffer:FN}=We(),{ObjectDefineProperty:Vt,ObjectKeys:op,ReflectApply:sp}=V(),{promisify:{custom:ap}}=me(),{streamReturningOperators:np,promiseReturningOperators:ip}=tp(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:cp}}=xe(),kN=Zc(),{setDefaultHighWaterMark:ON,getDefaultHighWaterMark:LN}=Ri(),{pipeline:lp}=ys(),{destroyer:DN}=Pr(),fp=jt(),ol=nl(),Pi=pt(),$=up.exports=Xo().Stream;$.isDestroyed=Pi.isDestroyed;$.isDisturbed=Pi.isDisturbed;$.isErrored=Pi.isErrored;$.isReadable=Pi.isReadable;$.isWritable=Pi.isWritable;$.Readable=ki();for(let t of op(np)){let r=function(...n){if(new.target)throw cp();return $.Readable.from(sp(e,this,n))};sl=r;let e=np[t];Vt(r,"name",{__proto__:null,value:e.name}),Vt(r,"length",{__proto__:null,value:e.length}),Vt($.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var sl;for(let t of op(ip)){let r=function(...i){if(new.target)throw cp();return sp(e,this,i)};sl=r;let e=ip[t];Vt(r,"name",{__proto__:null,value:e.name}),Vt(r,"length",{__proto__:null,value:e.length}),Vt($.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var sl;$.Writable=ls();$.Duplex=gt();$.Transform=Uc();$.PassThrough=$c();$.pipeline=lp;var{addAbortSignal:CN}=Ti();$.addAbortSignal=CN;$.finished=fp;$.destroy=DN;$.compose=kN;$.setDefaultHighWaterMark=ON;$.getDefaultHighWaterMark=LN;Vt($,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return ol}});Vt(lp,ap,{__proto__:null,enumerable:!0,get(){return ol.pipeline}});Vt(fp,ap,{__proto__:null,enumerable:!0,get(){return ol.finished}});$.Stream=$;$._isUint8Array=function(e){return e instanceof Uint8Array};$._uint8ArrayToBuffer=function(e){return FN.from(e.buffer,e.byteOffset,e.byteLength)}});var dp=I((PD,Q)=>{"use strict";var ie=il(),MN=nl(),BN=ie.Readable.destroy;Q.exports=ie.Readable;Q.exports._uint8ArrayToBuffer=ie._uint8ArrayToBuffer;Q.exports._isUint8Array=ie._isUint8Array;Q.exports.isDisturbed=ie.isDisturbed;Q.exports.isErrored=ie.isErrored;Q.exports.isReadable=ie.isReadable;Q.exports.Readable=ie.Readable;Q.exports.Writable=ie.Writable;Q.exports.Duplex=ie.Duplex;Q.exports.Transform=ie.Transform;Q.exports.PassThrough=ie.PassThrough;Q.exports.addAbortSignal=ie.addAbortSignal;Q.exports.finished=ie.finished;Q.exports.destroy=ie.destroy;Q.exports.destroy=BN;Q.exports.pipeline=ie.pipeline;Q.exports.compose=ie.compose;Object.defineProperty(ie,"promises",{configurable:!0,enumerable:!0,get(){return MN}});Q.exports.Stream=ie.Stream;Q.exports.default=Q.exports});var Kp=I(ks=>{"use strict";ks.byteLength=eA;ks.toByteArray=rA;ks.fromByteArray=oA;var xt=[],He=[],ZN=typeof Uint8Array<"u"?Uint8Array:Array,vl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Xr=0,Gp=vl.length;Xr<Gp;++Xr)xt[Xr]=vl[Xr],He[vl.charCodeAt(Xr)]=Xr;var Xr,Gp;He[45]=62;He[95]=63;function Yp(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function eA(t){var e=Yp(t),r=e[0],n=e[1];return(r+n)*3/4-n}function tA(t,e,r){return(e+r)*3/4-r}function rA(t){var e,r=Yp(t),n=r[0],i=r[1],o=new ZN(tA(t,n,i)),s=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=He[t.charCodeAt(c)]<<18|He[t.charCodeAt(c+1)]<<12|He[t.charCodeAt(c+2)]<<6|He[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=He[t.charCodeAt(c)]<<2|He[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=He[t.charCodeAt(c)]<<10|He[t.charCodeAt(c+1)]<<4|He[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function nA(t){return xt[t>>18&63]+xt[t>>12&63]+xt[t>>6&63]+xt[t&63]}function iA(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(nA(n));return i.join("")}function oA(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(iA(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(xt[e>>2]+xt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(xt[e>>10]+xt[e>>4&63]+xt[e<<2&63]+"=")),i.join("")}});var Xp=I(Fl=>{Fl.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,u=r?i-1:0,h=r?-1:1,d=t[e+u];for(u+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=o*256+t[e+u],u+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+t[e+u],u+=h,f-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l}return(d?-1:1)*s*Math.pow(2,o-n)};Fl.write=function(t,e,r,n,i,o){var s,a,c,l=o*8-i-1,f=(1<<l)-1,u=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,E=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+u>=1?e+=h/c:e+=h*Math.pow(2,1-u),e*c>=2&&(s++,c/=2),s+u>=f?(a=0,s=f):s+u>=1?(a=(e*c-1)*Math.pow(2,i),s=s+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=a&255,d+=E,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+d]=s&255,d+=E,s/=256,l-=8);t[r+d-E]|=w*128}});var Ve=I(ei=>{"use strict";var kl=Kp(),Qn=Xp(),Jp=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ei.Buffer=b;ei.SlowBuffer=uA;ei.INSPECT_MAX_BYTES=50;var Os=2147483647;ei.kMaxLength=Os;b.TYPED_ARRAY_SUPPORT=sA();!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function sA(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function Kt(t){if(t>Os)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,b.prototype),e}function b(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Cl(t)}return tw(t,e,r)}b.poolSize=8192;function tw(t,e,r){if(typeof t=="string")return cA(t,e);if(ArrayBuffer.isView(t))return lA(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(It(t,ArrayBuffer)||t&&It(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(It(t,SharedArrayBuffer)||t&&It(t.buffer,SharedArrayBuffer)))return Ll(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return b.from(n,e,r);let i=fA(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return b.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}b.from=function(t,e,r){return tw(t,e,r)};Object.setPrototypeOf(b.prototype,Uint8Array.prototype);Object.setPrototypeOf(b,Uint8Array);function rw(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function aA(t,e,r){return rw(t),t<=0?Kt(t):e!==void 0?typeof r=="string"?Kt(t).fill(e,r):Kt(t).fill(e):Kt(t)}b.alloc=function(t,e,r){return aA(t,e,r)};function Cl(t){return rw(t),Kt(t<0?0:Ml(t)|0)}b.allocUnsafe=function(t){return Cl(t)};b.allocUnsafeSlow=function(t){return Cl(t)};function cA(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=nw(t,e)|0,n=Kt(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Ol(t){let e=t.length<0?0:Ml(t.length)|0,r=Kt(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function lA(t){if(It(t,Uint8Array)){let e=new Uint8Array(t);return Ll(e.buffer,e.byteOffset,e.byteLength)}return Ol(t)}function Ll(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,b.prototype),n}function fA(t){if(b.isBuffer(t)){let e=Ml(t.length)|0,r=Kt(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Pl(t.length)?Kt(0):Ol(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ol(t.data)}function Ml(t){if(t>=Os)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Os.toString(16)+" bytes");return t|0}function uA(t){return+t!=t&&(t=0),b.alloc(+t)}b.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==b.prototype};b.compare=function(e,r){if(It(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),It(r,Uint8Array)&&(r=b.from(r,r.offset,r.byteLength)),!b.isBuffer(e)||!b.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};b.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return b.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=b.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(It(s,Uint8Array))o+s.length>i.length?(b.isBuffer(s)||(s=b.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(b.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function nw(t,e){if(b.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||It(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Dl(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return dw(t).length;default:if(i)return n?-1:Dl(t).length;e=(""+e).toLowerCase(),i=!0}}b.byteLength=nw;function dA(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return _A(this,e,r);case"utf8":case"utf-8":return ow(this,e,r);case"ascii":return bA(this,e,r);case"latin1":case"binary":return EA(this,e,r);case"base64":return gA(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xA(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}b.prototype._isBuffer=!0;function Jr(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}b.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Jr(this,r,r+1);return this};b.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Jr(this,r,r+3),Jr(this,r+1,r+2);return this};b.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Jr(this,r,r+7),Jr(this,r+1,r+6),Jr(this,r+2,r+5),Jr(this,r+3,r+4);return this};b.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?ow(this,0,e):dA.apply(this,arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(e){if(!b.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:b.compare(this,e)===0};b.prototype.inspect=function(){let e="",r=ei.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Jp&&(b.prototype[Jp]=b.prototype.inspect);b.prototype.compare=function(e,r,n,i,o){if(It(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),!b.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,c=Math.min(s,a),l=this.slice(i,o),f=e.slice(r,n);for(let u=0;u<c;++u)if(l[u]!==f[u]){s=l[u],a=f[u];break}return s<a?-1:a<s?1:0};function iw(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Pl(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=b.from(e,n)),b.isBuffer(e))return e.length===0?-1:Qp(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Qp(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Qp(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(f,u){return o===1?f[u]:f.readUInt16BE(u*o)}let l;if(i){let f=-1;for(l=r;l<s;l++)if(c(t,l)===c(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===a)return f*o}else f!==-1&&(l-=l-f),f=-1}else for(r+a>s&&(r=s-a),l=r;l>=0;l--){let f=!0;for(let u=0;u<a;u++)if(c(t,l+u)!==c(e,u)){f=!1;break}if(f)return l}return-1}b.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};b.prototype.indexOf=function(e,r,n){return iw(this,e,r,n,!0)};b.prototype.lastIndexOf=function(e,r,n){return iw(this,e,r,n,!1)};function hA(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(Pl(a))return s;t[r+s]=a}return s}function yA(t,e,r,n){return Ls(Dl(e,t.length-r),t,r,n)}function pA(t,e,r,n){return Ls(TA(e),t,r,n)}function wA(t,e,r,n){return Ls(dw(e),t,r,n)}function mA(t,e,r,n){return Ls(RA(e,t.length-r),t,r,n)}b.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return hA(this,e,r,n);case"utf8":case"utf-8":return yA(this,e,r,n);case"ascii":case"latin1":case"binary":return pA(this,e,r,n);case"base64":return wA(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mA(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gA(t,e,r){return e===0&&r===t.length?kl.fromByteArray(t):kl.fromByteArray(t.slice(e,r))}function ow(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,l,f,u;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],(c&192)===128&&(u=(o&31)<<6|c&63,u>127&&(s=u));break;case 3:c=t[i+1],l=t[i+2],(c&192)===128&&(l&192)===128&&(u=(o&15)<<12|(c&63)<<6|l&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:c=t[i+1],l=t[i+2],f=t[i+3],(c&192)===128&&(l&192)===128&&(f&192)===128&&(u=(o&15)<<18|(c&63)<<12|(l&63)<<6|f&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return SA(n)}var Zp=4096;function SA(t){let e=t.length;if(e<=Zp)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Zp));return r}function bA(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function EA(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function _A(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=vA[t[o]];return i}function xA(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}b.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,b.prototype),i};function fe(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};b.prototype.readUintBE=b.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};b.prototype.readUint8=b.prototype.readUInt8=function(e,r){return e=e>>>0,r||fe(e,1,this.length),this[e]};b.prototype.readUint16LE=b.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||fe(e,2,this.length),this[e]|this[e+1]<<8};b.prototype.readUint16BE=b.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||fe(e,2,this.length),this[e]<<8|this[e+1]};b.prototype.readUint32LE=b.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};b.prototype.readUint32BE=b.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};b.prototype.readBigUInt64LE=br(function(e){e=e>>>0,Zn(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ki(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});b.prototype.readBigUInt64BE=br(function(e){e=e>>>0,Zn(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ki(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});b.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};b.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||fe(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};b.prototype.readInt8=function(e,r){return e=e>>>0,r||fe(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};b.prototype.readInt16LE=function(e,r){e=e>>>0,r||fe(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};b.prototype.readInt16BE=function(e,r){e=e>>>0,r||fe(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};b.prototype.readInt32LE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};b.prototype.readInt32BE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};b.prototype.readBigInt64LE=br(function(e){e=e>>>0,Zn(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ki(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});b.prototype.readBigInt64BE=br(function(e){e=e>>>0,Zn(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Ki(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});b.prototype.readFloatLE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),Qn.read(this,e,!0,23,4)};b.prototype.readFloatBE=function(e,r){return e=e>>>0,r||fe(e,4,this.length),Qn.read(this,e,!1,23,4)};b.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||fe(e,8,this.length),Qn.read(this,e,!0,52,8)};b.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||fe(e,8,this.length),Qn.read(this,e,!1,52,8)};function Re(t,e,r,n,i,o){if(!b.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Re(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};b.prototype.writeUintBE=b.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Re(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};b.prototype.writeUint8=b.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,1,255,0),this[r]=e&255,r+1};b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function sw(t,e,r,n,i){uw(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function aw(t,e,r,n,i){uw(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}b.prototype.writeBigUInt64LE=br(function(e,r=0){return sw(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeBigUInt64BE=br(function(e,r=0){return aw(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Re(this,e,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};b.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Re(this,e,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};b.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};b.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};b.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};b.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};b.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Re(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};b.prototype.writeBigInt64LE=br(function(e,r=0){return sw(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});b.prototype.writeBigInt64BE=br(function(e,r=0){return aw(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function cw(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function lw(t,e,r,n,i){return e=+e,r=r>>>0,i||cw(t,e,r,4,34028234663852886e22,-34028234663852886e22),Qn.write(t,e,r,n,23,4),r+4}b.prototype.writeFloatLE=function(e,r,n){return lw(this,e,r,!0,n)};b.prototype.writeFloatBE=function(e,r,n){return lw(this,e,r,!1,n)};function fw(t,e,r,n,i){return e=+e,r=r>>>0,i||cw(t,e,r,8,17976931348623157e292,-17976931348623157e292),Qn.write(t,e,r,n,52,8),r+8}b.prototype.writeDoubleLE=function(e,r,n){return fw(this,e,r,!0,n)};b.prototype.writeDoubleBE=function(e,r,n){return fw(this,e,r,!1,n)};b.prototype.copy=function(e,r,n,i){if(!b.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};b.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=b.isBuffer(e)?e:b.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var Jn={};function Bl(t,e,r){Jn[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Bl("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Bl("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Bl("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=ew(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=ew(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ew(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function IA(t,e,r){Zn(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ki(e,t.length-(r+1))}function uw(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new Jn.ERR_OUT_OF_RANGE("value",a,t)}IA(n,i,o)}function Zn(t,e){if(typeof t!="number")throw new Jn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ki(t,e,r){throw Math.floor(t)!==t?(Zn(t,r),new Jn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Jn.ERR_BUFFER_OUT_OF_BOUNDS:new Jn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var NA=/[^+/0-9A-Za-z-_]/g;function AA(t){if(t=t.split("=")[0],t=t.trim().replace(NA,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Dl(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function TA(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function RA(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function dw(t){return kl.toByteArray(AA(t))}function Ls(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function It(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Pl(t){return t!==t}var vA=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function br(t){return typeof BigInt>"u"?FA:t}function FA(){throw new Error("BigInt not supported")}});var Y=I((cP,gw)=>{"use strict";gw.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var ti=I((lP,Ds)=>{"use strict";var{AbortController:Sw,AbortSignal:YA}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ds.exports=Sw;Ds.exports.AbortSignal=YA;Ds.exports.default=Sw});var Ji=I((fP,Wl)=>{"use strict";var ri=typeof Reflect=="object"?Reflect:null,bw=ri&&typeof ri.apply=="function"?ri.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Cs;ri&&typeof ri.ownKeys=="function"?Cs=ri.ownKeys:Object.getOwnPropertySymbols?Cs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cs=function(e){return Object.getOwnPropertyNames(e)};function KA(t){console&&console.warn&&console.warn(t)}var _w=Number.isNaN||function(e){return e!==e};function W(){W.init.call(this)}Wl.exports=W;Wl.exports.once=ZA;W.EventEmitter=W;W.prototype._events=void 0;W.prototype._eventsCount=0;W.prototype._maxListeners=void 0;var Ew=10;function Ms(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(W,"defaultMaxListeners",{enumerable:!0,get:function(){return Ew},set:function(t){if(typeof t!="number"||t<0||_w(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ew=t}});W.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};W.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_w(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function xw(t){return t._maxListeners===void 0?W.defaultMaxListeners:t._maxListeners}W.prototype.getMaxListeners=function(){return xw(this)};W.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")bw(c,this,r);else for(var l=c.length,f=Rw(c,l),n=0;n<l;++n)bw(f[n],this,r);return!0};function Iw(t,e,r,n){var i,o,s;if(Ms(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),s===void 0)s=o[e]=r,++t._eventsCount;else if(typeof s=="function"?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=xw(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,KA(a)}return t}W.prototype.addListener=function(e,r){return Iw(this,e,r,!1)};W.prototype.on=W.prototype.addListener;W.prototype.prependListener=function(e,r){return Iw(this,e,r,!0)};function XA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nw(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=XA.bind(n);return i.listener=r,n.wrapFn=i,i}W.prototype.once=function(e,r){return Ms(r),this.on(e,Nw(this,e,r)),this};W.prototype.prependOnceListener=function(e,r){return Ms(r),this.prependListener(e,Nw(this,e,r)),this};W.prototype.removeListener=function(e,r){var n,i,o,s,a;if(Ms(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():JA(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};W.prototype.off=W.prototype.removeListener;W.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Aw(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?QA(i):Rw(i,i.length)}W.prototype.listeners=function(e){return Aw(this,e,!0)};W.prototype.rawListeners=function(e){return Aw(this,e,!1)};W.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Tw.call(t,e)};W.prototype.listenerCount=Tw;function Tw(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}W.prototype.eventNames=function(){return this._eventsCount>0?Cs(this._events):[]};function Rw(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function JA(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function QA(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function ZA(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,o),n(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}vw(t,e,o,{once:!0}),e!=="error"&&eT(t,i,{once:!0})})}function eT(t,e,r){typeof t.on=="function"&&vw(t,"error",e,r)}function vw(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Se=I((uP,ql)=>{"use strict";var tT=Ve(),{kResistStopPropagation:rT,SymbolDispose:nT}=Y(),iT=globalThis.AbortSignal||ti().AbortSignal,oT=globalThis.AbortController||ti().AbortController,sT=Object.getPrototypeOf(async function(){}).constructor,Fw=globalThis.Blob||tT.Blob,aT=typeof Fw<"u"?function(e){return e instanceof Fw}:function(e){return!1},kw=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},cT=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},Ul=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};ql.exports={AggregateError:Ul,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof sT},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:aT,deprecate(t,e){return t},addAbortListener:Ji().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);kw(e,"signal"),cT(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[rT]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[nT](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:iT.any||function(e){if(e.length===1)return e[0];let r=new oT,n=()=>r.abort();return e.forEach(i=>{kw(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};ql.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Ne=I((dP,Dw)=>{"use strict";var{format:lT,inspect:Bs,AggregateError:fT}=Se(),uT=globalThis.AggregateError||fT,dT=Symbol("kIsNodeError"),hT=["string","function","number","object","Function","Object","boolean","bigint","symbol"],yT=/^([A-Z][a-z0-9]*)+$/,pT="__node_internal_",Ps={};function Qr(t,e){if(!t)throw new Ps.ERR_INTERNAL_ASSERTION(e)}function Ow(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function wT(t,e,r){if(typeof e=="function")return Qr(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Qr(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:lT(e,...r)}function ye(t,e,r){r||(r=Error);class n extends r{constructor(...o){super(wT(t,e,o))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[dT]=!0,Ps[t]=n}function Lw(t){let e=pT+t.name;return Object.defineProperty(t,"name",{value:e}),t}function mT(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new uT([e,t],e.message);return r.code=e.code,r}return t||e}var $l=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Ps.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ye("ERR_ASSERTION","%s",Error);ye("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Qr(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let c of e)Qr(typeof c=="string","All expected entries have to be of type string"),hT.includes(c)?i.push(c.toLowerCase()):yT.test(c)?o.push(c):(Qr(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=Bs(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Bs(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);ye("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Bs(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);ye("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ye("ERR_MISSING_ARGS",(...t)=>{Qr(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);ye("ERR_OUT_OF_RANGE",(t,e,r)=>{Qr(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Ow(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Ow(n)),n+="n"):n=Bs(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ye("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ye("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ye("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ye("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ye("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ye("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Dw.exports={AbortError:$l,aggregateTwoErrors:Lw(mT),hideStackFrames:Lw,codes:Ps}});var ii=I((hP,zw)=>{"use strict";var{ArrayIsArray:zl,ArrayPrototypeIncludes:Pw,ArrayPrototypeJoin:Ww,ArrayPrototypeMap:gT,NumberIsInteger:Hl,NumberIsNaN:ST,NumberMAX_SAFE_INTEGER:bT,NumberMIN_SAFE_INTEGER:ET,NumberParseInt:_T,ObjectPrototypeHasOwnProperty:xT,RegExpPrototypeExec:Uw,String:IT,StringPrototypeToUpperCase:NT,StringPrototypeTrim:AT}=Y(),{hideStackFrames:Ge,codes:{ERR_SOCKET_BAD_PORT:TT,ERR_INVALID_ARG_TYPE:be,ERR_INVALID_ARG_VALUE:ni,ERR_OUT_OF_RANGE:Zr,ERR_UNKNOWN_SIGNAL:Cw}}=Ne(),{normalizeEncoding:RT}=Se(),{isAsyncFunction:vT,isArrayBufferView:FT}=Se().types,Mw={};function kT(t){return t===(t|0)}function OT(t){return t===t>>>0}var LT=/^[0-7]+$/,DT="must be a 32-bit unsigned integer or an octal string";function CT(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Uw(LT,t)===null)throw new ni(e,t,DT);t=_T(t,8)}return qw(t,e),t}var MT=Ge((t,e,r=ET,n=bT)=>{if(typeof t!="number")throw new be(e,"number",t);if(!Hl(t))throw new Zr(e,"an integer",t);if(t<r||t>n)throw new Zr(e,`>= ${r} && <= ${n}`,t)}),BT=Ge((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new be(e,"number",t);if(!Hl(t))throw new Zr(e,"an integer",t);if(t<r||t>n)throw new Zr(e,`>= ${r} && <= ${n}`,t)}),qw=Ge((t,e,r=!1)=>{if(typeof t!="number")throw new be(e,"number",t);if(!Hl(t))throw new Zr(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Zr(e,`>= ${n} && <= ${i}`,t)});function Vl(t,e){if(typeof t!="string")throw new be(e,"string",t)}function PT(t,e,r=void 0,n){if(typeof t!="number")throw new be(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&ST(t))throw new Zr(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var WT=Ge((t,e,r)=>{if(!Pw(r,t)){let i="must be one of: "+Ww(gT(r,o=>typeof o=="string"?`'${o}'`:IT(o)),", ");throw new ni(e,t,i)}});function $w(t,e){if(typeof t!="boolean")throw new be(e,"boolean",t)}function jl(t,e,r){return t==null||!xT(t,e)?r:t[e]}var UT=Ge((t,e,r=null)=>{let n=jl(r,"allowArray",!1),i=jl(r,"allowFunction",!1);if(!jl(r,"nullable",!1)&&t===null||!n&&zl(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new be(e,"Object",t)}),qT=Ge((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new be(e,"a dictionary",t)}),Ws=Ge((t,e,r=0)=>{if(!zl(t))throw new be(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new ni(e,t,n)}});function $T(t,e){Ws(t,e);for(let r=0;r<t.length;r++)Vl(t[r],`${e}[${r}]`)}function jT(t,e){Ws(t,e);for(let r=0;r<t.length;r++)$w(t[r],`${e}[${r}]`)}function zT(t,e){Ws(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new be(i,"AbortSignal",n);jw(n,i)}}function HT(t,e="signal"){if(Vl(t,e),Mw[t]===void 0)throw Mw[NT(t)]!==void 0?new Cw(t+" (signals must use all capital letters)"):new Cw(t)}var VT=Ge((t,e="buffer")=>{if(!FT(t))throw new be(e,["Buffer","TypedArray","DataView"],t)});function GT(t,e){let r=RT(e),n=t.length;if(r==="hex"&&n%2!==0)throw new ni("encoding",e,`is invalid for data of length ${n}`)}function YT(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&AT(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new TT(e,t,r);return t|0}var jw=Ge((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new be(e,"AbortSignal",t)}),KT=Ge((t,e)=>{if(typeof t!="function")throw new be(e,"Function",t)}),XT=Ge((t,e)=>{if(typeof t!="function"||vT(t))throw new be(e,"Function",t)}),JT=Ge((t,e)=>{if(t!==void 0)throw new be(e,"undefined",t)});function QT(t,e,r){if(!Pw(r,t))throw new be(e,`('${Ww(r,"|")}')`,t)}var ZT=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Bw(t,e){if(typeof t>"u"||!Uw(ZT,t))throw new ni(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function eR(t){if(typeof t=="string")return Bw(t,"hints"),t;if(zl(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Bw(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new ni("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}zw.exports={isInt32:kT,isUint32:OT,parseFileMode:CT,validateArray:Ws,validateStringArray:$T,validateBooleanArray:jT,validateAbortSignalArray:zT,validateBoolean:$w,validateBuffer:VT,validateDictionary:qT,validateEncoding:GT,validateFunction:KT,validateInt32:BT,validateInteger:MT,validateNumber:PT,validateObject:UT,validateOneOf:WT,validatePlainFunction:XT,validatePort:YT,validateSignalName:HT,validateString:Vl,validateUint32:qw,validateUndefined:JT,validateUnion:QT,validateAbortSignal:jw,validateLinkHeaderValue:eR}});var Er=I((yP,Yw)=>{var Z=Yw.exports={},Nt,At;function Gl(){throw new Error("setTimeout has not been defined")}function Yl(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Nt=setTimeout:Nt=Gl}catch{Nt=Gl}try{typeof clearTimeout=="function"?At=clearTimeout:At=Yl}catch{At=Yl}})();function Hw(t){if(Nt===setTimeout)return setTimeout(t,0);if((Nt===Gl||!Nt)&&setTimeout)return Nt=setTimeout,setTimeout(t,0);try{return Nt(t,0)}catch{try{return Nt.call(null,t,0)}catch{return Nt.call(this,t,0)}}}function tR(t){if(At===clearTimeout)return clearTimeout(t);if((At===Yl||!At)&&clearTimeout)return At=clearTimeout,clearTimeout(t);try{return At(t)}catch{try{return At.call(null,t)}catch{return At.call(this,t)}}}var Xt=[],oi=!1,en,Us=-1;function rR(){!oi||!en||(oi=!1,en.length?Xt=en.concat(Xt):Us=-1,Xt.length&&Vw())}function Vw(){if(!oi){var t=Hw(rR);oi=!0;for(var e=Xt.length;e;){for(en=Xt,Xt=[];++Us<e;)en&&en[Us].run();Us=-1,e=Xt.length}en=null,oi=!1,tR(t)}}Z.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Xt.push(new Gw(t,e)),Xt.length===1&&!oi&&Hw(Vw)};function Gw(t,e){this.fun=t,this.array=e}Gw.prototype.run=function(){this.fun.apply(null,this.array)};Z.title="browser";Z.browser=!0;Z.env={};Z.argv=[];Z.version="";Z.versions={};function Jt(){}Z.on=Jt;Z.addListener=Jt;Z.once=Jt;Z.off=Jt;Z.removeListener=Jt;Z.removeAllListeners=Jt;Z.emit=Jt;Z.prependListener=Jt;Z.prependOnceListener=Jt;Z.listeners=function(t){return[]};Z.binding=function(t){throw new Error("process.binding is not supported")};Z.cwd=function(){return"/"};Z.chdir=function(t){throw new Error("process.chdir is not supported")};Z.umask=function(){return 0}});var Rt=I((pP,lm)=>{"use strict";var{SymbolAsyncIterator:Kw,SymbolIterator:Xw,SymbolFor:tn}=Y(),Jw=tn("nodejs.stream.destroyed"),Qw=tn("nodejs.stream.errored"),Kl=tn("nodejs.stream.readable"),Xl=tn("nodejs.stream.writable"),Zw=tn("nodejs.stream.disturbed"),nR=tn("nodejs.webstream.isClosedPromise"),iR=tn("nodejs.webstream.controllerErrorFunction");function qs(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function $s(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function oR(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Tt(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function em(t){return!!(t&&!Tt(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function tm(t){return!!(t&&!Tt(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function rm(t){return!!(t&&!Tt(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function sR(t){return em(t)||tm(t)||rm(t)}function aR(t,e){return t==null?!1:e===!0?typeof t[Kw]=="function":e===!1?typeof t[Xw]=="function":typeof t[Kw]=="function"||typeof t[Xw]=="function"}function js(t){if(!Tt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Jw]||n!=null&&n.destroyed)}function nm(t){if(!$s(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function cR(t,e){if(!$s(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function lR(t){if(!qs(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function im(t,e){if(!qs(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function om(t){return t&&t[Kl]!=null?t[Kl]:typeof t?.readable!="boolean"?null:js(t)?!1:qs(t)&&t.readable&&!im(t)}function sm(t){return t&&t[Xl]!=null?t[Xl]:typeof t?.writable!="boolean"?null:js(t)?!1:$s(t)&&t.writable&&!nm(t)}function fR(t,e){return Tt(t)?js(t)?!0:!(e?.readable!==!1&&om(t)||e?.writable!==!1&&sm(t)):null}function uR(t){var e,r;return Tt(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function dR(t){var e,r;return Tt(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function hR(t){if(!Tt(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&am(t)?t._closed:null}function am(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function cm(t){return typeof t._sent100=="boolean"&&am(t)}function yR(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function pR(t){if(!Tt(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&cm(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function wR(t){var e;return!!(t&&((e=t[Zw])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function mR(t){var e,r,n,i,o,s,a,c,l,f;return!!(t&&((e=(r=(n=(i=(o=(s=t[Qw])!==null&&s!==void 0?s:t.readableErrored)!==null&&o!==void 0?o:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((f=t._writableState)===null||f===void 0)&&f.errored))}lm.exports={isDestroyed:js,kIsDestroyed:Jw,isDisturbed:wR,kIsDisturbed:Zw,isErrored:mR,kIsErrored:Qw,isReadable:om,kIsReadable:Kl,kIsClosedPromise:nR,kControllerErrorFunction:iR,kIsWritable:Xl,isClosed:hR,isDuplexNodeStream:oR,isFinished:fR,isIterable:aR,isReadableNodeStream:qs,isReadableStream:em,isReadableEnded:lR,isReadableFinished:im,isReadableErrored:dR,isNodeStream:Tt,isWebStream:sR,isWritable:sm,isWritableNodeStream:$s,isWritableStream:tm,isWritableEnded:nm,isWritableFinished:cR,isWritableErrored:uR,isServerRequest:yR,isServerResponse:cm,willEmitClose:pR,isTransformStream:rm}});var Qt=I((wP,tf)=>{var _r=Er(),{AbortError:gm,codes:gR}=Ne(),{ERR_INVALID_ARG_TYPE:SR,ERR_STREAM_PREMATURE_CLOSE:fm}=gR,{kEmptyObject:Ql,once:Zl}=Se(),{validateAbortSignal:bR,validateFunction:ER,validateObject:_R,validateBoolean:xR}=ii(),{Promise:IR,PromisePrototypeThen:NR,SymbolDispose:Sm}=Y(),{isClosed:AR,isReadable:um,isReadableNodeStream:Jl,isReadableStream:TR,isReadableFinished:dm,isReadableErrored:hm,isWritable:ym,isWritableNodeStream:pm,isWritableStream:RR,isWritableFinished:wm,isWritableErrored:mm,isNodeStream:vR,willEmitClose:FR,kIsClosedPromise:kR}=Rt(),si;function OR(t){return t.setHeader&&typeof t.abort=="function"}var ef=()=>{};function bm(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Ql):e==null?e=Ql:_R(e,"options"),ER(r,"callback"),bR(e.signal,"options.signal"),r=Zl(r),TR(t)||RR(t))return LR(t,e,r);if(!vR(t))throw new SR("stream",["ReadableStream","WritableStream","Stream"],t);let o=(n=e.readable)!==null&&n!==void 0?n:Jl(t),s=(i=e.writable)!==null&&i!==void 0?i:pm(t),a=t._writableState,c=t._readableState,l=()=>{t.writable||h()},f=FR(t)&&Jl(t)===o&&pm(t)===s,u=wm(t,!1),h=()=>{u=!0,t.destroyed&&(f=!1),!(f&&(!t.readable||o))&&(!o||d)&&r.call(t)},d=dm(t,!1),E=()=>{d=!0,t.destroyed&&(f=!1),!(f&&(!t.writable||s))&&(!s||u)&&r.call(t)},w=R=>{r.call(t,R)},N=AR(t),_=()=>{N=!0;let R=mm(t)||hm(t);if(R&&typeof R!="boolean")return r.call(t,R);if(o&&!d&&Jl(t,!0)&&!dm(t,!1))return r.call(t,new fm);if(s&&!u&&!wm(t,!1))return r.call(t,new fm);r.call(t)},A=()=>{N=!0;let R=mm(t)||hm(t);if(R&&typeof R!="boolean")return r.call(t,R);r.call(t)},T=()=>{t.req.on("finish",h)};OR(t)?(t.on("complete",h),f||t.on("abort",_),t.req?T():t.on("request",T)):s&&!a&&(t.on("end",l),t.on("close",l)),!f&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",E),t.on("finish",h),e.error!==!1&&t.on("error",w),t.on("close",_),N?_r.nextTick(_):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?f||_r.nextTick(A):(!o&&(!f||um(t))&&(u||ym(t)===!1)||!s&&(!f||ym(t))&&(d||um(t)===!1)||c&&t.req&&t.aborted)&&_r.nextTick(A);let x=()=>{r=ef,t.removeListener("aborted",_),t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",T),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",E),t.removeListener("error",w),t.removeListener("close",_)};if(e.signal&&!N){let R=()=>{let Ee=r;x(),Ee.call(t,new gm(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)_r.nextTick(R);else{si=si||Se().addAbortListener;let Ee=si(e.signal,R),U=r;r=Zl((...ve)=>{Ee[Sm](),U.apply(t,ve)})}}return x}function LR(t,e,r){let n=!1,i=ef;if(e.signal)if(i=()=>{n=!0,r.call(t,new gm(void 0,{cause:e.signal.reason}))},e.signal.aborted)_r.nextTick(i);else{si=si||Se().addAbortListener;let s=si(e.signal,i),a=r;r=Zl((...c)=>{s[Sm](),a.apply(t,c)})}let o=(...s)=>{n||_r.nextTick(()=>r.apply(t,s))};return NR(t[kR].promise,o,o),ef}function DR(t,e){var r;let n=!1;return e===null&&(e=Ql),(r=e)!==null&&r!==void 0&&r.cleanup&&(xR(e.cleanup,"cleanup"),n=e.cleanup),new IR((i,o)=>{let s=bm(t,e,a=>{n&&s(),a?o(a):i()})})}tf.exports=bm;tf.exports.finished=DR});var rn=I((mP,Rm)=>{"use strict";var vt=Er(),{aggregateTwoErrors:CR,codes:{ERR_MULTIPLE_CALLBACK:MR},AbortError:BR}=Ne(),{Symbol:xm}=Y(),{kIsDestroyed:PR,isDestroyed:WR,isFinished:UR,isServerRequest:qR}=Rt(),Im=xm("kDestroy"),rf=xm("kConstruct");function Nm(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function $R(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Nm(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Em(this,t,e):this.once(Im,function(o){Em(this,CR(o,t),e)}),this)}function Em(t,e,r){let n=!1;function i(o){if(n)return;n=!0;let s=t._readableState,a=t._writableState;Nm(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?vt.nextTick(jR,t,o):vt.nextTick(Am,t)}try{t._destroy(e||null,i)}catch(o){i(o)}}function jR(t,e){nf(t,e),Am(t)}function Am(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function nf(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function zR(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function of(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?vt.nextTick(nf,t,e):nf(t,e))}function HR(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(rf,e),!(t.listenerCount(rf)>1)&&vt.nextTick(VR,t)}function VR(t){let e=!1;function r(n){if(e){of(t,n??new MR);return}e=!0;let i=t._readableState,o=t._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?t.emit(Im,n):n?of(t,n,!0):vt.nextTick(GR,t)}try{t._construct(n=>{vt.nextTick(r,n)})}catch(n){vt.nextTick(r,n)}}function GR(t){t.emit(rf)}function _m(t){return t?.setHeader&&typeof t.abort=="function"}function Tm(t){t.emit("close")}function YR(t,e){t.emit("error",e),vt.nextTick(Tm,t)}function KR(t,e){!t||WR(t)||(!e&&!UR(t)&&(e=new BR),qR(t)?(t.socket=null,t.destroy(e)):_m(t)?t.abort():_m(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?vt.nextTick(YR,t,e):vt.nextTick(Tm,t),t.destroyed||(t[PR]=!0))}Rm.exports={construct:HR,destroyer:KR,destroy:$R,undestroy:zR,errorOrDestroy:of}});var Vs=I((gP,Fm)=>{"use strict";var{ArrayIsArray:XR,ObjectSetPrototypeOf:vm}=Y(),{EventEmitter:zs}=Ji();function Hs(t){zs.call(this,t)}vm(Hs.prototype,zs.prototype);vm(Hs,zs);Hs.prototype.pipe=function(t,e){let r=this;function n(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,t.end())}function a(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function c(f){l(),zs.listenerCount(this,"error")===0&&this.emit("error",f)}sf(r,"error",c),sf(t,"error",c);function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};function sf(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):XR(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}Fm.exports={Stream:Hs,prependListener:sf}});var Qi=I((SP,Gs)=>{"use strict";var{SymbolDispose:JR}=Y(),{AbortError:km,codes:QR}=Ne(),{isNodeStream:Om,isWebStream:ZR,kControllerErrorFunction:ev}=Rt(),tv=Qt(),{ERR_INVALID_ARG_TYPE:Lm}=QR,af,rv=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Lm(e,"AbortSignal",t)};Gs.exports.addAbortSignal=function(e,r){if(rv(e,"signal"),!Om(r)&&!ZR(r))throw new Lm("stream",["ReadableStream","WritableStream","Stream"],r);return Gs.exports.addAbortSignalNoValidate(e,r)};Gs.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Om(e)?()=>{e.destroy(new km(void 0,{cause:t.reason}))}:()=>{e[ev](new km(void 0,{cause:t.reason}))};if(t.aborted)r();else{af=af||Se().addAbortListener;let n=af(t,r);tv(e,n[JR])}return e}});var Mm=I((EP,Cm)=>{"use strict";var{StringPrototypeSlice:Dm,SymbolIterator:nv,TypedArrayPrototypeSet:Ys,Uint8Array:iv}=Y(),{Buffer:cf}=Ve(),{inspect:ov}=Se();Cm.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return cf.alloc(0);let r=cf.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Ys(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[nv](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let o=n.data;if(e>o.length)r+=o,e-=o.length;else{e===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Dm(o,0,e),this.head=n,n.data=Dm(o,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=cf.allocUnsafe(e),n=e,i=this.head,o=0;do{let s=i.data;if(e>s.length)Ys(r,s,n-e),e-=s.length;else{e===s.length?(Ys(r,s,n-e),++o,i.next?this.head=i.next:this.head=this.tail=null):(Ys(r,new iv(s.buffer,s.byteOffset,e),n-e),this.head=i,i.data=s.slice(e));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return ov(this,{...r,depth:0,customInspect:!1})}}});var Zi=I((_P,Um)=>{"use strict";var{MathFloor:sv,NumberIsInteger:av}=Y(),{validateInteger:cv}=ii(),{ERR_INVALID_ARG_VALUE:lv}=Ne().codes,Bm=16*1024,Pm=16;function fv(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Wm(t){return t?Pm:Bm}function uv(t,e){cv(e,"value",0),t?Pm=e:Bm=e}function dv(t,e,r,n){let i=fv(e,n,r);if(i!=null){if(!av(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new lv(o,i)}return sv(i)}return Wm(t.objectMode)}Um.exports={getHighWaterMark:dv,getDefaultHighWaterMark:Wm,setDefaultHighWaterMark:uv}});var jm=I((lf,$m)=>{var Ks=Ve(),Ft=Ks.Buffer;function qm(t,e){for(var r in t)e[r]=t[r]}Ft.from&&Ft.alloc&&Ft.allocUnsafe&&Ft.allocUnsafeSlow?$m.exports=Ks:(qm(Ks,lf),lf.Buffer=nn);function nn(t,e,r){return Ft(t,e,r)}nn.prototype=Object.create(Ft.prototype);qm(Ft,nn);nn.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ft(t,e,r)};nn.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ft(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};nn.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ft(t)};nn.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ks.SlowBuffer(t)}});var Vm=I(Hm=>{"use strict";var uf=jm().Buffer,zm=uf.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hv(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function yv(t){var e=hv(t);if(typeof e!="string"&&(uf.isEncoding===zm||!zm(t)))throw new Error("Unknown encoding: "+t);return e||t}Hm.StringDecoder=eo;function eo(t){this.encoding=yv(t);var e;switch(this.encoding){case"utf16le":this.text=bv,this.end=Ev,e=4;break;case"utf8":this.fillLast=mv,e=4;break;case"base64":this.text=_v,this.end=xv,e=3;break;default:this.write=Iv,this.end=Nv;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=uf.allocUnsafe(e)}eo.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};eo.prototype.end=Sv;eo.prototype.text=gv;eo.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function ff(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function pv(t,e,r){var n=e.length-1;if(n<r)return 0;var i=ff(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=ff(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=ff(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function wv(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function mv(t){var e=this.lastTotal-this.lastNeed,r=wv(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function gv(t,e){var r=pv(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Sv(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function bv(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ev(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function _v(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function xv(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Iv(t){return t.toString(this.encoding)}function Nv(t){return t&&t.length?this.write(t):""}});var df=I((IP,Xm)=>{"use strict";var Gm=Er(),{PromisePrototypeThen:Av,SymbolAsyncIterator:Ym,SymbolIterator:Km}=Y(),{Buffer:Tv}=Ve(),{ERR_INVALID_ARG_TYPE:Rv,ERR_STREAM_NULL_VALUES:vv}=Ne().codes;function Fv(t,e,r){let n;if(typeof e=="string"||e instanceof Tv)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Ym])i=!0,n=e[Ym]();else if(e&&e[Km])i=!1,n=e[Km]();else throw new Rv("iterable",["Iterable"],e);let o=new t({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(l,f){Av(a(l),()=>Gm.nextTick(f,l),u=>Gm.nextTick(f,u||l))};async function a(l){let f=l!=null,u=typeof n.throw=="function";if(f&&u){let{value:h,done:d}=await n.throw(l);if(await h,d)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function c(){for(;;){try{let{value:l,done:f}=i?await n.next():n.next();if(f)o.push(null);else{let u=l&&typeof l.then=="function"?await l:l;if(u===null)throw s=!1,new vv;if(o.push(u))continue;s=!1}}catch(l){o.destroy(l)}break}}return o}Xm.exports=Fv});var ro=I((NP,yg)=>{var it=Er(),{ArrayPrototypeIndexOf:kv,NumberIsInteger:Ov,NumberIsNaN:Lv,NumberParseInt:Dv,ObjectDefineProperties:bf,ObjectKeys:Cv,ObjectSetPrototypeOf:Zm,Promise:eg,SafeSet:Mv,SymbolAsyncDispose:Bv,SymbolAsyncIterator:Pv,Symbol:Wv}=Y();yg.exports=F;F.ReadableState=Zs;var{EventEmitter:Uv}=Ji(),{Stream:xr,prependListener:qv}=Vs(),{Buffer:hf}=Ve(),{addAbortSignal:$v}=Qi(),tg=Qt(),O=Se().debuglog("stream",t=>{O=t}),jv=Mm(),li=rn(),{getHighWaterMark:zv,getDefaultHighWaterMark:Hv}=Zi(),{aggregateTwoErrors:Jm,codes:{ERR_INVALID_ARG_TYPE:Vv,ERR_METHOD_NOT_IMPLEMENTED:Gv,ERR_OUT_OF_RANGE:Yv,ERR_STREAM_PUSH_AFTER_EOF:Kv,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Xv},AbortError:Jv}=Ne(),{validateObject:Qv}=ii(),on=Wv("kPaused"),{StringDecoder:rg}=Vm(),Zv=df();Zm(F.prototype,xr.prototype);Zm(F,xr);var yf=()=>{},{errorOrDestroy:ai}=li,ci=1,eF=2,ng=4,to=8,ig=16,Xs=32,Js=64,og=128,tF=256,rF=512,nF=1024,gf=2048,Sf=4096,iF=8192,oF=16384,sF=32768,sg=65536,aF=1<<17,cF=1<<18;function oe(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}bf(Zs.prototype,{objectMode:oe(ci),ended:oe(eF),endEmitted:oe(ng),reading:oe(to),constructed:oe(ig),sync:oe(Xs),needReadable:oe(Js),emittedReadable:oe(og),readableListening:oe(tF),resumeScheduled:oe(rF),errorEmitted:oe(nF),emitClose:oe(gf),autoDestroy:oe(Sf),destroyed:oe(iF),closed:oe(oF),closeEmitted:oe(sF),multiAwaitDrain:oe(sg),readingMore:oe(aF),dataEmitted:oe(cF)});function Zs(t,e,r){typeof r!="boolean"&&(r=e instanceof kt()),this.state=gf|Sf|ig|Xs,t&&t.objectMode&&(this.state|=ci),r&&t&&t.readableObjectMode&&(this.state|=ci),this.highWaterMark=t?zv(this,t,"readableHighWaterMark",r):Hv(!1),this.buffer=new jv,this.length=0,this.pipes=[],this.flowing=null,this[on]=null,t&&t.emitClose===!1&&(this.state&=~gf),t&&t.autoDestroy===!1&&(this.state&=~Sf),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new rg(t.encoding),this.encoding=t.encoding)}function F(t){if(!(this instanceof F))return new F(t);let e=this instanceof kt();this._readableState=new Zs(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&$v(t.signal,this)),xr.call(this,t),li.construct(this,()=>{this._readableState.needReadable&&Qs(this,this._readableState)})}F.prototype.destroy=li.destroy;F.prototype._undestroy=li.undestroy;F.prototype._destroy=function(t,e){e(t)};F.prototype[Uv.captureRejectionSymbol]=function(t){this.destroy(t)};F.prototype[Bv]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Jv,this.destroy(t)),new eg((e,r)=>tg(this,n=>n&&n!==t?r(n):e(null)))};F.prototype.push=function(t,e){return ag(this,t,e,!1)};F.prototype.unshift=function(t,e){return ag(this,t,e,!0)};function ag(t,e,r,n){O("readableAddChunk",e);let i=t._readableState,o;if(i.state&ci||(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=hf.from(e,r).toString(i.encoding):(e=hf.from(e,r),r=""))):e instanceof hf?r="":xr._isUint8Array(e)?(e=xr._uint8ArrayToBuffer(e),r=""):e!=null&&(o=new Vv("chunk",["string","Buffer","Uint8Array"],e))),o)ai(t,o);else if(e===null)i.state&=~to,uF(t,i);else if(i.state&ci||e&&e.length>0)if(n)if(i.state&ng)ai(t,new Xv);else{if(i.destroyed||i.errored)return!1;pf(t,i,e,!0)}else if(i.ended)ai(t,new Kv);else{if(i.destroyed||i.errored)return!1;i.state&=~to,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?pf(t,i,e,!1):Qs(t,i)):pf(t,i,e,!1)}else n||(i.state&=~to,Qs(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function pf(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&sg?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&Js&&ea(t)),Qs(t,e)}F.prototype.isPaused=function(){let t=this._readableState;return t[on]===!0||t.flowing===!1};F.prototype.setEncoding=function(t){let e=new rg(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var lF=1073741824;function fF(t){if(t>lF)throw new Yv("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Qm(t,e){return t<=0||e.length===0&&e.ended?0:e.state&ci?1:Lv(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}F.prototype.read=function(t){O("read",t),t===void 0?t=NaN:Ov(t)||(t=Dv(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=fF(t)),t!==0&&(e.state&=~og),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return O("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?wf(this):ea(this),null;if(t=Qm(t,e),t===0&&e.ended)return e.length===0&&wf(this),null;let n=(e.state&Js)!==0;if(O("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,O("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,O("reading, ended or constructing",n);else if(n){O("do read"),e.state|=to|Xs,e.length===0&&(e.state|=Js);try{this._read(e.highWaterMark)}catch(o){ai(this,o)}e.state&=~Xs,e.reading||(t=Qm(r,e))}let i;return t>0?i=dg(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&wf(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function uF(t,e){if(O("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?ea(t):(e.needReadable=!1,e.emittedReadable=!0,cg(t))}}function ea(t){let e=t._readableState;O("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(O("emitReadable",e.flowing),e.emittedReadable=!0,it.nextTick(cg,t))}function cg(t){let e=t._readableState;O("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,fg(t)}function Qs(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,it.nextTick(dF,t,e))}function dF(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(O("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}F.prototype._read=function(t){throw new Gv("_read()")};F.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Mv(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),O("pipe count=%d opts=%j",n.pipes.length,e);let o=(!e||e.end!==!1)&&t!==it.stdout&&t!==it.stderr?a:N;n.endEmitted?it.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,A){O("onunpipe"),_===r&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,f())}function a(){O("onend"),t.end()}let c,l=!1;function f(){O("cleanup"),t.removeListener("close",E),t.removeListener("finish",w),c&&t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",N),r.removeListener("data",h),l=!0,c&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&c()}function u(){l||(n.pipes.length===1&&n.pipes[0]===t?(O("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(O("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),c||(c=hF(r,t),t.on("drain",c))}r.on("data",h);function h(_){O("ondata");let A=t.write(_);O("dest.write",A),A===!1&&u()}function d(_){if(O("onerror",_),N(),t.removeListener("error",d),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?ai(t,_):t.emit("error",_)}}qv(t,"error",d);function E(){t.removeListener("finish",w),N()}t.once("close",E);function w(){O("onfinish"),t.removeListener("close",E),N()}t.once("finish",w);function N(){O("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?u():n.flowing||(O("pipe resume"),r.resume()),t};function hF(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(O("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(O("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}F.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=kv(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};F.prototype.on=function(t,e){let r=xr.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,O("on readable",n.length,n.reading),n.length?ea(this):n.reading||it.nextTick(yF,this)),r};F.prototype.addListener=F.prototype.on;F.prototype.removeListener=function(t,e){let r=xr.prototype.removeListener.call(this,t,e);return t==="readable"&&it.nextTick(lg,this),r};F.prototype.off=F.prototype.removeListener;F.prototype.removeAllListeners=function(t){let e=xr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&it.nextTick(lg,this),e};function lg(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[on]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function yF(t){O("readable nexttick read 0"),t.read(0)}F.prototype.resume=function(){let t=this._readableState;return t.flowing||(O("resume"),t.flowing=!t.readableListening,pF(this,t)),t[on]=!1,this};function pF(t,e){e.resumeScheduled||(e.resumeScheduled=!0,it.nextTick(wF,t,e))}function wF(t,e){O("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),fg(t),e.flowing&&!e.reading&&t.read(0)}F.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[on]=!0,this};function fg(t){let e=t._readableState;for(O("flow",e.flowing);e.flowing&&t.read()!==null;);}F.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{ai(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Cv(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};F.prototype[Pv]=function(){return ug(this)};F.prototype.iterator=function(t){return t!==void 0&&Qv(t,"options"),ug(this,t)};function ug(t,e){typeof t.read!="function"&&(t=F.wrap(t,{objectMode:!0}));let r=mF(t,e);return r.stream=t,r}async function*mF(t,e){let r=yf;function n(s){this===t?(r(),r=yf):r=s}t.on("readable",n);let i,o=tg(t,{writable:!1},s=>{i=s?Jm(i,s):null,r(),r=yf});try{for(;;){let s=t.destroyed?null:t.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new eg(n)}}}catch(s){throw i=Jm(i,s),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?li.destroyer(t,null):(t.off("readable",n),o())}}bf(F.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});bf(Zs.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[on]!==!1},set(t){this[on]=!!t}}});F._fromList=dg;function dg(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function wf(t){let e=t._readableState;O("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,it.nextTick(gF,e,t))}function gF(t,e){if(O("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)it.nextTick(SF,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function SF(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}F.from=function(t,e){return Zv(F,t,e)};var mf;function hg(){return mf===void 0&&(mf={}),mf}F.fromWeb=function(t,e){return hg().newStreamReadableFromReadableStream(t,e)};F.toWeb=function(t,e){return hg().newReadableStreamFromStreamReadable(t,e)};F.wrap=function(t,e){var r,n;return new F({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,o){li.destroyer(t,i),o(i)}}).wrap(t)}});var oa=I((AP,Ag)=>{var sn=Er(),{ArrayPrototypeSlice:mg,Error:bF,FunctionPrototypeSymbolHasInstance:gg,ObjectDefineProperty:Sg,ObjectDefineProperties:EF,ObjectSetPrototypeOf:bg,StringPrototypeToLowerCase:_F,Symbol:xF,SymbolHasInstance:IF}=Y();Ag.exports=K;K.WritableState=oo;var{EventEmitter:NF}=Ji(),no=Vs().Stream,{Buffer:ta}=Ve(),ia=rn(),{addAbortSignal:AF}=Qi(),{getHighWaterMark:TF,getDefaultHighWaterMark:RF}=Zi(),{ERR_INVALID_ARG_TYPE:vF,ERR_METHOD_NOT_IMPLEMENTED:FF,ERR_MULTIPLE_CALLBACK:Eg,ERR_STREAM_CANNOT_PIPE:kF,ERR_STREAM_DESTROYED:io,ERR_STREAM_ALREADY_FINISHED:OF,ERR_STREAM_NULL_VALUES:LF,ERR_STREAM_WRITE_AFTER_END:DF,ERR_UNKNOWN_ENCODING:_g}=Ne().codes,{errorOrDestroy:fi}=ia;bg(K.prototype,no.prototype);bg(K,no);function xf(){}var ui=xF("kOnFinished");function oo(t,e,r){typeof r!="boolean"&&(r=e instanceof kt()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?TF(this,t,"writableHighWaterMark",r):RF(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=MF.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,na(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ui]=[]}function na(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}oo.prototype.getBuffer=function(){return mg(this.buffered,this.bufferedIndex)};Sg(oo.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K(t){let e=this instanceof kt();if(!e&&!gg(K,this))return new K(t);this._writableState=new oo(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&AF(t.signal,this)),no.call(this,t),ia.construct(this,()=>{let r=this._writableState;r.writing||Nf(this,r),Af(this,r)})}Sg(K,IF,{__proto__:null,value:function(t){return gg(this,t)?!0:this!==K?!1:t&&t._writableState instanceof oo}});K.prototype.pipe=function(){fi(this,new kF)};function xg(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!ta.isEncoding(r))throw new _g(r);typeof n!="function"&&(n=xf)}if(e===null)throw new LF;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=ta.from(e,r),r="buffer");else if(e instanceof ta)r="buffer";else if(no._isUint8Array(e))e=no._uint8ArrayToBuffer(e),r="buffer";else throw new vF("chunk",["string","Buffer","Uint8Array"],e);let o;return i.ending?o=new DF:i.destroyed&&(o=new io("write")),o?(sn.nextTick(n,o),fi(t,o,!0),o):(i.pendingcb++,CF(t,i,e,r,n))}K.prototype.write=function(t,e,r){return xg(this,t,e,r)===!0};K.prototype.cork=function(){this._writableState.corked++};K.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Nf(this,t))};K.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=_F(e)),!ta.isEncoding(e))throw new _g(e);return this._writableState.defaultEncoding=e,this};function CF(t,e,r,n,i){let o=e.objectMode?1:r.length;e.length+=o;let s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==xf&&(e.allNoop=!1)):(e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),s&&!e.errored&&!e.destroyed}function pg(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new io("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function wg(t,e,r,n){--e.pendingcb,n(r),If(e),fi(t,r)}function MF(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){fi(t,new Eg);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?sn.nextTick(wg,t,r,e,i):wg(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Nf(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},sn.nextTick(BF,r.afterWriteTickInfo)):Ig(t,r,1,i))}function BF({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,Ig(t,e,r,n)}function Ig(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&If(e),Af(t,e)}function If(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:o,callback:s}=t.buffered[i],a=t.objectMode?1:o.length;t.length-=a,s((e=t.errored)!==null&&e!==void 0?e:new io("write"))}let r=t[ui].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new io("end"))}na(t)}function Nf(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,o=r.length-n;if(!o)return;let s=n;if(e.bufferProcessing=!0,o>1&&t._writev){e.pendingcb-=o-1;let a=e.allNoop?xf:l=>{for(let f=s;f<r.length;++f)r[f].callback(l)},c=e.allNoop&&s===0?r:mg(r,s);c.allBuffers=e.allBuffers,pg(t,e,!0,e.length,c,"",a),na(e)}else{do{let{chunk:a,encoding:c,callback:l}=r[s];r[s++]=null;let f=i?1:a.length;pg(t,e,!1,f,a,c,l)}while(s<r.length&&!e.writing);s===r.length?na(e):s>256?(r.splice(0,s),e.bufferedIndex=0):e.bufferedIndex=s}e.bufferProcessing=!1}K.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new FF("_write()")};K.prototype._writev=null;K.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let o=xg(this,t,e);o instanceof bF&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Af(this,n,!0),n.ended=!0):n.finished?i=new OF("end"):n.destroyed&&(i=new io("end"))),typeof r=="function"&&(i||n.finished?sn.nextTick(r,i):n[ui].push(r)),this};function ra(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function PF(t,e){let r=!1;function n(i){if(r){fi(t,i??Eg());return}if(r=!0,e.pendingcb--,i){let o=e[ui].splice(0);for(let s=0;s<o.length;s++)o[s](i);fi(t,i,e.sync)}else ra(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,sn.nextTick(_f,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function WF(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,PF(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Af(t,e,r){ra(e)&&(WF(t,e),e.pendingcb===0&&(r?(e.pendingcb++,sn.nextTick((n,i)=>{ra(i)?_f(n,i):i.pendingcb--},t,e)):ra(e)&&(e.pendingcb++,_f(t,e))))}function _f(t,e){e.pendingcb--,e.finished=!0;let r=e[ui].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}EF(K.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var UF=ia.destroy;K.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[ui].length)&&sn.nextTick(If,r),UF.call(this,t,e),this};K.prototype._undestroy=ia.undestroy;K.prototype._destroy=function(t,e){e(t)};K.prototype[NF.captureRejectionSymbol]=function(t){this.destroy(t)};var Ef;function Ng(){return Ef===void 0&&(Ef={}),Ef}K.fromWeb=function(t,e){return Ng().newStreamWritableFromWritableStream(t,e)};K.toWeb=function(t){return Ng().newWritableStreamFromStreamWritable(t)}});var qg=I((TP,Ug)=>{var Tf=Er(),qF=Ve(),{isReadable:$F,isWritable:jF,isIterable:Tg,isNodeStream:zF,isReadableNodeStream:Rg,isWritableNodeStream:vg,isDuplexNodeStream:HF,isReadableStream:Fg,isWritableStream:kg}=Rt(),Og=Qt(),{AbortError:Pg,codes:{ERR_INVALID_ARG_TYPE:VF,ERR_INVALID_RETURN_VALUE:Lg}}=Ne(),{destroyer:hi}=rn(),GF=kt(),Wg=ro(),YF=oa(),{createDeferredPromise:Dg}=Se(),Cg=df(),Mg=globalThis.Blob||qF.Blob,KF=typeof Mg<"u"?function(e){return e instanceof Mg}:function(e){return!1},XF=globalThis.AbortController||ti().AbortController,{FunctionPrototypeCall:Bg}=Y(),Ir=class extends GF{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Ug.exports=function t(e,r){if(HF(e))return e;if(Rg(e))return di({readable:e});if(vg(e))return di({writable:e});if(zF(e))return di({writable:!1,readable:!1});if(Fg(e))return di({readable:Wg.fromWeb(e)});if(kg(e))return di({writable:YF.fromWeb(e)});if(typeof e=="function"){let{value:i,write:o,final:s,destroy:a}=JF(e);if(Tg(i))return Cg(Ir,i,{objectMode:!0,write:o,final:s,destroy:a});let c=i?.then;if(typeof c=="function"){let l,f=Bg(c,i,u=>{if(u!=null)throw new Lg("nully","body",u)},u=>{hi(l,u)});return l=new Ir({objectMode:!0,readable:!1,write:o,final(u){s(async()=>{try{await f,Tf.nextTick(u,null)}catch(h){Tf.nextTick(u,h)}})},destroy:a})}throw new Lg("Iterable, AsyncIterable or AsyncFunction",r,i)}if(KF(e))return t(e.arrayBuffer());if(Tg(e))return Cg(Ir,e,{objectMode:!0,writable:!1});if(Fg(e?.readable)&&kg(e?.writable))return Ir.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?Rg(e?.readable)?e?.readable:t(e.readable):void 0,o=e!=null&&e.writable?vg(e?.writable)?e?.writable:t(e.writable):void 0;return di({readable:i,writable:o})}let n=e?.then;if(typeof n=="function"){let i;return Bg(n,e,o=>{o!=null&&i.push(o),i.push(null)},o=>{hi(i,o)}),i=new Ir({objectMode:!0,writable:!1,read(){}})}throw new VF(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function JF(t){let{promise:e,resolve:r}=Dg(),n=new XF,i=n.signal;return{value:t(async function*(){for(;;){let s=e;e=null;let{chunk:a,done:c,cb:l}=await s;if(Tf.nextTick(l),c)return;if(i.aborted)throw new Pg(void 0,{cause:i.reason});({promise:e,resolve:r}=Dg()),yield a}}(),{signal:i}),write(s,a,c){let l=r;r=null,l({chunk:s,done:!1,cb:c})},final(s){let a=r;r=null,a({done:!0,cb:s})},destroy(s,a){n.abort(),a(s)}}}function di(t){let e=t.readable&&typeof t.readable.read!="function"?Wg.wrap(t.readable):t.readable,r=t.writable,n=!!$F(e),i=!!jF(r),o,s,a,c,l;function f(u){let h=c;c=null,h?h(u):u&&l.destroy(u)}return l=new Ir({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(Og(r,u=>{i=!1,u&&hi(e,u),f(u)}),l._write=function(u,h,d){r.write(u,h)?d():o=d},l._final=function(u){r.end(),s=u},r.on("drain",function(){if(o){let u=o;o=null,u()}}),r.on("finish",function(){if(s){let u=s;s=null,u()}})),n&&(Og(e,u=>{n=!1,u&&hi(e,u),f(u)}),e.on("readable",function(){if(a){let u=a;a=null,u()}}),e.on("end",function(){l.push(null)}),l._read=function(){for(;;){let u=e.read();if(u===null){a=l._read;return}if(!l.push(u))return}}),l._destroy=function(u,h){!u&&c!==null&&(u=new Pg),a=null,o=null,s=null,c===null?h(u):(c=h,hi(r,u),hi(e,u))},l}});var kt=I((RP,zg)=>{"use strict";var{ObjectDefineProperties:QF,ObjectGetOwnPropertyDescriptor:Zt,ObjectKeys:ZF,ObjectSetPrototypeOf:$g}=Y();zg.exports=ot;var Ff=ro(),Ye=oa();$g(ot.prototype,Ff.prototype);$g(ot,Ff);{let t=ZF(Ye.prototype);for(let e=0;e<t.length;e++){let r=t[e];ot.prototype[r]||(ot.prototype[r]=Ye.prototype[r])}}function ot(t){if(!(this instanceof ot))return new ot(t);Ff.call(this,t),Ye.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}QF(ot.prototype,{writable:{__proto__:null,...Zt(Ye.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Zt(Ye.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Zt(Ye.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Zt(Ye.prototype,"writableBuffer")},writableLength:{__proto__:null,...Zt(Ye.prototype,"writableLength")},writableFinished:{__proto__:null,...Zt(Ye.prototype,"writableFinished")},writableCorked:{__proto__:null,...Zt(Ye.prototype,"writableCorked")},writableEnded:{__proto__:null,...Zt(Ye.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Zt(Ye.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Rf;function jg(){return Rf===void 0&&(Rf={}),Rf}ot.fromWeb=function(t,e){return jg().newStreamDuplexFromReadableWritablePair(t,e)};ot.toWeb=function(t){return jg().newReadableWritablePairFromDuplex(t)};var vf;ot.from=function(t){return vf||(vf=qg()),vf(t,"body")}});var Lf=I((vP,Vg)=>{"use strict";var{ObjectSetPrototypeOf:Hg,Symbol:e1}=Y();Vg.exports=er;var{ERR_METHOD_NOT_IMPLEMENTED:t1}=Ne().codes,Of=kt(),{getHighWaterMark:r1}=Zi();Hg(er.prototype,Of.prototype);Hg(er,Of);var so=e1("kCallback");function er(t){if(!(this instanceof er))return new er(t);let e=t?r1(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Of.call(this,t),this._readableState.sync=!1,this[so]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",n1)}function kf(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function n1(){this._final!==kf&&kf.call(this)}er.prototype._final=kf;er.prototype._transform=function(t,e,r){throw new t1("_transform()")};er.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(t,e,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[so]=r})};er.prototype._read=function(){if(this[so]){let t=this[so];this[so]=null,t()}}});var Cf=I((FP,Yg)=>{"use strict";var{ObjectSetPrototypeOf:Gg}=Y();Yg.exports=yi;var Df=Lf();Gg(yi.prototype,Df.prototype);Gg(yi,Df);function yi(t){if(!(this instanceof yi))return new yi(t);Df.call(this,t)}yi.prototype._transform=function(t,e,r){r(null,t)}});var la=I((kP,Zg)=>{var ao=Er(),{ArrayIsArray:i1,Promise:o1,SymbolAsyncIterator:s1,SymbolDispose:a1}=Y(),ca=Qt(),{once:c1}=Se(),l1=rn(),Kg=kt(),{aggregateTwoErrors:f1,codes:{ERR_INVALID_ARG_TYPE:zf,ERR_INVALID_RETURN_VALUE:Mf,ERR_MISSING_ARGS:u1,ERR_STREAM_DESTROYED:d1,ERR_STREAM_PREMATURE_CLOSE:h1},AbortError:y1}=Ne(),{validateFunction:p1,validateAbortSignal:w1}=ii(),{isIterable:an,isReadable:Bf,isReadableNodeStream:aa,isNodeStream:Xg,isTransformStream:pi,isWebStream:m1,isReadableStream:Pf,isReadableFinished:g1}=Rt(),S1=globalThis.AbortController||ti().AbortController,Wf,Uf,qf;function Jg(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=ca(t,{readable:e,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,l1.destroyer(t,o||new d1("pipe")))},cleanup:i}}function b1(t){return p1(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function $f(t){if(an(t))return t;if(aa(t))return E1(t);throw new zf("val",["Readable","Iterable","AsyncIterable"],t)}async function*E1(t){Uf||(Uf=ro()),yield*Uf.prototype[s1].call(t)}async function sa(t,e,r,{end:n}){let i,o=null,s=l=>{if(l&&(i=l),o){let f=o;o=null,f()}},a=()=>new o1((l,f)=>{i?f(i):o=()=>{i?f(i):l()}});e.on("drain",s);let c=ca(e,{readable:!1},s);try{e.writableNeedDrain&&await a();for await(let l of t)e.write(l)||await a();n&&(e.end(),await a()),r()}catch(l){r(i!==l?f1(i,l):l)}finally{c(),e.off("drain",s)}}async function jf(t,e,r,{end:n}){pi(e)&&(e=e.writable);let i=e.getWriter();try{for await(let o of t)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function _1(...t){return Qg(t,c1(b1(t)))}function Qg(t,e,r){if(t.length===1&&i1(t[0])&&(t=t[0]),t.length<2)throw new u1("streams");let n=new S1,i=n.signal,o=r?.signal,s=[];w1(o,"options.signal");function a(){E(new y1)}qf=qf||Se().addAbortListener;let c;o&&(c=qf(o,a));let l,f,u=[],h=0;function d(T){E(T,--h===0)}function E(T,x){var R;if(T&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=T),!(!l&&!x)){for(;u.length;)u.shift()(l);(R=c)===null||R===void 0||R[a1](),n.abort(),x&&(l||s.forEach(Ee=>Ee()),ao.nextTick(e,l,f))}}let w;for(let T=0;T<t.length;T++){let x=t[T],R=T<t.length-1,Ee=T>0,U=R||r?.end!==!1,ve=T===t.length-1;if(Xg(x)){let D=function(re){re&&re.name!=="AbortError"&&re.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(re)};var A=D;if(U){let{destroy:re,cleanup:Nr}=Jg(x,R,Ee);u.push(re),Bf(x)&&ve&&s.push(Nr)}x.on("error",D),Bf(x)&&ve&&s.push(()=>{x.removeListener("error",D)})}if(T===0)if(typeof x=="function"){if(w=x({signal:i}),!an(w))throw new Mf("Iterable, AsyncIterable or Stream","source",w)}else an(x)||aa(x)||pi(x)?w=x:w=Kg.from(x);else if(typeof x=="function"){if(pi(w)){var N;w=$f((N=w)===null||N===void 0?void 0:N.readable)}else w=$f(w);if(w=x(w,{signal:i}),R){if(!an(w,!0))throw new Mf("AsyncIterable",`transform[${T-1}]`,w)}else{var _;Wf||(Wf=Cf());let D=new Wf({objectMode:!0}),re=(_=w)===null||_===void 0?void 0:_.then;if(typeof re=="function")h++,re.call(w,ue=>{f=ue,ue!=null&&D.write(ue),U&&D.end(),ao.nextTick(d)},ue=>{D.destroy(ue),ao.nextTick(d,ue)});else if(an(w,!0))h++,sa(w,D,d,{end:U});else if(Pf(w)||pi(w)){let ue=w.readable||w;h++,sa(ue,D,d,{end:U})}else throw new Mf("AsyncIterable or Promise","destination",w);w=D;let{destroy:Nr,cleanup:wa}=Jg(w,!1,!0);u.push(Nr),ve&&s.push(wa)}}else if(Xg(x)){if(aa(w)){h+=2;let D=x1(w,x,d,{end:U});Bf(x)&&ve&&s.push(D)}else if(pi(w)||Pf(w)){let D=w.readable||w;h++,sa(D,x,d,{end:U})}else if(an(w))h++,sa(w,x,d,{end:U});else throw new zf("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=x}else if(m1(x)){if(aa(w))h++,jf($f(w),x,d,{end:U});else if(Pf(w)||an(w))h++,jf(w,x,d,{end:U});else if(pi(w))h++,jf(w.readable,x,d,{end:U});else throw new zf("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],w);w=x}else w=Kg.from(x)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&ao.nextTick(a),w}function x1(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new h1)}),t.pipe(e,{end:!1}),n){let s=function(){i=!0,e.end()};var o=s;g1(t)?ao.nextTick(s):t.once("end",s)}else r();return ca(t,{readable:!0,writable:!1},s=>{let a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),ca(e,{readable:!1,writable:!0},r)}Zg.exports={pipelineImpl:Qg,pipeline:_1}});var Vf=I((OP,oS)=>{"use strict";var{pipeline:I1}=la(),fa=kt(),{destroyer:N1}=rn(),{isNodeStream:ua,isReadable:eS,isWritable:tS,isWebStream:Hf,isTransformStream:cn,isWritableStream:rS,isReadableStream:nS}=Rt(),{AbortError:A1,codes:{ERR_INVALID_ARG_VALUE:iS,ERR_MISSING_ARGS:T1}}=Ne(),R1=Qt();oS.exports=function(...e){if(e.length===0)throw new T1("streams");if(e.length===1)return fa.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=fa.from(e[0])),typeof e[e.length-1]=="function"){let d=e.length-1;e[d]=fa.from(e[d])}for(let d=0;d<e.length;++d)if(!(!ua(e[d])&&!Hf(e[d]))){if(d<e.length-1&&!(eS(e[d])||nS(e[d])||cn(e[d])))throw new iS(`streams[${d}]`,r[d],"must be readable");if(d>0&&!(tS(e[d])||rS(e[d])||cn(e[d])))throw new iS(`streams[${d}]`,r[d],"must be writable")}let n,i,o,s,a;function c(d){let E=s;s=null,E?E(d):d?a.destroy(d):!h&&!u&&a.destroy()}let l=e[0],f=I1(e,c),u=!!(tS(l)||rS(l)||cn(l)),h=!!(eS(f)||nS(f)||cn(f));if(a=new fa({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(f!=null&&f.readableObjectMode),writable:u,readable:h}),u){if(ua(l))a._write=function(E,w,N){l.write(E,w)?N():n=N},a._final=function(E){l.end(),i=E},l.on("drain",function(){if(n){let E=n;n=null,E()}});else if(Hf(l)){let w=(cn(l)?l.writable:l).getWriter();a._write=async function(N,_,A){try{await w.ready,w.write(N).catch(()=>{}),A()}catch(T){A(T)}},a._final=async function(N){try{await w.ready,w.close().catch(()=>{}),i=N}catch(_){N(_)}}}let d=cn(f)?f.readable:f;R1(d,()=>{if(i){let E=i;i=null,E()}})}if(h){if(ua(f))f.on("readable",function(){if(o){let d=o;o=null,d()}}),f.on("end",function(){a.push(null)}),a._read=function(){for(;;){let d=f.read();if(d===null){o=a._read;return}if(!a.push(d))return}};else if(Hf(f)){let E=(cn(f)?f.readable:f).getReader();a._read=async function(){for(;;)try{let{value:w,done:N}=await E.read();if(!a.push(w))return;if(N){a.push(null);return}}catch{return}}}}return a._destroy=function(d,E){!d&&s!==null&&(d=new A1),o=null,n=null,i=null,s===null?E(d):(s=E,ua(f)&&N1(f,d))},a}});var pS=I((LP,Kf)=>{"use strict";var v1=globalThis.AbortController||ti().AbortController,{codes:{ERR_INVALID_ARG_VALUE:F1,ERR_INVALID_ARG_TYPE:co,ERR_MISSING_ARGS:k1,ERR_OUT_OF_RANGE:O1},AbortError:Ot}=Ne(),{validateAbortSignal:ln,validateInteger:sS,validateObject:fn}=ii(),L1=Y().Symbol("kWeak"),D1=Y().Symbol("kResistStopPropagation"),{finished:C1}=Qt(),M1=Vf(),{addAbortSignalNoValidate:B1}=Qi(),{isWritable:P1,isNodeStream:W1}=Rt(),{deprecate:U1}=Se(),{ArrayPrototypePush:q1,Boolean:$1,MathFloor:aS,Number:j1,NumberIsNaN:z1,Promise:cS,PromiseReject:lS,PromiseResolve:H1,PromisePrototypeThen:fS,Symbol:dS}=Y(),da=dS("kEmpty"),uS=dS("kEof");function V1(t,e){if(e!=null&&fn(e,"options"),e?.signal!=null&&ln(e.signal,"options.signal"),W1(t)&&!P1(t))throw new F1("stream",t,"must be writable");let r=M1(this,t);return e!=null&&e.signal&&B1(e.signal,r),r}function ha(t,e){if(typeof t!="function")throw new co("fn",["Function","AsyncFunction"],t);e!=null&&fn(e,"options"),e?.signal!=null&&ln(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=aS(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=aS(e.highWaterMark)),sS(r,"options.concurrency",1),sS(n,"options.highWaterMark",0),n+=r,async function*(){let o=Se().AbortSignalAny([e?.signal].filter($1)),s=this,a=[],c={signal:o},l,f,u=!1,h=0;function d(){u=!0,E()}function E(){h-=1,w()}function w(){f&&!u&&h<r&&a.length<n&&(f(),f=null)}async function N(){try{for await(let _ of s){if(u)return;if(o.aborted)throw new Ot;try{if(_=t(_,c),_===da)continue;_=H1(_)}catch(A){_=lS(A)}h+=1,fS(_,E,d),a.push(_),l&&(l(),l=null),!u&&(a.length>=n||h>=r)&&await new cS(A=>{f=A})}a.push(uS)}catch(_){let A=lS(_);fS(A,E,d),a.push(A)}finally{u=!0,l&&(l(),l=null)}}N();try{for(;;){for(;a.length>0;){let _=await a[0];if(_===uS)return;if(o.aborted)throw new Ot;_!==da&&(yield _),a.shift(),w()}await new cS(_=>{l=_})}}finally{u=!0,f&&(f(),f=null)}}.call(this)}function G1(t=void 0){return t!=null&&fn(t,"options"),t?.signal!=null&&ln(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ot({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function hS(t,e=void 0){for await(let r of Yf.call(this,t,e))return!0;return!1}async function Y1(t,e=void 0){if(typeof t!="function")throw new co("fn",["Function","AsyncFunction"],t);return!await hS.call(this,async(...r)=>!await t(...r),e)}async function K1(t,e){for await(let r of Yf.call(this,t,e))return r}async function X1(t,e){if(typeof t!="function")throw new co("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),da}for await(let n of ha.call(this,r,e));}function Yf(t,e){if(typeof t!="function")throw new co("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:da}return ha.call(this,r,e)}var Gf=class extends k1{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function J1(t,e,r){var n;if(typeof t!="function")throw new co("reducer",["Function","AsyncFunction"],t);r!=null&&fn(r,"options"),r?.signal!=null&&ln(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let l=new Ot(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await C1(this.destroy(l)),l}let o=new v1,s=o.signal;if(r!=null&&r.signal){let l={once:!0,[L1]:this,[D1]:!0};r.signal.addEventListener("abort",()=>o.abort(),l)}let a=!1;try{for await(let l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new Ot;i?e=await t(e,l,{signal:s}):(e=l,i=!0)}if(!a&&!i)throw new Gf}finally{o.abort()}return e}async function Q1(t){t!=null&&fn(t,"options"),t?.signal!=null&&ln(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ot(void 0,{cause:t.signal.reason});q1(e,n)}return e}function Z1(t,e){let r=ha.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function yS(t){if(t=j1(t),z1(t))return 0;if(t<0)throw new O1("number",">= 0",t);return t}function ek(t,e=void 0){return e!=null&&fn(e,"options"),e?.signal!=null&&ln(e.signal,"options.signal"),t=yS(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ot;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ot;t--<=0&&(yield o)}}.call(this)}function tk(t,e=void 0){return e!=null&&fn(e,"options"),e?.signal!=null&&ln(e.signal,"options.signal"),t=yS(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ot;for await(let o of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ot;if(t-- >0&&(yield o),t<=0)return}}.call(this)}Kf.exports.streamReturningOperators={asIndexedPairs:U1(G1,"readable.asIndexedPairs will be removed in a future version."),drop:ek,filter:Yf,flatMap:Z1,map:ha,take:tk,compose:V1};Kf.exports.promiseReturningOperators={every:Y1,forEach:X1,reduce:J1,toArray:Q1,some:hS,find:K1}});var Xf=I((DP,wS)=>{"use strict";var{ArrayPrototypePop:rk,Promise:nk}=Y(),{isIterable:ik,isNodeStream:ok,isWebStream:sk}=Rt(),{pipelineImpl:ak}=la(),{finished:ck}=Qt();Jf();function lk(...t){return new nk((e,r)=>{let n,i,o=t[t.length-1];if(o&&typeof o=="object"&&!ok(o)&&!ik(o)&&!sk(o)){let s=rk(t);n=s.signal,i=s.end}ak(t,(s,a)=>{s?r(s):e(a)},{signal:n,end:i})})}wS.exports={finished:ck,pipeline:lk}});var Jf=I((CP,NS)=>{var{Buffer:fk}=Ve(),{ObjectDefineProperty:tr,ObjectKeys:SS,ReflectApply:bS}=Y(),{promisify:{custom:ES}}=Se(),{streamReturningOperators:mS,promiseReturningOperators:gS}=pS(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:_S}}=Ne(),uk=Vf(),{setDefaultHighWaterMark:dk,getDefaultHighWaterMark:hk}=Zi(),{pipeline:xS}=la(),{destroyer:yk}=rn(),IS=Qt(),Qf=Xf(),lo=Rt(),H=NS.exports=Vs().Stream;H.isDestroyed=lo.isDestroyed;H.isDisturbed=lo.isDisturbed;H.isErrored=lo.isErrored;H.isReadable=lo.isReadable;H.isWritable=lo.isWritable;H.Readable=ro();for(let t of SS(mS)){let r=function(...n){if(new.target)throw _S();return H.Readable.from(bS(e,this,n))};Zf=r;let e=mS[t];tr(r,"name",{__proto__:null,value:e.name}),tr(r,"length",{__proto__:null,value:e.length}),tr(H.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Zf;for(let t of SS(gS)){let r=function(...i){if(new.target)throw _S();return bS(e,this,i)};Zf=r;let e=gS[t];tr(r,"name",{__proto__:null,value:e.name}),tr(r,"length",{__proto__:null,value:e.length}),tr(H.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Zf;H.Writable=oa();H.Duplex=kt();H.Transform=Lf();H.PassThrough=Cf();H.pipeline=xS;var{addAbortSignal:pk}=Qi();H.addAbortSignal=pk;H.finished=IS;H.destroy=yk;H.compose=uk;H.setDefaultHighWaterMark=dk;H.getDefaultHighWaterMark=hk;tr(H,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Qf}});tr(xS,ES,{__proto__:null,enumerable:!0,get(){return Qf.pipeline}});tr(IS,ES,{__proto__:null,enumerable:!0,get(){return Qf.finished}});H.Stream=H;H._isUint8Array=function(e){return e instanceof Uint8Array};H._uint8ArrayToBuffer=function(e){return fk.from(e.buffer,e.byteOffset,e.byteLength)}});var AS=I((MP,ee)=>{"use strict";var se=Jf(),wk=Xf(),mk=se.Readable.destroy;ee.exports=se.Readable;ee.exports._uint8ArrayToBuffer=se._uint8ArrayToBuffer;ee.exports._isUint8Array=se._isUint8Array;ee.exports.isDisturbed=se.isDisturbed;ee.exports.isErrored=se.isErrored;ee.exports.isReadable=se.isReadable;ee.exports.Readable=se.Readable;ee.exports.Writable=se.Writable;ee.exports.Duplex=se.Duplex;ee.exports.Transform=se.Transform;ee.exports.PassThrough=se.PassThrough;ee.exports.addAbortSignal=se.addAbortSignal;ee.exports.finished=se.finished;ee.exports.destroy=se.destroy;ee.exports.destroy=mk;ee.exports.pipeline=se.pipeline;ee.exports.compose=se.compose;Object.defineProperty(se,"promises",{configurable:!0,enumerable:!0,get(){return wk}});ee.exports.Stream=se.Stream;ee.exports.default=ee.exports});var Dt=class{constructor(e=this.onOpen,r=null,n=null){this.onOpen=e,this.notes=[],r!==null&&document.getElementById(r).addEventListener("click",this.saveCSV),n!==null&&document.getElementById(n).addEventListener("click",this.openCSV)}processArraysForCSV(e=["1|2|3","3|2|1"],r="|",n="a,b,c",i=!1){let o=n+`
`,s=0;return e.forEach((a,c)=>{e[c]==="string"&&r!==","?o+=a.split(r).join(","):csvData+=a.join(","),i===!0&&this.notes[s].idx===c&&(a+=this.notes[s].text,s++),a.indexOf(`
`)<0&&(o+=`
`)}),o}static saveCSV(e=`a,b,c
1,2,3
3,2,1
`,r=""){var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURI(e),n.target="_blank",r!==""?(r.endsWith(".csv")||(r+=".csv"),n.download=r):n.download=new Date().toISOString()+".csv",n.click()}static openCSV(e=",",r=(n,i,o)=>o){return new Promise((n,i)=>{var o=document.createElement("input");o.accept=".csv",o.type="file",o.onchange=s=>{var a=s.target.files[0],c=new FileReader;c.onload=l=>{var f=l.target.result,u=f.split(`
`);let h=[];var d=[];u.pop(),u.forEach((E,w)=>{if(w==0)h=E.split(e);else{var N=E.split(e);d.push(N)}}),r(d,h,o.value),o.value="",n({data:d,header:h,filename:o.value})},c.readAsText(a)},o.click()})}static openCSVRaw(e=(r,n)=>n){return new Promise((r,n)=>{var i=document.createElement("input");i.accept=".csv",i.type="file",i.onchange=o=>{var s=o.target.files[0],a=new FileReader;a.onload=c=>{var l=c.target.result;e(l,i.value),i.value="",r({data:l,filename:i.value})},a.readAsText(s)},i.click()})}onOpen(e=[],r=[]){console.log("CSV Opened!",r,e)}},uu=(t,e,r,n=!0,i=(o,s,a)=>{let c={filename:s},l=a;typeof a=="string"&&(l=a.split(",")),c.header=l;for(let f=0;f<o.length;f++){let u=o[f].split(",");for(let h=0;h<u.length;h++)c[l[h]]||(c[l[h]]=[]),c[l[h]].push(u[h])}return c})=>{let o;return t.includes("\r")?o=t.split(`\r
`):o=t.split(`
`),r||(r=o[0]),o.shift(),n===!1&&o.pop(),i(o,e,r)};function Si(t){t=new Date(t);var e=o=>("0"+o).slice(-2),r=o=>("00"+o).slice(-3),n=t.getTimezoneOffset(),i=n<0?"+":"-";return n=Math.abs(n),t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+"."+r(t.getMilliseconds())+"(UTC"+i+e(n/60|0)+":00)"}var Dk=(t={})=>{if(!t.data)return;Array.isArray(t.data)||(t.data=[t.data]),t.data&&!t.header&&(t.header=Object.keys(t.data[0]));let e=[...t.header];e.indexOf("timestamp")>-1&&e.splice(e.indexOf("timestamp")+1,0,"localized");let r=e.join(","),n=0,i=[],o=(c,l)=>{if(Array.isArray(c))for(let f=0;f<c.length;f++)i[f]||(i[f]=""),Array.isArray(c[f])?(i[f]+=c[f].join(",")+",",n+=c[f].length):(i[f]+=c[f]+",",n++);else if(typeof c=="object"){let f;c.x?f=c.x:c.timestamp&&(f=c.timestamp);let u=t.header;for(let h=0;h<f.length;h++){i[h]||(i[h]=f[h]+","),c.timestamp?(u.splice(u.indexOf("timestamp"),1),i[h]+=Si(c.timestamp[h])+","):c.x&&u.splice(u.indexOf("x"));let d=u.length-1;for(let E=0;E<u.length;E++){let w=u[E];Array.isArray(c[w][h])?i[h]+=c[w][h].join(",")+(E===d?"":","):i[h]+=c[w][h]+(E===d?"":",")}}}};t.data.forEach(o),r+=`
`;let s=i.join(`
`),a={filename:t.filename,header:r,body:s};return t.save&&Dt.saveCSV(r+s,t.filename),t.write&&fs.exists(t.filename,c=>{c?appendFile(t.filename,s,t.dir):appendFile(t.filename,r+s,t.dir)}),a};var ga=class{google=window.google;gapi=window.gapi;tokenClient=window.tokenClient;gapiInited=this.gapi!==void 0;gsiInited=this.google!==void 0;isLoggedIn=!1;container;userId;directory="AppData";directoryId;constructor(e,r,n,i,o){n&&(this.directory=n),e&&r&&this.initGapi(e,r,i,o)}initGapi=async(e,r,n=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest","https://www.googleapis.com/discovery/v1/apis/oauth2/v2/rest","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],i="https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar")=>new Promise(async(o,s)=>{this.gapiInited=!1,this.gsiInited=!1;let a="gapi-client-script";document.getElementById(a)&&this.deinit(),await this.loadScript(a,"https://apis.google.com/js/api.js",()=>{this.gapi=window.gapi,this.gapi.load("client",async()=>{await this.gapi.client.init({apiKey:e,discoveryDocs:n}),this.gapiInited=!0})}),await this.loadScript("gsi-client-script","https://accounts.google.com/gsi/client",()=>{this.google=window.google,this.tokenClient=this.google.accounts.oauth2.initTokenClient({client_id:r,scope:i,callback:""}),this.gsiInited=!0}),o(!0)});restoreSignIn=()=>new Promise((e,r)=>{if(!this.tokenClient){console.error("Google API not found");return}this.tokenClient.callback=async n=>{n.error!==void 0?r(n):n.access_token?(this.isLoggedIn=!0,this.directory&&!this.directoryId&&await this.checkFolder(this.directory),e(n)):(console.error("Sign-in incomplete."),r("Sign-in incomplete."))},this.gapi.client.getToken()?this.tokenClient.requestAccessToken({prompt:""}):r("User not logged in!")});handleUserSignIn=()=>new Promise((e,r)=>{if(!this.tokenClient){console.error("Google API not found");return}this.tokenClient.callback=async n=>{n.error!==void 0?r(n):n.access_token?(this.isLoggedIn=!0,this.directory&&!this.directoryId&&await this.checkFolder(this.directory),e(n)):(console.error("Sign-in incomplete."),r("Sign-in incomplete."))},this.gapi.client.getToken()===null?this.tokenClient.requestAccessToken({prompt:"consent"}):this.tokenClient.requestAccessToken({prompt:""})});async signOut(){if(this.gapi){let e=this.gapi.client.getToken();return await this.google.accounts.oauth2.revoke(e.access_token),this.gapi.client.setToken(null),!0}return!1}loadScript=(e,r,n)=>new Promise(i=>{let o=document.createElement("script");o.type="text/javascript",o.src=r,o.async=!0,o.defer=!0,o.id=e,o.onload=()=>{n(),i(!0)},document.head.appendChild(o)});deinit=()=>{this.gapi&&this.gapi.client&&(this.gapi.client=void 0),this.google=void 0,this.gapi=void 0,this.tokenClient=void 0,this.gapiInited=!1,this.gsiInited=!1,this.isLoggedIn=!1;let e=r=>{let n=document.getElementById(r);n&&document.head.removeChild(n)};e("gapi-client-script"),e("gsi-client-script")};async searchDrive(e,r=100,n=null,i,o=!1){try{let s=`name contains '${e}' and trashed=${o}`;i&&(s+=` and '${i}' in parents`);let a=await this.gapi.client.drive.files.list({q:s,pageSize:r,fields:"nextPageToken, files(id, name, mimeType)",pageToken:n});return{files:a.result.files,nextPageToken:a.result.nextPageToken}}catch(s){throw console.error("Error searching Drive:",s),s}}checkFolder=(e=this.directory,r=o=>{},n=!1,i)=>new Promise((o,s)=>{let a;n?a=`'${e}' in parents and mimeType='application/vnd.google-apps.folder'`+(i?` and '${i}' in parents`:""):(a=`name='${e}' and mimeType='application/vnd.google-apps.folder'`,i&&(a+=` and '${i}' in parents`)),this.gapi.client.drive.files.list({q:a}).then(async c=>{if(c.result.files.length===0){let l=await this.createDriveFolder(e,i);if(typeof l!="object")throw new Error(`${l}`);r&&r(l),this.directoryId||(this.directoryId=l.id),o(l)}else r&&r(c.result),this.directoryId||(this.directoryId=c.result.files[0].id),o(c.result)}).catch(c=>{console.error("Error checking folder:",c),s(c)})});createDriveFolder=(e=this.directory,r)=>new Promise((n,i)=>{if(this.isLoggedIn){let o={};o.name=e,o.mimeType="application/vnd.google-apps.folder",r&&(o.parents=[r]),this.gapi.client.drive.files.create({resource:o}).then(s=>{n(s.result)})}else console.error("Sign in with Google first!"),this.handleUserSignIn().then(async o=>{this.isLoggedIn&&n(await this.createDriveFolder(e,r))})});async listFolders(e=this.directoryId,r="parents"){try{return(await this.gapi.client.drive.files.list({q:`'${e}' in ${r} and mimeType='application/vnd.google-apps.folder'`,fields:"nextPageToken, files(id, name, mimeType)"})).result.files||[]}catch(n){throw console.error("Error listing folders:",n),n}}async getSharableLink(e){try{return(await this.gapi.client.drive.permissions.list({fileId:e,fields:"permissions(id, role, type)"})).result.permissions.find(s=>s.type==="anyone"&&s.role==="reader")||await this.gapi.client.drive.permissions.create({fileId:e,resource:{role:"reader",type:"anyone"}}),(await this.getFileMetadata(e)).webViewLink}catch(r){throw console.error("Error getting sharable link:",r),r}}async getFileMetadata(e){try{return(await this.gapi.client.drive.files.get({fileId:e,fields:"id, name, mimeType, parents, webViewLink, iconLink, thumbnailLink, size, createdTime, modifiedTime, shared, owners, permissions"})).result}catch(r){throw console.error("Error getting file metadata:",r),r}}async getFolderId(e,r="root"){try{let n=`mimeType='application/vnd.google-apps.folder' and name='${e}' ${r?`and '${r}' `:""}in parents and trashed=false`,i=await this.gapi.client.drive.files.list({q:n,fields:"files(id, name)",pageSize:1}),o=i.result.files&&i.result.files[0];return o?o.id:(console.error("Folder not found"),null)}catch(n){throw console.error("Error getting folder ID:",n),n}}async downloadFile(e,r,n){try{let i=await this.gapi.client.drive.files.get({fileId:e,alt:"media"},{responseType:"blob"}),o=new Blob([i.body],{type:r}),s=document.createElement("a");s.href=URL.createObjectURL(o),s.download=n||"downloaded_file",s.click()}catch(i){throw console.error("Error downloading file:",i),i}}async uploadFileToGoogleDrive(e=`a,b,c,1,2,3
d,e,f,4,5,6
`,r=`${new Date().toISOString()}.csv`,n="application/vnd.google-apps.spreadsheet",i=this.directoryId,o,s=!1){if(typeof e=="string"){let u=r.endsWith(".csv")?"text/csv":"text/plain";e=new Blob([e],{type:u})}let a={name:r,mimeType:n,parents:Array.isArray(i)?i:[i]},c=new FormData;c.append("metadata",new Blob([JSON.stringify(a)],{type:"application/json"})),c.append("file",e);let l=this.gapi.auth.getToken().access_token,f=new XMLHttpRequest;if(s){let u=await this.getFileMetadataByName(r,Array.isArray(i)?i[0]:i);u?f.open("PATCH",`https://www.googleapis.com/upload/drive/v3/files/${u.id}?uploadType=multipart`):f.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart")}else f.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart");return f.setRequestHeader("Authorization","Bearer "+l),o&&(f.upload.onprogress=o),new Promise((u,h)=>{f.onload=()=>{f.status===200?u(JSON.parse(f.responseText)):h(f.responseText)},f.onerror=()=>h(f.statusText),f.send(c)})}async uploadFiles(e,r=this.directoryId,n,i=!1){typeof n=="string"&&(n=document.getElementById("upload-progress")),n&&(n.style.display="block");for(let o=0;o<e.length;o++){let s=e[o];try{let a=null;if(i){let c=await this.getFileMetadataByName(s.name,r);c&&(a=c.id)}a?await this.updateFile(a,s.data,s.mimeType,c=>{let l=c.loaded/c.total*100;n?n.value=l:console.log("Upload progress: ",l)}):await this.uploadFileToGoogleDrive(s.data,s.name,s.mimeType,s.parents||r,c=>{let l=c.loaded/c.total*100;n?n.value=l:console.log("Upload progress: ",l)}),n&&(n.value=0)}catch(a){console.error("Error uploading file:",s.name,a)}}n&&(n.style.display="none")}async updateFile(e,r,n,i){if(typeof r=="string"){let l=n==="text/csv"?"text/csv":"text/plain";r=new Blob([r],{type:l})}let o={mimeType:n},s=new FormData;s.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),s.append("file",r);let a=new XMLHttpRequest;a.open("PATCH",`https://www.googleapis.com/upload/drive/v3/files/${e}?uploadType=multipart`);let c=this.gapi.auth.getToken().access_token;return a.setRequestHeader("Authorization","Bearer "+c),i&&(a.upload.onprogress=i),new Promise((l,f)=>{a.onload=()=>{a.status===200?l(JSON.parse(a.responseText)):f(a.responseText)},a.onerror=()=>f(a.statusText),a.send(s)})}async listDriveFiles(e=this.directoryId,r=100,n,i=null,o){if(this.isLoggedIn)try{let s=await this.gapi.client.drive.files.list({q:`'${e}' ${o?`and '${o}' `:""}in parents and trashed=false`,pageSize:r,fields:"nextPageToken, files(id, name, mimeType)",pageToken:i});return s.result?.files&&s.result.files.length>0&&n&&n(s.result.files),{files:s.result.files,nextPageToken:s.result.nextPageToken}}catch(s){throw console.error("Error listing Drive files:",s),s}else console.error("Sign in with Google first!"),this.handleUserSignIn().then(async()=>{if(this.isLoggedIn)return await this.listDriveFiles(e,r,n,i,o)})}deleteFile(e){this.gapi&&this.gapi.client&&this.gapi.client.drive?this.gapi.client.drive.files.delete({fileId:e}).then(r=>{console.log("File successfully deleted",r)}).catch(r=>{console.error("Error deleting file:",r)}):console.error("Google Drive API client is not initialized.")}async getFileMetadataByName(e,r=this.directoryId){try{let n=`name='${e}' and '${r}' in parents and trashed=false`,i=await this.gapi.client.drive.files.list({q:n,fields:"files(id, name, mimeType)",pageSize:1}),o=i.result.files&&i.result.files[0];return o||(console.error("File not found"),null)}catch(n){throw console.error("Error getting file metadata:",n),n}}async shareFileByName(e,r,n="reader",i={}){try{let o=await this.getFileMetadataByName(e);if(!o)throw new Error(`File named "${e}" not found`);return this.shareFile(o.id,r,n,i)}catch(o){throw console.error("Error sharing file by name:",o),o}}async shareFile(e,r,n="reader",i={}){try{let o=await this.gapi.client.drive.permissions.create({fileId:e,resource:{role:n,type:"user",emailAddress:r},...i});return console.log("File shared:",o.result),o.result}catch(o){throw console.error("Error sharing file:",o),o}}async revokeFileAccess(e,r){try{let i=(await this.gapi.client.drive.permissions.list({fileId:e})).result.permissions.find(o=>o.emailAddress===r);if(i)await this.gapi.client.drive.permissions.delete({fileId:e,permissionId:i.id}),console.log("File access revoked for:",r);else throw new Error(`No permission found for email: ${r}`)}catch(n){throw console.error("Error revoking file access:",n),n}}async createSpreadsheet(e,r,n){let i="https://sheets.googleapis.com/v4/spreadsheets",o={properties:{title:e},parents:[r]};return new Promise((s,a)=>{let c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("Authorization",`Bearer ${n}`),c.setRequestHeader("Content-Type","application/json"),c.onload=()=>{c.status===200?s(JSON.parse(c.responseText)):a(c.responseText)},c.onerror=()=>a(c.statusText),c.send(JSON.stringify(o))})}async findSpreadsheet(e,r,n){let i="https://www.googleapis.com/drive/v3/files",o=`name='${e}' and '${r}' in parents and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false`,s=`${i}?q=${encodeURIComponent(o)}`;return new Promise((a,c)=>{let l=new XMLHttpRequest;l.open("GET",s,!0),l.setRequestHeader("Authorization",`Bearer ${n}`),l.onload=()=>{if(l.status===200){let f=JSON.parse(l.responseText);a(f.files[0])}else c(l.responseText)},l.onerror=()=>c(l.statusText),l.send()})}async createTab(e,r,n){let i=`https://sheets.googleapis.com/v4/spreadsheets/${e}:batchUpdate`,o={requests:[{addSheet:{properties:{title:r}}}]};return new Promise((s,a)=>{let c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("Authorization",`Bearer ${n}`),c.setRequestHeader("Content-Type","application/json"),c.onload=()=>{c.status===200?s(JSON.parse(c.responseText)):a(c.responseText)},c.onerror=()=>a(c.statusText),c.send(JSON.stringify(o))})}async setSheetData(e,r,n,i,o="RAW",s){let a=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(r+"!"+i)}:append?valueInputOption=${o}`;return new Promise((c,l)=>{let f=new XMLHttpRequest;f.open("POST",a,!0),f.setRequestHeader("Authorization",`Bearer ${n}`),f.setRequestHeader("Content-Type","application/json"),f.onload=()=>{f.status===200?c(JSON.parse(f.responseText)):l(f.responseText)},f.onerror=()=>l(f.statusText),f.send(JSON.stringify(s))})}async appendData(e,r,n,i="RAW",o){let s=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(r)}:append?valueInputOption=${i}&insertDataOption=INSERT_ROWS`;return new Promise((a,c)=>{let l=new XMLHttpRequest;l.open("POST",s,!0),l.setRequestHeader("Authorization",`Bearer ${n}`),l.setRequestHeader("Content-Type","application/json"),l.onload=()=>{l.status===200?a(JSON.parse(l.responseText)):c(l.responseText)},l.onerror=()=>c(l.statusText),l.send(JSON.stringify(o))})}async appendToGoogleSheetOrCreateTab(e,r,n,i="RAW",o=this.directoryId){let s=this.gapi.auth.getToken().access_token,a={values:n};try{let c=await this.findSpreadsheet(e,o,s);c||(c=await this.createSpreadsheet(e,o,s));try{await this.appendData(c.id,r,s,i,a)}catch(l){if(l.includes("Unable to parse range"))await this.createTab(c.id,r,s),await this.appendData(c.id,r,s,i,a);else throw l}}catch(c){throw console.error("Error:",c),c}}async createCalendar(e){try{let r=await this.gapi.client.calendar.calendars.insert({resource:{summary:e}});return console.log("Calendar created:",r.result),r.result}catch(r){throw console.error("Error creating calendar:",r),r}}async findCalendarByName(e){try{let n=(await this.gapi.client.calendar.calendarList.list()).result.items;return n&&n.find(o=>o.summary===e)||null}catch(r){throw console.error("Error finding calendar by name:",r),r}}async findEventByName(e,r){try{let i=(await this.gapi.client.calendar.events.list({calendarId:e,q:r})).result.items;return i&&i.find(s=>s.summary===r)||null}catch(n){throw console.error("Error finding event by name:",n),n}}async listAllCalendars(){try{return(await this.gapi.client.calendar.calendarList.list()).result.items}catch(e){throw console.error("Error listing all calendars:",e),e}}async listEventsByCalendarName(e,r,n){try{let i=await this.findCalendarByName(e);if(!i)throw new Error(`Calendar named "${e}" not found`);return this.listEvents(i.id,r,n)}catch(i){throw console.error("Error listing events by calendar name:",i),i}}async listEvents(e,r,n){try{return(await this.gapi.client.calendar.events.list({calendarId:e,timeMin:r,timeMax:n,singleEvents:!0,orderBy:"startTime"})).result.items}catch(i){throw console.error("Error listing events:",i),i}}async deleteCalendarByName(e){try{let r=await this.findCalendarByName(e);if(!r)throw new Error(`Calendar named "${e}" not found`);return this.deleteCalendar(r.id)}catch(r){throw console.error("Error deleting calendar by name:",r),r}}async deleteCalendar(e){try{let r=await this.gapi.client.calendar.calendars.delete({calendarId:e});return console.log("Calendar deleted:",r),r}catch(r){throw console.error("Error deleting calendar:",r),r}}async shareCalendarByName(e,r,n="reader",i={}){try{let o=await this.findCalendarByName(e);if(!o)throw new Error(`Calendar named "${e}" not found`);return this.shareCalendar(o.id,r,n,i)}catch(o){throw console.error("Error sharing calendar by name:",o),o}}async shareCalendar(e,r,n="reader",i={}){try{let o=await this.gapi.client.calendar.acl.insert({calendarId:e,resource:{role:n,scope:{type:"user",value:r}},...i});return console.log("Calendar shared:",o.result),o.result}catch(o){throw console.error("Error sharing calendar:",o),o}}async createEventByCalendarName(e,r){try{let n=await this.findCalendarByName(e);if(!n)throw new Error(`Calendar named "${e}" not found`);return this.createEvent(n.id,r)}catch(n){throw console.error("Error creating event by calendar name:",n),n}}async createEvent(e,r){try{let n=await this.gapi.client.calendar.events.insert({calendarId:e,resource:r,sendUpdates:r.sendUpdates||"none"});return console.log("Event created:",n.result),n.result}catch(n){throw console.error("Error creating event:",n),n}}async deleteEventByCalendarAndEventNames(e,r){try{let n=await this.findCalendarByName(e);if(!n)throw new Error(`Calendar named "${e}" not found`);let i=await this.findEventByName(n.id,r);if(!i)throw new Error(`Event named "${r}" not found`);return this.deleteEvent(n.id,i.id)}catch(n){throw console.error("Error deleting event by calendar and event names:",n),n}}async deleteEvent(e,r){try{let n=await this.gapi.client.calendar.events.delete({calendarId:e,eventId:r});return console.log("Event deleted:",n),n}catch(n){throw console.error("Error deleting event:",n),n}}async createRecurringEventByCalendarName(e,r){try{let n=await this.findCalendarByName(e);if(!n)throw new Error(`Calendar named "${e}" not found`);return this.createRecurringEvent(n.id,r)}catch(n){throw console.error("Error creating recurring event by calendar name:",n),n}}async createRecurringEvent(e,r){try{let n=await this.gapi.client.calendar.events.insert({calendarId:e,resource:r});return console.log("Recurring event created:",n.result),n.result}catch(n){throw console.error("Error creating recurring event:",n),n}}async updateEventByCalendarAndEventNames(e,r,n){try{let i=await this.findCalendarByName(e);if(!i)throw new Error(`Calendar named "${e}" not found`);let o=await this.findEventByName(i.id,r);if(!o)throw new Error(`Event named "${r}" not found`);return this.updateEvent(i.id,o.id,n)}catch(i){throw console.error("Error updating event by calendar and event names:",i),i}}async updateEvent(e,r,n){try{let i=await this.gapi.client.calendar.events.update({calendarId:e,eventId:r,resource:n,sendUpdates:n.sendUpdates||"none"});return console.log("Event updated:",i.result),i.result}catch(i){throw console.error("Error updating event:",i),i}}async revokeCalendarAccess(e,r){try{let i=(await this.gapi.client.calendar.acl.list({calendarId:e})).result.items.find(o=>o.scope.value===r);if(i)await this.gapi.client.calendar.acl.delete({calendarId:e,ruleId:i.id}),console.log("Calendar access revoked for:",r);else throw new Error(`No ACL rule found for email: ${r}`)}catch(n){throw console.error("Error revoking calendar access:",n),n}}async revokeEventAttendee(e,r,n,i="none"){try{let o=await this.gapi.client.calendar.events.get({calendarId:e,eventId:r});o.attendees=o.attendees.filter(a=>a.email!==n);let s=await this.gapi.client.calendar.events.update({calendarId:e,eventId:r,resource:o,sendUpdates:i});return console.log("Event attendee revoked for:",n),s.result}catch(o){throw console.error("Error revoking event attendee:",o),o}}},du=class extends ga{previousPageToken;nextPageToken;options;overwrite=!1;currentFolderId;currentFolderMetadata;files=[];async createFileBrowser(e,r=this.directory,n=this.nextPageToken,i,o={}){if(o&&(this.options=o),typeof e=="string"&&(e=document.getElementById(e)),!e){console.error("Container element not found");return}this.container=e,e.innerHTML+=`<div id="file-browser">
            <div id="file-upload">
                <button id="upload-button">Upload Files</button>
                <input type="file" id="file-input" multiple style="display:none"/>
                <label><input type="checkbox" id="overwrite-checkbox"> Overwrite existing files</label>
            </div>
            <div id="search-bar">
                <input type="text" id="search-input" placeholder="Search files and folders"/>
                <button id="search-button">Search</button>
            </div>
            <div id="drop-zone">Drop files here to upload</div>
            <progress id="upload-progress" max="100" value="0" style="width:100%; display:none;"></progress>
            <div id="folder-path"></div>
            <div id="file-list"></div>
            <button id="previous-page" style="display:none">Previous</button>
            <button id="next-page" style="display:none">Next</button>
        </div>`;let s=e.querySelector("#overwrite-checkbox");s.checked=this.overwrite,s.addEventListener("change",()=>{this.overwrite=s.checked});let a=e.querySelector("#search-button"),c=e.querySelector("#search-input");a.addEventListener("click",()=>{this.searchFiles(c.value,e)});let l=await this.checkFolder(this.directoryId?this.directoryId:r,void 0,!!this.directoryId);this.directoryId||(this.directoryId=l.files[0].id),await this.updateFileList(this.directoryId,n,i,e),this.setupDragAndDrop(this.directoryId,n,i,e),this.setupUploadButton(this.directoryId,n,i,e),this.setupPaginationButtons(this.directoryId,i,e)}async createFileUploader(e,r=this.directoryId,n,i){if(typeof e=="string"&&(e=document.getElementById(e)),!e){console.error("Container element not found");return}e.innerHTML+=`<div id="file-upload">
            <button id="upload-button">Upload Files</button>
            <input type="file" id="file-input" multiple style="display:none"/>
            <label><input type="checkbox" id="foverwrite-checkbox"> Overwrite existing files</label>
            <button id="create-folder-button">Create Folder</button>
        </div>
        <div id="drop-zone">Drop files here to upload</div>
        <progress id="upload-progress" max="100" value="0" style="width:100%; display:none;"></progress>`;let o=e.querySelector("#foverwrite-checkbox");o.checked=this.overwrite,o.addEventListener("change",()=>{this.overwrite=o.checked}),this.setupUploadButton(r,n,i,e),this.setupDragAndDrop(r,n,i,e),this.setupCreateFolderButton(r,e)}setupCreateFolderButton(e,r){let n=r.querySelector("#create-folder-button");if(!n){console.error("Create folder button not found");return}n.addEventListener("click",async()=>{let i=prompt("Enter folder name:");if(i)try{let o=await this.createDriveFolder(i,e);console.log("Created folder:",o),this.updateFileList(e,null,void 0,r)}catch(o){console.error("Error creating folder:",o),alert("Error creating folder. Please try again.")}})}setupUploadButton(e=this.directoryId,r,n,i){let o=i.querySelector("#upload-button"),s=i.querySelector("#file-input");if(!o||!s){console.error("Upload button or file input not found");return}o.addEventListener("click",()=>{s.click()}),s.addEventListener("change",async()=>{let a=s.files;if(a.length>0){let c=Array.from(a).map(f=>({name:f.name,mimeType:f.type,data:f})),l=i.querySelector("#upload-progress");await this.uploadFiles(c,e,l,this.overwrite),this.updateFileList(e,r,n,i),s.value=""}})}setupDragAndDrop(e,r,n,i){let o=i.querySelector("#drop-zone");if(!o){console.error("Drop zone element not found");return}o.addEventListener("dragover",s=>{s.preventDefault(),s.stopPropagation(),o.classList.add("highlight")}),o.addEventListener("dragleave",s=>{s.preventDefault(),s.stopPropagation(),o.classList.remove("highlight")}),o.addEventListener("drop",async s=>{s.preventDefault(),s.stopPropagation(),o.classList.remove("highlight");let a=s.dataTransfer?.files;if(a.length>0){let c=Array.from(a).map(f=>({name:f.name,mimeType:f.type,data:f})),l=i.querySelector("#upload-progress");await this.uploadFiles(c,this.directory,l,this.overwrite),this.updateFileList(e,r,n,i)}})}async updateFileList(e=this.directory,r=null,n,i){try{let{files:o,nextPageToken:s}=await this.listDriveFiles(e,100,void 0,r,n);this.files=o,this.currentFolderMetadata=await this.getFileMetadata(e),this.renderFileList(o,e,n,i),r!==null&&(this.previousPageToken=r),this.nextPageToken=s,i.querySelector("#previous-page").style.display=this.previousPageToken?"block":"none",i.querySelector("#next-page").style.display=this.nextPageToken?"block":"none"}catch(o){console.error("Error updating file list:",o)}}async searchFiles(e,r){try{let{files:n}=await this.searchDrive(e,100,null,this.currentFolderId);this.files=n,this.renderFileList(n,this.currentFolderId,this.currentFolderId,r)}catch(n){console.error("Error searching files:",n)}}renderFileList(e,r=this.directoryId,n,i){let o=i.querySelector("#file-list"),s=i.querySelector("#folder-path");if(!o||!s){console.error("File browser elements not found");return}let a="";e.forEach((c,l)=>{let f=this.getFileTypeIcon(c);a+=`<div class="file-item" data-index="${l}">
            ${f} ${c.name} 
            <span class="share-btn" data-index="${l}">\u{1F517}</span>
            <span class="delete-btn" data-id="${c.id}">\u{1F5D1}\uFE0F</span>
          </div>`}),o.innerHTML=a,this.setupFileItemClick(n,i),this.setupDeleteFileClick(i),this.setupShareFileClick(i),r!==this.directory?(s.innerHTML='<button id="parent-folder">Go to Parent Folder</button>',i.querySelector("#parent-folder").addEventListener("click",()=>{this.goBackToParentFolder(i)})):s.innerHTML=""}setupShareFileClick(e){e.querySelectorAll(".share-btn").forEach(n=>{n.addEventListener("click",async i=>{i.stopPropagation();let o=parseInt(n.getAttribute("data-index")),s=this.files[o];try{let a=await this.getSharableLink(s.id);alert(`Sharable link for ${s.name}: ${a}`)}catch(a){console.error("Error generating sharable link:",a),alert("Error generating sharable link. Please try again.")}})})}setupDeleteFileClick(e){let r=e.querySelectorAll(".delete-btn");r.forEach(n=>{n.addEventListener("click",i=>{i.stopPropagation();let o=n.getAttribute("data-id");n.isConfirming?(this.deleteFile(o),n.closest(".file-item").remove()):(n.textContent="\u274C?",n.isConfirming=!0)})}),document.addEventListener("click",()=>{r.forEach(n=>{n.textContent="\u{1F5D1}\uFE0F",n.isConfirming=!1})},{once:!0})}getFileTypeIcon(e){return e?.thumbnailLink?`<img src="${e.thumbnailLink}" alt="${e.name}" class="file-icon" />`:e?.iconLink?`<img src="${e?.iconLink}" alt="${e.name}" class="file-icon" />`:e?.mimeType==="application/vnd.google-apps.folder"?"\u{1F4C1}":e?.mimeType.startsWith("image/")?"\u{1F5BC}\uFE0F":e?.mimeType==="text/csv"||e.mimeType==="application/vnd.ms-excel"?"\u{1F4CA}":"\u{1F4C4}"}setupFileItemClick(e,r){r.querySelectorAll(".file-item").forEach(i=>{i.addEventListener("click",async()=>{let o=parseInt(i.getAttribute("data-index")),s=this.files[o];if(s.mimeType==="application/vnd.google-apps.folder")this.updateFileList(s.id,null,e,r),this.currentFolderId=s.id;else if(this.options.onFileClick)this.options.onFileClick(s);else{let a=await this.downloadFile(s.id,s.mimeType,s.name);console.log("Downloaded file:",s.name,a)}})})}setupPaginationButtons(e,r,n){n.querySelector("#previous-page").addEventListener("click",()=>{this.previousPageToken!==null&&(this.updateFileList(e,this.previousPageToken,r,n),this.previousPageToken=void 0)}),n.querySelector("#next-page").addEventListener("click",()=>{this.nextPageToken&&this.updateFileList(e,this.nextPageToken,r,n)})}async goBackToParentFolder(e){try{if(this.currentFolderMetadata&&this.currentFolderMetadata.parents&&this.currentFolderMetadata.parents.length>0){let r=this.currentFolderMetadata.parents[0];if(this.currentFolderId===this.directoryId){console.log("Reached the main directory.");return}this.currentFolderId=r,await this.updateFileList(r,null,void 0,e)}else console.error("This folder does not have a parent.")}catch(r){console.error("Error going back to parent folder:",r)}}};var y;(function(t){t[t.EPERM=1]="EPERM",t[t.ENOENT=2]="ENOENT",t[t.EINTR=4]="EINTR",t[t.EIO=5]="EIO",t[t.ENXIO=6]="ENXIO",t[t.EBADF=9]="EBADF",t[t.EAGAIN=11]="EAGAIN",t[t.ENOMEM=12]="ENOMEM",t[t.EACCES=13]="EACCES",t[t.EFAULT=14]="EFAULT",t[t.ENOTBLK=15]="ENOTBLK",t[t.EBUSY=16]="EBUSY",t[t.EEXIST=17]="EEXIST",t[t.EXDEV=18]="EXDEV",t[t.ENODEV=19]="ENODEV",t[t.ENOTDIR=20]="ENOTDIR",t[t.EISDIR=21]="EISDIR",t[t.EINVAL=22]="EINVAL",t[t.ENFILE=23]="ENFILE",t[t.EMFILE=24]="EMFILE",t[t.ETXTBSY=26]="ETXTBSY",t[t.EFBIG=27]="EFBIG",t[t.ENOSPC=28]="ENOSPC",t[t.ESPIPE=29]="ESPIPE",t[t.EROFS=30]="EROFS",t[t.EMLINK=31]="EMLINK",t[t.EPIPE=32]="EPIPE",t[t.EDOM=33]="EDOM",t[t.ERANGE=34]="ERANGE",t[t.EDEADLK=35]="EDEADLK",t[t.ENAMETOOLONG=36]="ENAMETOOLONG",t[t.ENOLCK=37]="ENOLCK",t[t.ENOSYS=38]="ENOSYS",t[t.ENOTEMPTY=39]="ENOTEMPTY",t[t.ELOOP=40]="ELOOP",t[t.ENOMSG=42]="ENOMSG",t[t.EBADE=52]="EBADE",t[t.EBADR=53]="EBADR",t[t.EXFULL=54]="EXFULL",t[t.ENOANO=55]="ENOANO",t[t.EBADRQC=56]="EBADRQC",t[t.ENOSTR=60]="ENOSTR",t[t.ENODATA=61]="ENODATA",t[t.ETIME=62]="ETIME",t[t.ENOSR=63]="ENOSR",t[t.ENONET=64]="ENONET",t[t.EREMOTE=66]="EREMOTE",t[t.ENOLINK=67]="ENOLINK",t[t.ECOMM=70]="ECOMM",t[t.EPROTO=71]="EPROTO",t[t.EBADMSG=74]="EBADMSG",t[t.EOVERFLOW=75]="EOVERFLOW",t[t.EBADFD=77]="EBADFD",t[t.ESTRPIPE=86]="ESTRPIPE",t[t.ENOTSOCK=88]="ENOTSOCK",t[t.EDESTADDRREQ=89]="EDESTADDRREQ",t[t.EMSGSIZE=90]="EMSGSIZE",t[t.EPROTOTYPE=91]="EPROTOTYPE",t[t.ENOPROTOOPT=92]="ENOPROTOOPT",t[t.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",t[t.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",t[t.ENOTSUP=95]="ENOTSUP",t[t.ENETDOWN=100]="ENETDOWN",t[t.ENETUNREACH=101]="ENETUNREACH",t[t.ENETRESET=102]="ENETRESET",t[t.ETIMEDOUT=110]="ETIMEDOUT",t[t.ECONNREFUSED=111]="ECONNREFUSED",t[t.EHOSTDOWN=112]="EHOSTDOWN",t[t.EHOSTUNREACH=113]="EHOSTUNREACH",t[t.EALREADY=114]="EALREADY",t[t.EINPROGRESS=115]="EINPROGRESS",t[t.ESTALE=116]="ESTALE",t[t.EREMOTEIO=121]="EREMOTEIO",t[t.EDQUOT=122]="EDQUOT"})(y||(y={}));var hu={[y.EPERM]:"Operation not permitted",[y.ENOENT]:"No such file or directory",[y.EINTR]:"Interrupted system call",[y.EIO]:"Input/output error",[y.ENXIO]:"No such device or address",[y.EBADF]:"Bad file descriptor",[y.EAGAIN]:"Resource temporarily unavailable",[y.ENOMEM]:"Cannot allocate memory",[y.EACCES]:"Permission denied",[y.EFAULT]:"Bad address",[y.ENOTBLK]:"Block device required",[y.EBUSY]:"Resource busy or locked",[y.EEXIST]:"File exists",[y.EXDEV]:"Invalid cross-device link",[y.ENODEV]:"No such device",[y.ENOTDIR]:"File is not a directory",[y.EISDIR]:"File is a directory",[y.EINVAL]:"Invalid argument",[y.ENFILE]:"Too many open files in system",[y.EMFILE]:"Too many open files",[y.ETXTBSY]:"Text file busy",[y.EFBIG]:"File is too big",[y.ENOSPC]:"No space left on disk",[y.ESPIPE]:"Illegal seek",[y.EROFS]:"Cannot modify a read-only file system",[y.EMLINK]:"Too many links",[y.EPIPE]:"Broken pipe",[y.EDOM]:"Numerical argument out of domain",[y.ERANGE]:"Numerical result out of range",[y.EDEADLK]:"Resource deadlock would occur",[y.ENAMETOOLONG]:"File name too long",[y.ENOLCK]:"No locks available",[y.ENOSYS]:"Function not implemented",[y.ENOTEMPTY]:"Directory is not empty",[y.ELOOP]:"Too many levels of symbolic links",[y.ENOMSG]:"No message of desired type",[y.EBADE]:"Invalid exchange",[y.EBADR]:"Invalid request descriptor",[y.EXFULL]:"Exchange full",[y.ENOANO]:"No anode",[y.EBADRQC]:"Invalid request code",[y.ENOSTR]:"Device not a stream",[y.ENODATA]:"No data available",[y.ETIME]:"Timer expired",[y.ENOSR]:"Out of streams resources",[y.ENONET]:"Machine is not on the network",[y.EREMOTE]:"Object is remote",[y.ENOLINK]:"Link has been severed",[y.ECOMM]:"Communication error on send",[y.EPROTO]:"Protocol error",[y.EBADMSG]:"Bad message",[y.EOVERFLOW]:"Value too large for defined data type",[y.EBADFD]:"File descriptor in bad state",[y.ESTRPIPE]:"Streams pipe error",[y.ENOTSOCK]:"Socket operation on non-socket",[y.EDESTADDRREQ]:"Destination address required",[y.EMSGSIZE]:"Message too long",[y.EPROTOTYPE]:"Protocol wrong type for socket",[y.ENOPROTOOPT]:"Protocol not available",[y.EPROTONOSUPPORT]:"Protocol not supported",[y.ESOCKTNOSUPPORT]:"Socket type not supported",[y.ENOTSUP]:"Operation is not supported",[y.ENETDOWN]:"Network is down",[y.ENETUNREACH]:"Network is unreachable",[y.ENETRESET]:"Network dropped connection on reset",[y.ETIMEDOUT]:"Connection timed out",[y.ECONNREFUSED]:"Connection refused",[y.EHOSTDOWN]:"Host is down",[y.EHOSTUNREACH]:"No route to host",[y.EALREADY]:"Operation already in progress",[y.EINPROGRESS]:"Operation now in progress",[y.ESTALE]:"Stale file handle",[y.EREMOTEIO]:"Remote I/O error",[y.EDQUOT]:"Disk quota exceeded"},p=class t extends Error{static fromJSON(e){let r=new t(e.errno,e.message,e.path,e.syscall);return r.code=e.code,r.stack=e.stack,r}static With(e,r,n){return new t(y[e],hu[y[e]],r,n)}constructor(e,r=hu[e],n,i=""){super(r),this.errno=e,this.path=n,this.syscall=i,this.code=y[e],this.message=`${this.code}: ${r}${this.path?`, '${this.path}'`:""}`}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}};var bi={};fu(bi,{COPYFILE_EXCL:()=>po,COPYFILE_FICLONE:()=>GS,COPYFILE_FICLONE_FORCE:()=>YS,F_OK:()=>yo,O_APPEND:()=>yn,O_CREAT:()=>st,O_DIRECT:()=>tb,O_DIRECTORY:()=>XS,O_DSYNC:()=>ZS,O_EXCL:()=>dn,O_NOATIME:()=>JS,O_NOCTTY:()=>KS,O_NOFOLLOW:()=>QS,O_NONBLOCK:()=>rb,O_RDONLY:()=>wo,O_RDWR:()=>nr,O_SYMLINK:()=>eb,O_SYNC:()=>mo,O_TRUNC:()=>hn,O_WRONLY:()=>un,R_OK:()=>Ct,S_IFBLK:()=>Tr,S_IFCHR:()=>Rr,S_IFDIR:()=>Me,S_IFIFO:()=>vr,S_IFLNK:()=>ir,S_IFMT:()=>ae,S_IFREG:()=>Ce,S_IFSOCK:()=>Ar,S_IRGRP:()=>lb,S_IROTH:()=>db,S_IRUSR:()=>sb,S_IRWXG:()=>ba,S_IRWXO:()=>Ea,S_IRWXU:()=>Sa,S_ISGID:()=>ib,S_ISUID:()=>nb,S_ISVTX:()=>ob,S_IWGRP:()=>fb,S_IWOTH:()=>hb,S_IWUSR:()=>ab,S_IXGRP:()=>ub,S_IXOTH:()=>yb,S_IXUSR:()=>cb,UV_FS_O_FILEMAP:()=>pb,W_OK:()=>De,X_OK:()=>VS});var yo=0,Ct=4,De=2,VS=1,po=1,GS=2,YS=4,wo=0,un=1,nr=2,st=64,dn=128,KS=256,hn=512,yn=1024,XS=65536,JS=262144,QS=131072,mo=1052672,ZS=4096,eb=32768,tb=16384,rb=2048,ae=61440,Ar=49152,ir=40960,Ce=32768,Tr=24576,Me=16384,Rr=8192,vr=4096,nb=2048,ib=1024,ob=512,Sa=448,sb=256,ab=128,cb=64,ba=56,lb=32,fb=16,ub=8,Ea=7,db=4,hb=2,yb=1,pb=0;var go=class{_convert(e){return this._isBigint?BigInt(e):Number(e)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}get atime(){return new Date(Number(this.atimeMs))}set atime(e){this.atimeMs=this._convert(e.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(e){this.mtimeMs=this._convert(e.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(e){this.ctimeMs=this._convert(e.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(e){this.birthtimeMs=this._convert(e.getTime())}constructor({atimeMs:e,mtimeMs:r,ctimeMs:n,birthtimeMs:i,uid:o,gid:s,size:a,mode:c,ino:l}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);let f=Date.now();this.atimeMs=this._convert(e??f),this.mtimeMs=this._convert(r??f),this.ctimeMs=this._convert(n??f),this.birthtimeMs=this._convert(i??f),this.uid=this._convert(o??0),this.gid=this._convert(s??0),this.size=this._convert(a??0),this.ino=this._convert(l??0),this.mode=this._convert(c??0),this.mode&61440||(this.mode=this.mode|this._convert(32768))}isFile(){return(this.mode&61440)===32768}isDirectory(){return(this.mode&61440)===16384}isSymbolicLink(){return(this.mode&61440)===40960}isSocket(){return(this.mode&61440)===49152}isBlockDevice(){return(this.mode&61440)===24576}isCharacterDevice(){return(this.mode&61440)===8192}isFIFO(){return(this.mode&61440)===4096}hasAccess(e,r){if(r.euid===0||r.egid===0)return!0;let n=(r.uid==this.uid?448:0)|(r.gid==this.gid?56:0)|7;return(e&this.mode&n)==e}cred(e=Number(this.uid),r=Number(this.gid)){return{uid:e,gid:r,suid:Number(this.uid),sgid:Number(this.gid),euid:e,egid:r}}chmod(e){this.mode=this._convert(this.mode&61440|e)}chown(e,r){e=Number(e),r=Number(r),!isNaN(e)&&0<=e&&e<2**32&&(this.uid=this._convert(e)),!isNaN(r)&&0<=r&&r<2**32&&(this.gid=this._convert(r))}get atimeNs(){return BigInt(this.atimeMs)*1000n}get mtimeNs(){return BigInt(this.mtimeMs)*1000n}get ctimeNs(){return BigInt(this.ctimeMs)*1000n}get birthtimeNs(){return BigInt(this.birthtimeMs)*1000n}},Fe=class extends go{constructor(){super(...arguments),this._isBigint=!1}},Mt=class extends go{constructor(){super(...arguments),this._isBigint=!0}},yu=525687744115;var Fr=2**32-1,Pt=0n;function pu(){return Math.round(Math.random()*2**32).toString(16)}function So(){return BigInt("0x"+pu()+pu())}var q;(function(t){t[t.ino=0]="ino",t[t.size=8]="size",t[t.mode=12]="mode",t[t.nlink=14]="nlink",t[t.uid=18]="uid",t[t.gid=22]="gid",t[t.atime=26]="atime",t[t.birthtime=34]="birthtime",t[t.mtime=42]="mtime",t[t.ctime=50]="ctime",t[t.end=58]="end"})(q||(q={}));var Bt=class{get data(){return new Uint8Array(this.buffer)}constructor(e){let r=!e;if(e??(e=new ArrayBuffer(q.end)),e?.byteLength<q.end)throw new RangeError(`Can not create an inode from a buffer less than ${q.end} bytes`);if(this.view=new DataView(e),this.buffer=e,!r)return;this.ino=So(),this.nlink=1,this.size=4096;let n=Date.now();this.atimeMs=n,this.mtimeMs=n,this.ctimeMs=n,this.birthtimeMs=n}get ino(){return this.view.getBigUint64(q.ino,!0)}set ino(e){this.view.setBigUint64(q.ino,e,!0)}get size(){return this.view.getUint32(q.size,!0)}set size(e){this.view.setUint32(q.size,e,!0)}get mode(){return this.view.getUint16(q.mode,!0)}set mode(e){this.view.setUint16(q.mode,e,!0)}get nlink(){return this.view.getUint32(q.nlink,!0)}set nlink(e){this.view.setUint32(q.nlink,e,!0)}get uid(){return this.view.getUint32(q.uid,!0)}set uid(e){this.view.setUint32(q.uid,e,!0)}get gid(){return this.view.getUint32(q.gid,!0)}set gid(e){this.view.setUint32(q.gid,e,!0)}get atimeMs(){return this.view.getFloat64(q.atime,!0)}set atimeMs(e){this.view.setFloat64(q.atime,e,!0)}get birthtimeMs(){return this.view.getFloat64(q.birthtime,!0)}set birthtimeMs(e){this.view.setFloat64(q.birthtime,e,!0)}get mtimeMs(){return this.view.getFloat64(q.mtime,!0)}set mtimeMs(e){this.view.setFloat64(q.mtime,e,!0)}get ctimeMs(){return this.view.getFloat64(q.ctime,!0)}set ctimeMs(e){this.view.setFloat64(q.ctime,e,!0)}toStats(){return new Fe(this)}update(e){let r=!1;return this.size!==e.size&&(this.size=e.size,r=!0),this.mode!==e.mode&&(this.mode=e.mode,r=!0),this.nlink!==e.nlink&&(this.nlink=e.nlink,r=!0),this.uid!==e.uid&&(this.uid=e.uid,r=!0),this.uid!==e.uid&&(this.uid=e.uid,r=!0),this.atimeMs!==e.atimeMs&&(this.atimeMs=e.atimeMs,r=!0),this.mtimeMs!==e.mtimeMs&&(this.mtimeMs=e.mtimeMs,r=!0),this.ctimeMs!==e.ctimeMs&&(this.ctimeMs=e.ctimeMs,r=!0),r}};Promise.withResolvers??(Promise.withResolvers=function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}});Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose"));Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));var wb=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];function Be(t){if(typeof t=="number")return mb(t);if(!wb.includes(t))throw new Error("Invalid flag string: "+t);return t}function mb(t){switch(t){case 0:return"r";case 1052672:return"rs";case 2:return"r+";case 1052674:return"rs+";case 577:return"w";case 705:return"wx";case 578:return"w+";case 706:return"wx+";case 1089:return"a";case 1217:return"ax";case 1090:return"a+";case 1218:return"ax+";default:throw new Error("Invalid flag number: "+t)}}function wn(t){let e=0;return e<<=1,e+=+pn(t),e<<=1,e+=+Xe(t),e<<=1,e}function pn(t){return t.indexOf("r")!==-1||t.indexOf("+")!==-1}function Xe(t){return t.indexOf("w")!==-1||t.indexOf("a")!==-1||t.indexOf("+")!==-1}function bo(t){return t.indexOf("w")!==-1}function kr(t){return t.indexOf("a")!==-1}function Eo(t){return t.indexOf("x")!==-1}var Ei=class{[Symbol.asyncDispose](){return this.close()}[Symbol.dispose](){return this.closeSync()}datasync(){return this.sync()}datasyncSync(){return this.syncSync()}},at=class extends Ei{constructor(e,r,n,i,o=new Uint8Array(new ArrayBuffer(0,e.metadata().noResizableBuffers?{}:{maxByteLength:Fr}))){if(super(),this.fs=e,this.path=r,this.flag=n,this.stats=i,this._buffer=o,this._position=0,this.dirty=!1,this.stats.size!=o.byteLength){if(pn(this.flag))throw new Error(`Size mismatch: buffer length ${o.byteLength}, stats size ${this.stats.size}`);this.dirty=!0}}get buffer(){return this._buffer}get position(){return kr(this.flag)?this.stats.size:this._position}set position(e){this._position=e}async sync(){this.dirty&&(await this.fs.sync(this.path,this._buffer,this.stats),this.dirty=!1)}syncSync(){this.dirty&&(this.fs.syncSync(this.path,this._buffer,this.stats),this.dirty=!1)}async close(){await this.sync()}closeSync(){this.syncSync()}async stat(){return new Fe(this.stats)}statSync(){return new Fe(this.stats)}_truncate(e){if(this.dirty=!0,!Xe(this.flag))throw new p(y.EPERM,"File not opened with a writeable mode.");if(this.stats.mtimeMs=Date.now(),e>this._buffer.length){let r=new Uint8Array(e-this._buffer.length);this.writeSync(r,0,r.length,this._buffer.length);return}this.stats.size=e,this._buffer=this._buffer.slice(0,e)}async truncate(e){this._truncate(e),await this.sync()}truncateSync(e){this._truncate(e),this.syncSync()}_write(e,r=0,n=this.stats.size,i=this.position){if(this.dirty=!0,!Xe(this.flag))throw new p(y.EPERM,"File not opened with a writeable mode.");let o=i+n;if(o>this.stats.size&&(this.stats.size=o,o>this._buffer.byteLength))if(this._buffer.buffer.resizable&&this._buffer.buffer.maxByteLength<=o)this._buffer.buffer.resize(o);else{let a=new Uint8Array(new ArrayBuffer(o,this.fs.metadata().noResizableBuffers?{}:{maxByteLength:Fr}));a.set(this._buffer),this._buffer=a}let s=e.slice(r,r+n);return this._buffer.set(s,i),this.stats.mtimeMs=Date.now(),this.position=i+s.byteLength,s.byteLength}async write(e,r,n,i){let o=this._write(e,r,n,i);return await this.sync(),o}writeSync(e,r=0,n=this.stats.size,i=this.position){let o=this._write(e,r,n,i);return this.syncSync(),o}_read(e,r=0,n=this.stats.size,i){if(!pn(this.flag))throw new p(y.EPERM,"File not opened with a readable mode.");this.dirty=!0,i??(i=this.position);let o=i+n;o>this.stats.size&&(o=i+Math.max(this.stats.size-i,0)),this.stats.atimeMs=Date.now(),this._position=o;let s=o-i;return s==0||new Uint8Array(e.buffer,r,n).set(this._buffer.slice(i,o)),s}async read(e,r,n,i){let o=this._read(e,r,n,i);return await this.sync(),{bytesRead:o,buffer:e}}readSync(e,r,n,i){let o=this._read(e,r,n,i);return this.statSync(),o}async chmod(e){this.dirty=!0,this.stats.chmod(e),await this.sync()}chmodSync(e){this.dirty=!0,this.stats.chmod(e),this.syncSync()}async chown(e,r){this.dirty=!0,this.stats.chown(e,r),await this.sync()}chownSync(e,r){this.dirty=!0,this.stats.chown(e,r),this.syncSync()}async utimes(e,r){this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,await this.sync()}utimesSync(e,r){this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,this.syncSync()}async _setType(e){this.dirty=!0,this.stats.mode=this.stats.mode&-61441|e,await this.sync()}_setTypeSync(e){this.dirty=!0,this.stats.mode=this.stats.mode&-61441|e,this.syncSync()}},_i=class extends at{constructor(e,r,n,i,o){super(e,r,n,i,o)}async sync(){}syncSync(){}async close(){}closeSync(){}};var or={uid:0,gid:0,suid:0,sgid:0,euid:0,egid:0};var gb="/";function wu(t,e){let r="",n=0,i=-1,o=0,s="\0";for(let a=0;a<=t.length;++a){if(a<t.length)s=t[a];else{if(s=="/")break;s="/"}if(s=="/"){if(!(i===a-1||o===1))if(o===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){let c=r.lastIndexOf("/");c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=a,o=0;continue}else if(r.length!==0){r="",n=0,i=a,o=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,a):r=t.slice(i+1,a),n=a-i-1;i=a,o=0}else s==="."&&o!==-1?++o:o=-1}return r}function sr(...t){let e="";for(let n of[...t.reverse(),gb])if(n.length&&(e=`${n}/${e}`,n.startsWith("/")))break;let r=e.startsWith("/");return e=wu(e,!r),r?`/${e}`:e.length?e:"/"}function Sb(t){if(!t.length)return".";let e=t.startsWith("/"),r=t.endsWith("/");return t=wu(t,!e),t.length?(r&&(t+="/"),e?`/${t}`:t):e?"/":r?"./":"."}function pe(...t){if(!t.length)return".";let e=t.join("/");return e?.length?Sb(e):"."}function C(t){if(t.length===0)return".";let e=t[0]==="/",r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t[i]==="/"){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)}function X(t,e){let r=0,n=-1,i=!0;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let o=e.length-1,s=-1;for(let a=t.length-1;a>=0;--a)if(t[a]==="/"){if(!i){r=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(t[a]===e[o]?--o===-1&&(n=a):(o=-1,n=s));return r===n?n=s:n===-1&&(n=t.length),t.slice(r,n)}for(let o=t.length-1;o>=0;--o)if(t[o]==="/"){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)}function _o(t){let e=t.startsWith("/"),r={root:e?"/":"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;let n=e?1:0,i=-1,o=0,s=-1,a=!0,c=t.length-1,l=0;for(;c>=n;--c){if(t[c]==="/"){if(!a){o=c+1;break}continue}s===-1&&(a=!1,s=c+1),t[c]==="."?i===-1?i=c:l!==1&&(l=1):i!==-1&&(l=-1)}if(s!==-1){let f=o===0&&e?1:o;i===-1||l===0||l===1&&i===s-1&&i===o+1?r.base=r.name=t.slice(f,s):(r.name=t.slice(f,i),r.base=t.slice(f,s),r.ext=t.slice(i,s))}return o>0?r.dir=t.slice(0,o-1):e&&(r.dir="/"),r}var mu=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},bb=function(t){return function(e){function r(i){e.error=e.hasError?new t(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function n(){for(;e.stack.length;){var i=e.stack.pop();try{var o=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(o).then(n,function(s){return r(s),n()})}catch(s){r(s)}}if(e.hasError)throw e.error}return n()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),ke=class{metadata(){return{name:this.constructor.name.toLowerCase(),readonly:!1,totalSpace:0,freeSpace:0,noResizableBuffers:!1,noAsyncCache:this._disableSync??!1,type:yu}}constructor(...e){}async ready(){}async exists(e,r){try{return await this.stat(e,r),!0}catch(n){return n.code!="ENOENT"}}existsSync(e,r){try{return this.statSync(e,r),!0}catch(n){return n.code!="ENOENT"}}};function gu(t){class e extends t{constructor(){super(...arguments),this._queue=[],this._isInitialized=!1}get _queueRunning(){return!!this._queue.length}queueDone(){return new Promise(n=>{let i=()=>this._queueRunning?setTimeout(i):n();i()})}async ready(){if(await super.ready(),!(this._isInitialized||this._disableSync)){this.checkSync(),await this._sync.ready();try{await this.crossCopy("/"),this._isInitialized=!0}catch(n){throw this._isInitialized=!1,n}}}checkSync(n,i){if(this._disableSync)throw new p(y.ENOTSUP,"Sync caching has been disabled for this async file system",n,i);if(!this._sync)throw new p(y.ENOTSUP,"No sync cache is attached to this async file system",n,i)}renameSync(n,i,o){this.checkSync(n,"rename"),this._sync.renameSync(n,i,o),this.queue("rename",n,i,o)}statSync(n,i){return this.checkSync(n,"stat"),this._sync.statSync(n,i)}createFileSync(n,i,o,s){return this.checkSync(n,"createFile"),this._sync.createFileSync(n,i,o,s),this.queue("createFile",n,i,o,s),this.openFileSync(n,i,s)}openFileSync(n,i,o){this.checkSync(n,"openFile");let s=this._sync.openFileSync(n,i,o),a=s.statSync(),c=new Uint8Array(a.size);return s.readSync(c),new at(this,n,i,a,c)}unlinkSync(n,i){this.checkSync(n,"unlinkSync"),this._sync.unlinkSync(n,i),this.queue("unlink",n,i)}rmdirSync(n,i){this.checkSync(n,"rmdir"),this._sync.rmdirSync(n,i),this.queue("rmdir",n,i)}mkdirSync(n,i,o){this.checkSync(n,"mkdir"),this._sync.mkdirSync(n,i,o),this.queue("mkdir",n,i,o)}readdirSync(n,i){return this.checkSync(n,"readdir"),this._sync.readdirSync(n,i)}linkSync(n,i,o){this.checkSync(n,"link"),this._sync.linkSync(n,i,o),this.queue("link",n,i,o)}syncSync(n,i,o){this.checkSync(n,"sync"),this._sync.syncSync(n,i,o),this.queue("sync",n,i,o)}existsSync(n,i){return this.checkSync(n,"exists"),this._sync.existsSync(n,i)}async crossCopy(n){this.checkSync(n,"crossCopy");let i=await this.stat(n,or);if(i.isDirectory()){if(n!=="/"){let s=await this.stat(n,or);this._sync.mkdirSync(n,s.mode,s.cred())}let o=await this.readdir(n,or);for(let s of o)await this.crossCopy(pe(n,s))}else{let o={stack:[],error:void 0,hasError:!1};try{let s=mu(o,await this.openFile(n,Be("r"),or),!0),a=mu(o,this._sync.createFileSync(n,Be("w"),i.mode,i.cred()),!1),c=new Uint8Array(i.size);await s.read(c),a.writeSync(c,0,i.size)}catch(s){o.error=s,o.hasError=!0}finally{let s=bb(o);s&&await s}}}async _next(){if(!this._queueRunning)return;let[n,...i]=this._queue.shift();await this[n](...i),await this._next()}queue(...n){this._queue.push(n),this._next()}}return e}function Su(t){class e extends t{metadata(){return{...super.metadata(),readonly:!0}}async rename(n,i,o){throw new p(y.EROFS)}renameSync(n,i,o){throw new p(y.EROFS)}async createFile(n,i,o,s){throw new p(y.EROFS)}createFileSync(n,i,o,s){throw new p(y.EROFS)}async unlink(n,i){throw new p(y.EROFS)}unlinkSync(n,i){throw new p(y.EROFS)}async rmdir(n,i){throw new p(y.EROFS)}rmdirSync(n,i){throw new p(y.EROFS)}async mkdir(n,i,o){throw new p(y.EROFS)}mkdirSync(n,i,o){throw new p(y.EROFS)}async link(n,i,o){throw new p(y.EROFS)}linkSync(n,i,o){throw new p(y.EROFS)}async sync(n,i,o){throw new p(y.EROFS)}syncSync(n,i,o){throw new p(y.EROFS)}}return e}function xo(t,e,r,n,i){return Math.min(t+1,e+1,r+1,n===i?e:e+1)}function bu(t,e){if(t===e)return 0;t.length>e.length&&([t,e]=[e,t]);let r=t.length,n=e.length;for(;r>0&&t.charCodeAt(r-1)===e.charCodeAt(n-1);)r--,n--;let i=0;for(;i<r&&t.charCodeAt(i)===e.charCodeAt(i);)i++;if(r-=i,n-=i,r===0||n===1)return n;let o=new Array(r<<1);for(let h=0;h<r;)o[r+h]=t.charCodeAt(i+h),o[h]=++h;let s,a,c,l,f;for(s=0;s+3<n;){let h=e.charCodeAt(i+(a=s)),d=e.charCodeAt(i+(c=s+1)),E=e.charCodeAt(i+(l=s+2)),w=e.charCodeAt(i+(f=s+3)),N=s+=4;for(let _=0;_<r;){let A=o[r+_],T=o[_];a=xo(T,a,c,h,A),c=xo(a,c,l,d,A),l=xo(c,l,f,E,A),N=xo(l,f,N,w,A),o[_++]=N,f=l,l=c,c=a,a=T}}let u=0;for(;s<n;){let h=e.charCodeAt(i+(a=s));u=++s;for(let d=0;d<r;d++){let E=o[d];o[d]=u=E<a||u<a?E>u?u+1:E+1:h===o[r+d]?a:a+1,a=E}}return u}var oO=typeof globalThis.setImmediate=="function"?globalThis.setImmediate:t=>setTimeout(t,0);function Wt(t){if(typeof t!="string")throw new p(y.EINVAL,"Can not encode a non-string");return new Uint8Array(Array.from(t).map(e=>e.charCodeAt(0)))}function Io(t){if(!(t instanceof Uint8Array))throw new p(y.EINVAL,"Can not decode a non-Uint8Array");return Array.from(t).map(e=>String.fromCharCode(e)).join("")}function _a(t){return JSON.parse(Io(t),(e,r)=>e==""?r:BigInt(r))}function Je(t){return Wt(JSON.stringify(t,(e,r)=>e==""?r:r.toString()))}function ar(t,e){if(typeof t=="number")return t;if(typeof t=="string"){let r=parseInt(t,8);if(!isNaN(r))return r}if(typeof e=="number")return e;throw new p(y.EINVAL,"Invalid mode: "+t?.toString())}function No(t){if(t instanceof Date)return t;if(typeof t=="number")return new Date(t*1e3);if(typeof t=="string")return new Date(t);throw new p(y.EINVAL,"Invalid time.")}function M(t){if(t=t.toString(),t.includes("\0"))throw new p(y.EINVAL,"Path can not contain null character");if(t.length==0)throw new p(y.EINVAL,"Path can not be empty");return sr(t.replaceAll(/[/\\]+/g,"/"))}function cr(t,e="utf8",r,n=0){return typeof t!="object"||t===null?{encoding:typeof t=="string"?t:e??null,flag:r,mode:n}:{encoding:typeof t?.encoding=="string"?t.encoding:e??null,flag:typeof t?.flag=="string"?t.flag:r,mode:ar("mode"in t?t?.mode:null,n)}}var Eu=5,Ao=class extends ke{async ready(){this._initialized||(await this.checkRoot(),this._initialized=!0)}constructor(e){super(),this.store=e,this._initialized=!1}metadata(){return{...super.metadata(),name:this.store.name}}async empty(){await this.store.clear(),await this.checkRoot()}emptySync(){this.store.clearSync(),this.checkRootSync()}async rename(e,r,n){let i=this.store.transaction(),o=C(e),s=X(e),a=C(r),c=X(r),l=await this.findINode(i,o),f=await this.getDirListing(i,l,o);if(!l.toStats().hasAccess(2,n))throw p.With("EACCES",e,"rename");if(!f[s])throw p.With("ENOENT",e,"rename");let u=f[s];if(delete f[s],(a+"/").indexOf(e+"/")===0)throw new p(y.EBUSY,o);let h,d;if(a===o?(h=l,d=f):(h=await this.findINode(i,a),d=await this.getDirListing(i,h,a)),d[c]){let E=await this.getINode(i,d[c],r);if(E.toStats().isFile())try{await i.remove(E.ino),await i.remove(d[c])}catch(w){throw await i.abort(),w}else throw p.With("EPERM",r,"rename")}d[c]=u;try{await i.set(l.ino,Je(f)),await i.set(h.ino,Je(d))}catch(E){throw await i.abort(),E}await i.commit()}renameSync(e,r,n){let i=this.store.transaction(),o=C(e),s=X(e),a=C(r),c=X(r),l=this.findINodeSync(i,o),f=this.getDirListingSync(i,l,o);if(!l.toStats().hasAccess(2,n))throw p.With("EACCES",e,"rename");if(!f[s])throw p.With("ENOENT",e,"rename");let u=f[s];if(delete f[s],(a+"/").indexOf(e+"/")==0)throw new p(y.EBUSY,o);let h,d;if(a===o?(h=l,d=f):(h=this.findINodeSync(i,a),d=this.getDirListingSync(i,h,a)),d[c]){let E=this.getINodeSync(i,d[c],r);if(E.toStats().isFile())try{i.removeSync(E.ino),i.removeSync(d[c])}catch(w){throw i.abortSync(),w}else throw p.With("EPERM",r,"rename")}d[c]=u;try{i.setSync(l.ino,Je(f)),i.setSync(h.ino,Je(d))}catch(E){throw i.abortSync(),E}i.commitSync()}async stat(e,r){let n=this.store.transaction(),i=await this.findINode(n,e);if(!i)throw p.With("ENOENT",e,"stat");let o=i.toStats();if(!o.hasAccess(4,r))throw p.With("EACCES",e,"stat");return o}statSync(e,r){let n=this.findINodeSync(this.store.transaction(),e).toStats();if(!n.hasAccess(4,r))throw p.With("EACCES",e,"stat");return n}async createFile(e,r,n,i){let o=new Uint8Array(0),s=await this.commitNew(this.store.transaction(),e,32768,n,i,o);return new at(this,e,r,s.toStats(),o)}createFileSync(e,r,n,i){return this.commitNewSync(e,32768,n,i),this.openFileSync(e,r,i)}async openFile(e,r,n){let i=this.store.transaction(),o=await this.findINode(i,e),s=await i.get(o.ino);if(!o.toStats().hasAccess(wn(r),n))throw p.With("EACCES",e,"openFile");if(!s)throw p.With("ENOENT",e,"openFile");return new at(this,e,r,o.toStats(),s)}openFileSync(e,r,n){let i=this.store.transaction(),o=this.findINodeSync(i,e),s=i.getSync(o.ino);if(!o.toStats().hasAccess(wn(r),n))throw p.With("EACCES",e,"openFile");if(!s)throw p.With("ENOENT",e,"openFile");return new at(this,e,r,o.toStats(),s)}async unlink(e,r){return this.remove(e,!1,r)}unlinkSync(e,r){this.removeSync(e,!1,r)}async rmdir(e,r){if((await this.readdir(e,r)).length>0)throw p.With("ENOTEMPTY",e,"rmdir");await this.remove(e,!0,r)}rmdirSync(e,r){if(this.readdirSync(e,r).length>0)throw p.With("ENOTEMPTY",e,"rmdir");this.removeSync(e,!0,r)}async mkdir(e,r,n){let i=this.store.transaction(),o=Wt("{}");await this.commitNew(i,e,16384,r,n,o)}mkdirSync(e,r,n){this.commitNewSync(e,16384,r,n,Wt("{}"))}async readdir(e,r){let n=this.store.transaction(),i=await this.findINode(n,e);if(!i.toStats().hasAccess(4,r))throw p.With("EACCES",e,"readdur");return Object.keys(await this.getDirListing(n,i,e))}readdirSync(e,r){let n=this.store.transaction(),i=this.findINodeSync(n,e);if(!i.toStats().hasAccess(4,r))throw p.With("EACCES",e,"readdir");return Object.keys(this.getDirListingSync(n,i,e))}async sync(e,r,n){let i=this.store.transaction(),o=await this._findINode(i,C(e),X(e)),s=await this.getINode(i,o,e),a=s.update(n);try{await i.set(s.ino,r),a&&await i.set(o,s.data)}catch(c){throw await i.abort(),c}await i.commit()}syncSync(e,r,n){let i=this.store.transaction(),o=this._findINodeSync(i,C(e),X(e)),s=this.getINodeSync(i,o,e),a=s.update(n);try{i.setSync(s.ino,r),a&&i.setSync(o,s.data)}catch(c){throw i.abortSync(),c}i.commitSync()}async link(e,r,n){let i=this.store.transaction(),o=C(e);if(!(await this.findINode(i,o)).toStats().hasAccess(4,n))throw p.With("EACCES",o,"link");let a=C(r),c=await this.findINode(i,a),l=await this.getDirListing(i,c,a);if(!c.toStats().hasAccess(2,n))throw p.With("EACCES",a,"link");let f=await this._findINode(i,o,X(e)),u=await this.getINode(i,f,e);if(!u.toStats().hasAccess(2,n))throw p.With("EACCES",r,"link");u.nlink++,l[X(r)]=f;try{i.setSync(f,u.data),i.setSync(c.ino,Je(l))}catch(h){throw i.abortSync(),h}i.commitSync()}linkSync(e,r,n){let i=this.store.transaction(),o=C(e);if(!this.findINodeSync(i,o).toStats().hasAccess(4,n))throw p.With("EACCES",o,"link");let a=C(r),c=this.findINodeSync(i,a),l=this.getDirListingSync(i,c,a);if(!c.toStats().hasAccess(2,n))throw p.With("EACCES",a,"link");let f=this._findINodeSync(i,o,X(e)),u=this.getINodeSync(i,f,e);if(!u.toStats().hasAccess(2,n))throw p.With("EACCES",r,"link");u.nlink++,l[X(r)]=f;try{i.setSync(f,u.data),i.setSync(c.ino,Je(l))}catch(h){throw i.abortSync(),h}i.commitSync()}async checkRoot(){let e=this.store.transaction();if(await e.get(Pt))return;let r=new Bt;r.mode=16895,await e.set(r.ino,Wt("{}")),await e.set(Pt,r.data),await e.commit()}checkRootSync(){let e=this.store.transaction();if(e.getSync(Pt))return;let r=new Bt;r.mode=16895,e.setSync(r.ino,Wt("{}")),e.setSync(Pt,r.data),e.commitSync()}async _findINode(e,r,n,i=new Set){let o=pe(r,n);if(i.has(o))throw new p(y.EIO,"Infinite loop detected while finding inode",o);if(i.add(o),r=="/"&&n==="")return Pt;let s=r=="/"?await this.getINode(e,Pt,r):await this.findINode(e,r,i),a=await this.getDirListing(e,s,r);if(!(n in a))throw p.With("ENOENT",sr(r,n),"_findINode");return a[n]}_findINodeSync(e,r,n,i=new Set){let o=pe(r,n);if(i.has(o))throw new p(y.EIO,"Infinite loop detected while finding inode",o);if(i.add(o),r=="/"&&n==="")return Pt;let s=r=="/"?this.getINodeSync(e,Pt,r):this.findINodeSync(e,r,i),a=this.getDirListingSync(e,s,r);if(!(n in a))throw p.With("ENOENT",sr(r,n),"_findINode");return a[n]}async findINode(e,r,n=new Set){let i=await this._findINode(e,C(r),X(r),n);return this.getINode(e,i,r)}findINodeSync(e,r,n=new Set){let i=this._findINodeSync(e,C(r),X(r),n);return this.getINodeSync(e,i,r)}async getINode(e,r,n){let i=await e.get(r);if(!i)throw p.With("ENOENT",n,"getINode");return new Bt(i.buffer)}getINodeSync(e,r,n){let i=e.getSync(r);if(!i)throw p.With("ENOENT",n,"getINode");return new Bt(i.buffer)}async getDirListing(e,r,n){if(!r.toStats().isDirectory())throw p.With("ENOTDIR",n,"getDirListing");let i=await e.get(r.ino);if(!i)throw p.With("ENOENT",n,"getDirListing");return _a(i)}getDirListingSync(e,r,n){if(!r.toStats().isDirectory())throw p.With("ENOTDIR",n,"getDirListing");let i=e.getSync(r.ino);if(!i)throw p.With("ENOENT",n,"getDirListing");return _a(i)}async addNew(e,r,n){for(let i=0;i<Eu;i++){let o=So();if(!await e.get(o))return await e.set(o,r),o}throw new p(y.ENOSPC,"No inode IDs available",n,"addNewNode")}addNewSync(e,r,n){for(let i=0;i<Eu;i++){let o=So();if(!e.getSync(o))return e.setSync(o,r),o}throw new p(y.ENOSPC,"No inode IDs available",n,"addNewNode")}async commitNew(e,r,n,i,o,s){let a=C(r),c=await this.findINode(e,a);if(!c.toStats().hasAccess(2,o))throw p.With("EACCES",r,"commitNewFile");let l=X(r),f=await this.getDirListing(e,c,a);if(r==="/")throw p.With("EEXIST",r,"commitNewFile");if(f[l])throw await e.abort(),p.With("EEXIST",r,"commitNewFile");try{let u=new Bt;return u.ino=await this.addNew(e,s,r),u.mode=i|n,u.uid=o.uid,u.gid=o.gid,u.size=s.length,f[l]=await this.addNew(e,u.data,r),await e.set(c.ino,Je(f)),await e.commit(),u}catch(u){throw e.abort(),u}}commitNewSync(e,r,n,i,o=new Uint8Array){let s=this.store.transaction(),a=C(e),c=this.findINodeSync(s,a);if(!c.toStats().hasAccess(2,i))throw p.With("EACCES",e,"commitNewFile");let l=X(e),f=this.getDirListingSync(s,c,a);if(e==="/")throw p.With("EEXIST",e,"commitNewFile");if(f[l])throw p.With("EEXIST",e,"commitNewFile");let u=new Bt;try{u.ino=this.addNewSync(s,o,e),u.size=o.length,u.mode=n|r,u.uid=i.uid,u.gid=i.gid,f[l]=this.addNewSync(s,u.data,e),s.setSync(c.ino,Je(f))}catch(h){throw s.abortSync(),h}return s.commitSync(),u}async remove(e,r,n){let i=this.store.transaction(),o=C(e),s=await this.findINode(i,o),a=await this.getDirListing(i,s,o),c=X(e);if(!a[c])throw p.With("ENOENT",e,"removeEntry");let l=a[c],f=await this.getINode(i,l,e);if(!f.toStats().hasAccess(2,n))throw p.With("EACCES",e,"removeEntry");if(delete a[c],!r&&f.toStats().isDirectory())throw p.With("EISDIR",e,"removeEntry");if(r&&!f.toStats().isDirectory())throw p.With("ENOTDIR",e,"removeEntry");try{await i.set(s.ino,Je(a)),--f.nlink<1&&(await i.remove(f.ino),await i.remove(l))}catch(u){throw await i.abort(),u}await i.commit()}removeSync(e,r,n){let i=this.store.transaction(),o=C(e),s=this.findINodeSync(i,o),a=this.getDirListingSync(i,s,o),c=X(e),l=a[c];if(!l)throw p.With("ENOENT",e,"removeEntry");let f=this.getINodeSync(i,l,e);if(!f.toStats().hasAccess(2,n))throw p.With("EACCES",e,"removeEntry");if(delete a[c],!r&&f.toStats().isDirectory())throw p.With("EISDIR",e,"removeEntry");if(r&&!f.toStats().isDirectory())throw p.With("ENOTDIR",e,"removeEntry");try{i.setSync(s.ino,Je(a)),--f.nlink<1&&(i.removeSync(f.ino),i.removeSync(l))}catch(u){throw i.abortSync(),u}i.commitSync()}};var xa=class{constructor(e){this.store=e,this.aborted=!1}async[Symbol.asyncDispose](){this.aborted||await this.commit()}[Symbol.dispose](){this.aborted||this.commitSync()}},To=class extends xa{async get(e){return this.getSync(e)}async set(e,r){return this.setSync(e,r)}async remove(e){return this.removeSync(e)}async commit(){return this.commitSync()}async abort(){return this.abortSync()}};var Ro=class extends To{constructor(e){super(e),this.originalData=new Map,this.modifiedKeys=new Set}getSync(e){let r=this.store.get(e);return this.stashOldValue(e,r),r}setSync(e,r){return this.markModified(e),this.store.set(e,r)}removeSync(e){this.markModified(e),this.store.delete(e)}commitSync(){}abortSync(){for(let e of this.modifiedKeys){let r=this.originalData.get(e);r?this.store.set(e,r):this.store.delete(e)}}stashOldValue(e,r){this.originalData.has(e)||this.originalData.set(e,r)}markModified(e){this.modifiedKeys.add(e),this.originalData.has(e)||this.originalData.set(e,this.store.get(e))}};var Ia=class extends Map{constructor(e="tmp"){super(),this.name=e}async sync(){}clearSync(){this.clear()}transaction(){return new Ro(this)}},mn={name:"InMemory",isAvailable(){return!0},options:{name:{type:"string",required:!1,description:"The name of the store"}},create({name:t}){let e=new Ao(new Ia(t));return e.checkRootSync(),e}};function Eb(t){return typeof t=="object"&&t!=null&&"fd"in t&&"path"in t&&"position"in t}function _u(t){return typeof t=="object"&&t!=null&&"_zenfs"in t&&!!t._zenfs}var gn=new Map;function Na(t,{port:e,timeout:r=1e3,fs:n}={}){let i=new Error().stack.slice(6);if(!e)throw p.With("EINVAL");return new Promise((o,s)=>{let a=Math.random().toString(16).slice(10);gn.set(a,{resolve:o,reject:s,fs:n}),e.postMessage({...t,_zenfs:!0,id:a,stack:i});let c=setTimeout(()=>{let l=new p(y.EIO,"RPC Failed");l.stack+=i,s(l),typeof c=="object"&&c.unref()},r)})}function xu(t){if(!_u(t))return;let{id:e,value:r,error:n,stack:i}=t;if(!gn.has(e)){let c=new p(y.EIO,"Invalid RPC id:"+e);throw c.stack+=i,c}let{resolve:o,reject:s,fs:a}=gn.get(e);if(n){let c=typeof r=="string"?new Error(r):p.fromJSON(r);c.stack+=i,s(c),gn.delete(e);return}if(Eb(r)){let{fd:c,path:l,position:f}=r,u=new vo(a,c,l,f);o(u),gn.delete(e);return}o(r),gn.delete(e)}function Iu(t,e){if(!t)throw p.With("EINVAL");t["on"in t?"on":"addEventListener"]("message",r=>{e("data"in r?r.data:r)})}var vo=class extends Ei{constructor(e,r,n,i){super(),this.fs=e,this.fd=r,this.path=n,this.position=i}rpc(e,...r){return Na({scope:"file",fd:this.fd,method:e,args:r},this.fs.options)}_throwNoSync(e){throw new p(y.ENOTSUP,"Syncrohnous operations not support on PortFile",this.path,e)}stat(){return this.rpc("stat")}statSync(){this._throwNoSync("stat")}truncate(e){return this.rpc("truncate",e)}truncateSync(){this._throwNoSync("truncate")}write(e,r,n,i){return this.rpc("write",e,r,n,i)}writeSync(){this._throwNoSync("write")}async read(e,r,n,i){return await this.rpc("read",e,r,n,i)}readSync(){this._throwNoSync("read")}chown(e,r){return this.rpc("chown",e,r)}chownSync(){this._throwNoSync("chown")}chmod(e){return this.rpc("chmod",e)}chmodSync(){this._throwNoSync("chmod")}utimes(e,r){return this.rpc("utimes",e,r)}utimesSync(){this._throwNoSync("utimes")}_setType(e){return this.rpc("_setType",e)}_setTypeSync(){this._throwNoSync("_setType")}close(){return this.rpc("close")}closeSync(){this._throwNoSync("close")}sync(){return this.rpc("sync")}syncSync(){this._throwNoSync("sync")}},Nu=class extends gu(ke){constructor(e){super(),this.options=e,this._sync=mn.create({name:"port-tmpfs"}),this.port=e.port,Iu(this.port,xu)}metadata(){return{...super.metadata(),name:"PortFS"}}rpc(e,...r){return Na({scope:"fs",method:e,args:r},{...this.options,fs:this})}async ready(){await this.rpc("ready"),await super.ready()}rename(e,r,n){return this.rpc("rename",e,r,n)}async stat(e,r){return new Fe(await this.rpc("stat",e,r))}sync(e,r,n){return this.rpc("sync",e,r,n)}openFile(e,r,n){return this.rpc("openFile",e,r,n)}createFile(e,r,n,i){return this.rpc("createFile",e,r,n,i)}unlink(e,r){return this.rpc("unlink",e,r)}rmdir(e,r){return this.rpc("rmdir",e,r)}mkdir(e,r,n){return this.rpc("mkdir",e,r,n)}readdir(e,r){return this.rpc("readdir",e,r)}exists(e,r){return this.rpc("exists",e,r)}link(e,r,n){return this.rpc("link",e,r,n)}};var Ru=Lt(Tu(),1);function vu(t){try{return JSON.parse(t),!0}catch{return!1}}function Ta(t){return t.at(0).toUpperCase()+t.slice(1)}var Ra=Symbol("struct_init"),Nb=Symbol("struct");var Fu=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64"],ku=[...Fu,...Fu.map(t=>Ta(t)),"char"];function Ou(t,e){return function(r,n){let i=typeof n=="object"?n.name:n;if(typeof i=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+i.toString()),i=i.toString()),!i)throw new ReferenceError("Invalid name for struct member");if(typeof r!="object")throw new TypeError("Invalid member for struct field");if(!("constructor"in r))throw new TypeError("Invalid member for struct field");let o=r.constructor;o[Ra]||=[],o[Ra].push({name:i,type:t,length:e})}}function Rb(t){function e(r,n){return typeof r=="number"?Ou(t,r):Ou(t)(r,n)}return e}var XO=Object.fromEntries(ku.map(t=>[t,Rb(t)]));var Lu=1,ko=class t extends Map{constructor(){super()}files(){let e=new Map;for(let[r,n]of this)n.isFile()&&e.set(r,n);return e}toJSON(){return{version:Lu,entries:Object.fromEntries(this)}}toString(){return JSON.stringify(this.toJSON())}dirEntries(e){let r=[];for(let n of this.keys())C(n)==e&&r.push(X(n));return r}fromJSON(e){if(e.version!=Lu)throw new p(y.EINVAL,"Index version mismatch");this.clear();for(let[r,n]of Object.entries(e.entries)){let i=new Fe(n);i.isDirectory()&&(i.fileData=Wt(JSON.stringify(this.dirEntries(r)))),this.set(r,i)}}static parse(e){if(!vu(e))throw new p(y.EINVAL,"Invalid JSON");let r=JSON.parse(e),n=new t;return n.fromJSON(r),n}};var va=class extends Su(ke){async ready(){await super.ready(),!this._isInitialized&&(this.index.fromJSON(await this.indexData),this._isInitialized=!0)}constructor(e){super(),this.indexData=e,this.index=new ko,this._isInitialized=!1}async reloadFiles(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=await this.getData(e,r)}reloadFilesSync(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=this.getDataSync(e,r)}async stat(e){return this.statSync(e)}statSync(e){if(!this.index.has(e))throw p.With("ENOENT",e,"stat");return this.index.get(e)}async openFile(e,r,n){if(Xe(r))throw new p(y.EPERM,e);let i=this.index.get(e);if(!i)throw p.With("ENOENT",e,"openFile");if(!i.hasAccess(wn(r),n))throw p.With("EACCES",e,"openFile");return new _i(this,e,r,i,i.isDirectory()?i.fileData:await this.getData(e,i))}openFileSync(e,r,n){if(Xe(r))throw new p(y.EPERM,e);let i=this.index.get(e);if(!i)throw p.With("ENOENT",e,"openFile");if(!i.hasAccess(wn(r),n))throw p.With("EACCES",e,"openFile");return new _i(this,e,r,i,i.isDirectory()?i.fileData:this.getDataSync(e,i))}async readdir(e){return this.readdirSync(e)}readdirSync(e){let r=this.index.get(e);if(!r)throw p.With("ENOENT",e,"readdir");if(!r.isDirectory())throw p.With("ENOTDIR",e,"readdir");return JSON.parse(Io(r.fileData))}};function Oo(t){return t!=null&&typeof t=="object"&&"isAvailable"in t&&typeof t.isAvailable=="function"&&"create"in t&&typeof t.create=="function"}async function Du(t,e){if(typeof e!="object"||e===null)throw new p(y.EINVAL,"Invalid options");for(let[r,n]of Object.entries(t.options)){let i=e?.[r];if(i==null){if(!n.required)continue;let s=Object.keys(e).filter(a=>!(a in t.options)).map(a=>({str:a,distance:bu(r,a)})).filter(a=>a.distance<5).sort((a,c)=>a.distance-c.distance);throw new p(y.EINVAL,`${t.name}: Required option '${r}' not provided.${s.length>0?` You provided '${s[0].str}', did you mean '${r}'.`:""}`)}if(!(Array.isArray(n.type)?n.type.indexOf(typeof i)!=-1:typeof i==n.type))throw new p(y.EINVAL,`${t.name}: Value provided for option ${r} is not the proper type. Expected ${Array.isArray(n.type)?`one of {${n.type.join(", ")}}`:n.type}, but received ${typeof i}`);n.validator&&await n.validator(i)}}function Fa(t){return t!=null&&typeof t=="object"&&"backend"in t&&Oo(t.backend)}var WN=Lt(We(),1);var $i={};fu($i,{FileHandle:()=>yr,access:()=>_p,appendFile:()=>bs,chmod:()=>Sp,chown:()=>mp,constants:()=>bi,copyFile:()=>ul,cp:()=>dl,exists:()=>$e,lchmod:()=>bp,lchown:()=>gp,link:()=>pp,lstat:()=>al,lutimes:()=>Ep,mkdir:()=>zn,mkdtemp:()=>xp,open:()=>Oe,opendir:()=>Ip,readFile:()=>jn,readdir:()=>ut,readlink:()=>cl,realpath:()=>bt,rename:()=>hp,rm:()=>fl,rmdir:()=>qi,stat:()=>pr,statfs:()=>Np,symlink:()=>wp,truncate:()=>yp,unlink:()=>qn,utimes:()=>ll,watch:()=>PN,writeFile:()=>wr});var Vr=Lt(We(),1);var Ha=Lt(We(),1);var L=or;function rd(t){L=t}var xn=new Map,aE=100;function qa(t){let e=aE++;return xn.set(e,t),e}function Mo(t){if(!xn.has(t))throw new p(y.EBADF);return xn.get(t)}var ft=new Map;Bo("/",mn.create({name:"root"}));function Bo(t,e){if(t[0]!=="/"&&(t="/"+t),t=sr(t),ft.has(t))throw new p(y.EINVAL,"Mount point "+t+" is already in use.");ft.set(t,e)}function $a(t){if(t[0]!=="/"&&(t=`/${t}`),t=sr(t),!ft.has(t))throw new p(y.EINVAL,"Mount point "+t+" is already unmounted.");ft.delete(t)}function te(t){t=M(t);let e=[...ft].sort((r,n)=>r[0].length>n[0].length?-1:1);for(let[r,n]of e)if(r.length<=t.length&&t.startsWith(r))return t=t.slice(r.length>1?r.length:0),t===""&&(t="/"),{fs:n,path:t,mountPoint:r};throw new p(y.EIO,"ZenFS not initialized with a file system")}function td(t,e){for(let[r,n]of Object.entries(e))t=t?.replaceAll(r,n);return t}function Te(t,e){return typeof t.stack=="string"&&(t.stack=td(t.stack,e)),t.message=td(t.message,e),t}function ja(t){"/"in t&&$a("/");for(let[e,r]of Object.entries(t))Bo(e,r)}function za(t,e){let r=t.metadata(),n=r.blockSize||4096;return{type:(e?BigInt:Number)(r.type),bsize:(e?BigInt:Number)(n),ffree:(e?BigInt:Number)(r.freeNodes||Fr),files:(e?BigInt:Number)(r.totalNodes||Fr),bavail:(e?BigInt:Number)(r.freeSpace/n),bfree:(e?BigInt:Number)(r.freeSpace/n),blocks:(e?BigInt:Number)(r.totalSpace/n)}}var cE=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},lE=function(t){return function(e){function r(i){e.error=e.hasError?new t(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function n(){for(;e.stack.length;){var i=e.stack.pop();try{var o=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(o).then(n,function(s){return r(s),n()})}catch(s){r(s)}}if(e.hasError)throw e.error}return n()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n});function Va(t){t=M(t);try{let{fs:e,path:r}=te(In(t));return e.existsSync(r,L)}catch(e){if(e.errno==y.ENOENT)return!1;throw e}}function fE(t,e){t=M(t);let{fs:r,path:n}=te(Va(t)?In(t):t);try{let i=r.statSync(n,L);return e?.bigint?new Mt(i):i}catch(i){throw Te(i,{[n]:t})}}function uE(t,e,r,n=!0){t=M(t);let i=ar(r,420),o=Be(e);t=n&&Va(t)?In(t):t;let{fs:s,path:a}=te(t);if(!s.existsSync(a,L)){if(!Xe(o)&&!kr(o)||o=="r+")throw p.With("ENOENT",t,"_open");if(!s.statSync(C(a),L).isDirectory())throw p.With("ENOTDIR",C(t),"_open");return s.createFileSync(a,o,i,L)}let c=s.statSync(a,L);if(!c.hasAccess(i,L))throw p.With("EACCES",t,"_open");if(Eo(o))throw p.With("EEXIST",t,"_open");return bo(o)?(s.unlinkSync(a,L),s.createFileSync(a,o,c.mode,L)):s.openFileSync(a,o,L)}function dE(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=cE(n,uE(t,e,420,r),!1),o=i.statSync(),s=new Uint8Array(o.size);return i.readSync(s,0,o.size,0),i.closeSync(),s}catch(i){n.error=i,n.hasError=!0}finally{lE(n)}}function nd(t,e){t=M(t);let{fs:r,path:n}=te(Va(t)?In(t):t),i;try{i=r.readdirSync(n,L)}catch(o){throw Te(o,{[n]:t})}for(let o of ft.keys()){if(!o.startsWith(t))continue;let s=o.slice(t.length);s.includes("/")||s.length==0||i.push(s)}return i.map(o=>typeof e=="object"&&e?.withFileTypes?new Nn(o,fE(pe(t.toString(),o))):e=="buffer"||typeof e=="object"&&e?.encoding=="buffer"?Ha.Buffer.from(o):o)}function hE(t,e){let r=Ha.Buffer.from(dE(t.toString(),"r",!1)),n=typeof e=="object"?e?.encoding:e;return n=="buffer"?r:r.toString(n)}function In(t,e){t=M(t);let{base:r,dir:n}=_o(t),i=pe(n=="/"?"/":In(n),r),{fs:o,path:s,mountPoint:a}=te(i);try{return o.statSync(s,L).isSymbolicLink()?In(a+hE(i)):i}catch(c){throw Te(c,{[s]:i})}}var Nn=class{get name(){return X(this.path)}constructor(e,r){this.path=e,this.stats=r}get parentPath(){return this.path}isFile(){return this.stats.isFile()}isDirectory(){return this.stats.isDirectory()}isBlockDevice(){return this.stats.isBlockDevice()}isCharacterDevice(){return this.stats.isCharacterDevice()}isSymbolicLink(){return this.stats.isSymbolicLink()}isFIFO(){return this.stats.isFIFO()}isSocket(){return this.stats.isSocket()}},Ni=class{checkClosed(){if(this.closed)throw new p(y.EBADF,"Can not use closed Dir")}constructor(e){this.path=e,this.closed=!1,this._entries=[]}close(e){if(this.closed=!0,!e)return Promise.resolve();e()}closeSync(){this.closed=!0}async _read(){return this._entries||(this._entries=await ut(this.path,{withFileTypes:!0})),this._entries.length&&this._entries.shift()||null}read(e){if(!e)return this._read();this._read().then(r=>e(void 0,r))}readSync(){return this._entries||(this._entries=nd(this.path,{withFileTypes:!0})),this._entries.length&&this._entries.shift()||null}[Symbol.asyncIterator](){let e=this;return{[Symbol.asyncIterator]:this[Symbol.asyncIterator],async next(){let r=await e._read();return r!=null?{done:!1,value:r}:(await e.close(),{done:!0,value:void 0})}}}};var Ss=Lt(dp(),1);var Wi=class extends Ss.Readable{close(e=()=>null){try{super.destroy(),super.emit("close"),e()}catch(r){e(new p(y.EIO,r.toString()))}}},Ui=class extends Ss.Writable{close(e=()=>null){try{super.destroy(),super.emit("close"),e()}catch(r){e(new p(y.EIO,r.toString()))}}};var et=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},tt=function(t){return function(e){function r(i){e.error=e.hasError?new t(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function n(){for(;e.stack.length;){var i=e.stack.pop();try{var o=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(o).then(n,function(s){return r(s),n()})}catch(s){r(s)}}if(e.hasError)throw e.error}return n()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n}),yr=class{constructor(e){let r=typeof e!="number";this.fd=r?qa(e):e,this.file=r?e:Mo(e)}chown(e,r){return this.file.chown(e,r)}chmod(e){let r=ar(e,-1);if(r<0)throw new p(y.EINVAL,"Invalid mode.");return this.file.chmod(r)}datasync(){return this.file.datasync()}sync(){return this.file.sync()}truncate(e){if(e||(e=0),e<0)throw new p(y.EINVAL);return this.file.truncate(e)}utimes(e,r){return this.file.utimes(No(e),No(r))}async appendFile(e,r={}){let n=cr(r,"utf8","a",420),i=Be(n.flag);if(!kr(i))throw new p(y.EINVAL,"Flag passed to appendFile must allow for appending.");if(typeof e!="string"&&!n.encoding)throw new p(y.EINVAL,"Encoding not specified");let o=typeof e=="string"?Vr.Buffer.from(e,n.encoding):e;await this.file.write(o,0,o.length)}read(e,r,n,i){return isNaN(+i)&&(i=this.file.position),this.file.read(e,r,n,i)}async readFile(e){let r=cr(e,null,"r",292),n=Be(r.flag);if(!pn(n))throw new p(y.EINVAL,"Flag passed must allow for reading.");let{size:i}=await this.stat(),{buffer:o}=await this.file.read(new Uint8Array(i),0,i,0),s=Vr.Buffer.from(o);return r.encoding?s.toString(r.encoding):s}readableWebStream(e={}){let r=async({close:n,enqueue:i,error:o})=>{try{let c=0,l=0,f=NaN;for(;f>0;){let u=await this.read(new Uint8Array(65536),0,65536,l);if(!u.bytesRead){n();return}if(i(u.buffer.slice(0,u.bytesRead)),l+=u.bytesRead,++c>=1e7)throw new p(y.EFBIG,"Too many iterations on readable stream",this.file.path,"FileHandle.readableWebStream");f=u.bytesRead}}catch(s){o(s)}};return new globalThis.ReadableStream({start:r,type:e.type})}readLines(e){throw p.With("ENOSYS",this.file.path,"FileHandle.readLines")}[Symbol.asyncDispose](){return this.close()}async stat(e){let r=await this.file.stat();return e?.bigint?new Mt(r):r}async write(e,r,n,i){let o,s,a;if(typeof e=="string"){i=typeof r=="number"?r:null;let l=typeof n=="string"?n:"utf8";s=0,o=Vr.Buffer.from(e,l),a=o.length}else o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=r,a=n,i=typeof i=="number"?i:null;i??(i=this.file.position);let c=await this.file.write(o,s,a,i);return{buffer:o,bytesWritten:c}}async writeFile(e,r={}){let n=cr(r,"utf8","w",420),i=Be(n.flag);if(!Xe(i))throw new p(y.EINVAL,"Flag passed must allow for writing.");if(typeof e!="string"&&!n.encoding)throw new p(y.EINVAL,"Encoding not specified");let o=typeof e=="string"?Vr.Buffer.from(e,n.encoding):e;await this.file.write(o,0,o.length,0)}async close(){await this.file.close(),xn.delete(this.fd)}async writev(e,r){let n=0;for(let i of e)n+=(await this.write(i,0,i.length,r+n)).bytesWritten;return{bytesWritten:n,buffers:e}}async readv(e,r){let n=0;for(let i of e)n+=(await this.read(i,0,i.byteLength,r+n)).bytesRead;return{bytesRead:n,buffers:e}}createReadStream(e){let r=new Wi({highWaterMark:e?.highWaterMark||65536,encoding:e.encoding,read:async n=>{try{let i=await this.read(new Uint8Array(n),0,n,this.file.position);r.push(i.bytesRead?i.buffer.slice(0,i.bytesRead):null),this.file.position+=i.bytesRead}catch(i){r.destroy(i)}}});return r.path=this.file.path,r}createWriteStream(e){let r={highWaterMark:e?.highWaterMark,encoding:e?.encoding,write:async(i,o,s)=>{try{let{bytesWritten:a}=await this.write(i,null,o);s(a==i.length?null:new Error("Failed to write full chunk"))}catch(a){s(a)}}},n=new Ui(r);return n.path=this.file.path,n}};async function hp(t,e){t=M(t),e=M(e);let r=te(t),n=te(e);try{if(r.mountPoint==n.mountPoint){await r.fs.rename(r.path,n.path,L);return}await wr(e,await jn(t)),await qn(t)}catch(i){throw Te(i,{[r.path]:t,[n.path]:e})}}async function $e(t){try{let{fs:e,path:r}=te(await bt(t));return await e.exists(r,L)}catch(e){if(e instanceof p&&e.code=="ENOENT")return!1;throw e}}async function pr(t,e){t=M(t);let{fs:r,path:n}=te(await $e(t)?await bt(t):t);try{let i=await r.stat(n,L);return e?.bigint?new Mt(i):i}catch(i){throw Te(i,{[n]:t})}}async function al(t,e){t=M(t);let{fs:r,path:n}=te(t);try{let i=await r.stat(n,L);return e?.bigint?new Mt(i):i}catch(i){throw Te(i,{[n]:t})}}async function yp(t,e=0){let r={stack:[],error:void 0,hasError:!1};try{await et(r,await Oe(t,"r+"),!0).truncate(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=tt(r);n&&await n}}async function qn(t){t=M(t);let{fs:e,path:r}=te(t);try{await e.unlink(r,L)}catch(n){throw Te(n,{[r]:t})}}async function $n(t,e,r=420,n){t=M(t);let i=ar(r,420),o=Be(e);t=n&&await $e(t)?await bt(t):t;let{fs:s,path:a}=te(t);if(!await s.exists(a,L)){if(!Xe(o)&&!kr(o)||o=="r+")throw p.With("ENOENT",t,"_open");let l=await s.stat(C(a),L);if(l&&!l.isDirectory())throw p.With("ENOTDIR",C(t),"_open");return new yr(await s.createFile(a,o,i,L))}if(Eo(o))throw p.With("EEXIST",t,"_open");if(!bo(o))return new yr(await s.openFile(a,o,L));let c=await s.openFile(a,o,L);return await c.truncate(0),await c.sync(),new yr(c)}async function Oe(t,e="r",r=420){return await $n(t,e,r,!0)}async function jn(t,e){let r={stack:[],error:void 0,hasError:!1};try{let n=cr(e,null,"r",420);return await et(r,typeof t=="object"&&"fd"in t?t:await Oe(t,n.flag,n.mode),!0).readFile(n)}catch(n){r.error=n,r.hasError=!0}finally{let n=tt(r);n&&await n}}async function wr(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=cr(r,"utf8","w+",420),o=et(n,t instanceof yr?t:await Oe(t.toString(),i.flag,i.mode),!0),s=e;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new p(y.EINVAL,"Iterables and streams not supported",o.file.path,"writeFile");await o.writeFile(s,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function bs(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{let i=cr(r,"utf8","a",420),o=Be(i.flag);if(!kr(o))throw new p(y.EINVAL,"Flag passed to appendFile must allow for appending.");if(typeof e!="string"&&!i.encoding)throw new p(y.EINVAL,"Encoding not specified");let s=typeof e=="string"?Vr.Buffer.from(e,i.encoding):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);await et(n,typeof t=="object"&&"fd"in t?t:await Oe(t,i.flag,i.mode),!0).appendFile(s,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function qi(t){t=M(t),t=await $e(t)?await bt(t):t;let{fs:e,path:r}=te(t);try{await e.rmdir(r,L)}catch(n){throw Te(n,{[r]:t})}}async function zn(t,e){e=typeof e=="object"?e:{mode:e};let r=ar(e?.mode,511);t=M(t),t=await $e(t)?await bt(t):t;let{fs:n,path:i}=te(t),o={[i]:t};try{e?.recursive||await n.mkdir(i,r,L);let s=[];for(let a=i,c=t;!await n.exists(a,L);a=C(a),c=C(c))s.unshift(a),o[a]=c;for(let a of s)await n.mkdir(a,r,L);return s[0]}catch(s){throw Te(s,o)}}async function ut(t,e){t=M(t),t=await $e(t)?await bt(t):t;let{fs:r,path:n}=te(t),i;try{i=await r.readdir(n,L)}catch(s){throw Te(s,{[n]:t})}for(let s of ft.keys())if(s.startsWith(t)){let a=s.slice(t.length);if(a.includes("/")||a.length==0)continue;i.push(a)}let o=[];for(let s of i)o.push(typeof e=="object"&&e?.withFileTypes?new Nn(s,await pr(pe(t,s))):s);return o}async function pp(t,e){t=M(t),e=M(e);let{fs:r,path:n}=te(e);try{return await r.link(t,e,L)}catch(i){throw Te(i,{[n]:e})}}async function wp(t,e,r="file"){if(!["file","dir","junction"].includes(r))throw new p(y.EINVAL,"Invalid symlink type: "+r);if(await $e(e))throw p.With("EEXIST",e.toString(),"symlink");await wr(e,t.toString()),await(await $n(e,"r+",420,!1)).file._setType(40960)}async function cl(t,e){let r={stack:[],error:void 0,hasError:!1};try{let i=await et(r,await $n(M(t),"r",420,!1),!0).readFile(),o=typeof e=="object"?e?.encoding:e;return o=="buffer"?i:i.toString(o)}catch(n){r.error=n,r.hasError=!0}finally{let n=tt(r);n&&await n}}async function mp(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await et(n,await Oe(t,"r+"),!0).chown(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function gp(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await et(n,await $n(t,"r+",420,!1),!0).chown(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function Sp(t,e){let r={stack:[],error:void 0,hasError:!1};try{await et(r,await Oe(t,"r+"),!0).chmod(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=tt(r);n&&await n}}async function bp(t,e){let r={stack:[],error:void 0,hasError:!1};try{await et(r,await $n(t,"r+",420,!1),!0).chmod(e)}catch(n){r.error=n,r.hasError=!0}finally{let n=tt(r);n&&await n}}async function ll(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await et(n,await Oe(t,"r+"),!0).utimes(e,r)}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function Ep(t,e,r){let n={stack:[],error:void 0,hasError:!1};try{await et(n,await $n(t,"r+",420,!1),!0).utimes(new Date(e),new Date(r))}catch(i){n.error=i,n.hasError=!0}finally{let i=tt(n);i&&await i}}async function bt(t,e){t=M(t);let{base:r,dir:n}=_o(t),i=pe(n=="/"?"/":await bt(n),r),{fs:o,path:s,mountPoint:a}=te(i);try{return(await o.stat(s,L)).isSymbolicLink()?bt(a+await cl(i)):i}catch(c){throw Te(c,{[s]:i})}}function PN(t,e={}){throw p.With("ENOSYS",t.toString(),"watch")}async function _p(t,e=0){if(!(await pr(t)).hasAccess(e,L))throw new p(y.EACCES)}async function fl(t,e){switch(t=M(t),(await pr(t)).mode&61440){case 16384:if(e?.recursive)for(let n of await ut(t))await fl(pe(t,n));await qi(t);return;case 32768:case 40960:await qn(t);return;case 24576:case 8192:case 4096:case 49152:default:throw new p(y.EPERM,"File type not supported",t,"rm")}}async function xp(t,e){let r=typeof e=="object"?e?.encoding:e||"utf8",i="/tmp/"+`${t}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await zn(i),r=="buffer"?Vr.Buffer.from(i):i}async function ul(t,e,r){if(t=M(t),e=M(e),r&&r&1&&await $e(e))throw new p(y.EEXIST,"Destination file already exists.",e,"copyFile");await wr(e,await jn(t))}async function Ip(t,e){return t=M(t),new Ni(t)}async function dl(t,e,r){t=M(t),e=M(e);let n=await al(t);if(r?.errorOnExist&&await $e(e))throw new p(y.EEXIST,"Destination file or directory already exists.",e,"cp");switch(n.mode&61440){case 16384:if(!r?.recursive)throw new p(y.EISDIR,t+" is a directory (not copied)",t,"cp");await zn(e,{recursive:!0});for(let i of await ut(t,{withFileTypes:!0}))r.filter&&!r.filter(pe(t,i.name),pe(e,i.name))||await dl(pe(t,i.name),pe(e,i.name),r);break;case 32768:case 40960:await ul(t,e);break;case 24576:case 8192:case 4096:case 49152:default:throw new p(y.EPERM,"File type not supported",t,"rm")}r?.preserveTimestamps&&await ll(e,n.atime,n.mtime)}async function Np(t,e){t=M(t);let{fs:r}=te(t);return za(r,e?.bigint)}function Tp(t){return Fa(t)||Oo(t)||t instanceof ke}async function Rp(t,e=0){if(typeof t!="object"||t==null)throw new p(y.EINVAL,"Invalid options on mount configuration");if(!Tp(t))throw new p(y.EINVAL,"Invalid mount configuration");if(t instanceof ke)return t;Oo(t)&&(t={backend:t});for(let[i,o]of Object.entries(t))if(i!="backend"&&Tp(o)){if(e>10)throw new p(y.EINVAL,"Invalid configuration, too deep and possibly infinite");t[i]=await Rp(o,++e)}let{backend:r}=t;if(!await r.isAvailable())throw new p(y.EPERM,"Backend not available: "+r);Du(r,t);let n=await r.create(t);return"_disableSync"in n&&(n._disableSync=t.disableAsyncCache||!1),await n.ready(),n}async function vp(t){let e="uid"in t&&t.uid||0,r="gid"in t&&t.gid||0;if(rd({uid:e,gid:r,suid:e,sgid:r,euid:e,egid:r}),!!t.mounts){for(let[n,i]of Object.entries(t.mounts)){if(!n.startsWith("/"))throw new p(y.EINVAL,"Mount points must have absolute paths");Fa(i)&&(i.disableAsyncCache??(i.disableAsyncCache=t.disableAsyncCache||!1)),t.mounts[n]=await Rp(i)}ja(t.mounts)}}var m;(function(t){t[t.EPERM=1]="EPERM",t[t.ENOENT=2]="ENOENT",t[t.EINTR=4]="EINTR",t[t.EIO=5]="EIO",t[t.ENXIO=6]="ENXIO",t[t.EBADF=9]="EBADF",t[t.EAGAIN=11]="EAGAIN",t[t.ENOMEM=12]="ENOMEM",t[t.EACCES=13]="EACCES",t[t.EFAULT=14]="EFAULT",t[t.ENOTBLK=15]="ENOTBLK",t[t.EBUSY=16]="EBUSY",t[t.EEXIST=17]="EEXIST",t[t.EXDEV=18]="EXDEV",t[t.ENODEV=19]="ENODEV",t[t.ENOTDIR=20]="ENOTDIR",t[t.EISDIR=21]="EISDIR",t[t.EINVAL=22]="EINVAL",t[t.ENFILE=23]="ENFILE",t[t.EMFILE=24]="EMFILE",t[t.ETXTBSY=26]="ETXTBSY",t[t.EFBIG=27]="EFBIG",t[t.ENOSPC=28]="ENOSPC",t[t.ESPIPE=29]="ESPIPE",t[t.EROFS=30]="EROFS",t[t.EMLINK=31]="EMLINK",t[t.EPIPE=32]="EPIPE",t[t.EDOM=33]="EDOM",t[t.ERANGE=34]="ERANGE",t[t.EDEADLK=35]="EDEADLK",t[t.ENAMETOOLONG=36]="ENAMETOOLONG",t[t.ENOLCK=37]="ENOLCK",t[t.ENOSYS=38]="ENOSYS",t[t.ENOTEMPTY=39]="ENOTEMPTY",t[t.ELOOP=40]="ELOOP",t[t.ENOMSG=42]="ENOMSG",t[t.EBADE=52]="EBADE",t[t.EBADR=53]="EBADR",t[t.EXFULL=54]="EXFULL",t[t.ENOANO=55]="ENOANO",t[t.EBADRQC=56]="EBADRQC",t[t.ENOSTR=60]="ENOSTR",t[t.ENODATA=61]="ENODATA",t[t.ETIME=62]="ETIME",t[t.ENOSR=63]="ENOSR",t[t.ENONET=64]="ENONET",t[t.EREMOTE=66]="EREMOTE",t[t.ENOLINK=67]="ENOLINK",t[t.ECOMM=70]="ECOMM",t[t.EPROTO=71]="EPROTO",t[t.EBADMSG=74]="EBADMSG",t[t.EOVERFLOW=75]="EOVERFLOW",t[t.EBADFD=77]="EBADFD",t[t.ESTRPIPE=86]="ESTRPIPE",t[t.ENOTSOCK=88]="ENOTSOCK",t[t.EDESTADDRREQ=89]="EDESTADDRREQ",t[t.EMSGSIZE=90]="EMSGSIZE",t[t.EPROTOTYPE=91]="EPROTOTYPE",t[t.ENOPROTOOPT=92]="ENOPROTOOPT",t[t.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",t[t.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",t[t.ENOTSUP=95]="ENOTSUP",t[t.ENETDOWN=100]="ENETDOWN",t[t.ENETUNREACH=101]="ENETUNREACH",t[t.ENETRESET=102]="ENETRESET",t[t.ETIMEDOUT=110]="ETIMEDOUT",t[t.ECONNREFUSED=111]="ECONNREFUSED",t[t.EHOSTDOWN=112]="EHOSTDOWN",t[t.EHOSTUNREACH=113]="EHOSTUNREACH",t[t.EALREADY=114]="EALREADY",t[t.EINPROGRESS=115]="EINPROGRESS",t[t.ESTALE=116]="ESTALE",t[t.EREMOTEIO=121]="EREMOTEIO",t[t.EDQUOT=122]="EDQUOT"})(m||(m={}));var Fp={[m.EPERM]:"Operation not permitted",[m.ENOENT]:"No such file or directory",[m.EINTR]:"Interrupted system call",[m.EIO]:"Input/output error",[m.ENXIO]:"No such device or address",[m.EBADF]:"Bad file descriptor",[m.EAGAIN]:"Resource temporarily unavailable",[m.ENOMEM]:"Cannot allocate memory",[m.EACCES]:"Permission denied",[m.EFAULT]:"Bad address",[m.ENOTBLK]:"Block device required",[m.EBUSY]:"Resource busy or locked",[m.EEXIST]:"File exists",[m.EXDEV]:"Invalid cross-device link",[m.ENODEV]:"No such device",[m.ENOTDIR]:"File is not a directory",[m.EISDIR]:"File is a directory",[m.EINVAL]:"Invalid argument",[m.ENFILE]:"Too many open files in system",[m.EMFILE]:"Too many open files",[m.ETXTBSY]:"Text file busy",[m.EFBIG]:"File is too big",[m.ENOSPC]:"No space left on disk",[m.ESPIPE]:"Illegal seek",[m.EROFS]:"Cannot modify a read-only file system",[m.EMLINK]:"Too many links",[m.EPIPE]:"Broken pipe",[m.EDOM]:"Numerical argument out of domain",[m.ERANGE]:"Numerical result out of range",[m.EDEADLK]:"Resource deadlock would occur",[m.ENAMETOOLONG]:"File name too long",[m.ENOLCK]:"No locks available",[m.ENOSYS]:"Function not implemented",[m.ENOTEMPTY]:"Directory is not empty",[m.ELOOP]:"Too many levels of symbolic links",[m.ENOMSG]:"No message of desired type",[m.EBADE]:"Invalid exchange",[m.EBADR]:"Invalid request descriptor",[m.EXFULL]:"Exchange full",[m.ENOANO]:"No anode",[m.EBADRQC]:"Invalid request code",[m.ENOSTR]:"Device not a stream",[m.ENODATA]:"No data available",[m.ETIME]:"Timer expired",[m.ENOSR]:"Out of streams resources",[m.ENONET]:"Machine is not on the network",[m.EREMOTE]:"Object is remote",[m.ENOLINK]:"Link has been severed",[m.ECOMM]:"Communication error on send",[m.EPROTO]:"Protocol error",[m.EBADMSG]:"Bad message",[m.EOVERFLOW]:"Value too large for defined data type",[m.EBADFD]:"File descriptor in bad state",[m.ESTRPIPE]:"Streams pipe error",[m.ENOTSOCK]:"Socket operation on non-socket",[m.EDESTADDRREQ]:"Destination address required",[m.EMSGSIZE]:"Message too long",[m.EPROTOTYPE]:"Protocol wrong type for socket",[m.ENOPROTOOPT]:"Protocol not available",[m.EPROTONOSUPPORT]:"Protocol not supported",[m.ESOCKTNOSUPPORT]:"Socket type not supported",[m.ENOTSUP]:"Operation is not supported",[m.ENETDOWN]:"Network is down",[m.ENETUNREACH]:"Network is unreachable",[m.ENETRESET]:"Network dropped connection on reset",[m.ETIMEDOUT]:"Connection timed out",[m.ECONNREFUSED]:"Connection refused",[m.EHOSTDOWN]:"Host is down",[m.EHOSTUNREACH]:"No route to host",[m.EALREADY]:"Operation already in progress",[m.EINPROGRESS]:"Operation now in progress",[m.ESTALE]:"Stale file handle",[m.EREMOTEIO]:"Remote I/O error",[m.EDQUOT]:"Disk quota exceeded"},g=class t extends Error{static fromJSON(e){let r=new t(e.errno,e.message,e.path,e.syscall);return r.code=e.code,r.stack=e.stack,r}static With(e,r,n){return new t(m[e],Fp[m[e]],r,n)}constructor(e,r=Fp[e],n,i=""){super(r),this.errno=e,this.path=n,this.syscall=i,this.code=m[e],this.message=`${this.code}: ${r}${this.path?`, '${this.path}'`:""}`}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}};var le;(function(t){t[t.FILE=32768]="FILE",t[t.DIRECTORY=16384]="DIRECTORY",t[t.SYMLINK=40960]="SYMLINK"})(le||(le={}));var yl=class{_convert(e){return this._isBigint?BigInt(e):Number(e)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}get atime(){return new Date(Number(this.atimeMs))}set atime(e){this.atimeMs=this._convert(e.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(e){this.mtimeMs=this._convert(e.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(e){this.ctimeMs=this._convert(e.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(e){this.birthtimeMs=this._convert(e.getTime())}constructor({atimeMs:e,mtimeMs:r,ctimeMs:n,birthtimeMs:i,uid:o,gid:s,size:a,mode:c,ino:l}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);let f=Date.now();this.atimeMs=this._convert(e??f),this.mtimeMs=this._convert(r??f),this.ctimeMs=this._convert(n??f),this.birthtimeMs=this._convert(i??f),this.uid=this._convert(o??0),this.gid=this._convert(s??0),this.size=this._convert(a??0),this.ino=this._convert(l??0);let u=Number(c)&61440||le.FILE;if(c)this.mode=this._convert(c);else switch(u){case le.FILE:this.mode=this._convert(420);break;case le.DIRECTORY:default:this.mode=this._convert(511)}this.mode&61440||(this.mode=this.mode|this._convert(u))}isFile(){return(this.mode&61440)===32768}isDirectory(){return(this.mode&61440)===16384}isSymbolicLink(){return(this.mode&61440)===40960}isSocket(){return(this.mode&61440)===49152}isBlockDevice(){return(this.mode&61440)===24576}isCharacterDevice(){return(this.mode&61440)===8192}isFIFO(){return(this.mode&61440)===4096}hasAccess(e,r){if(r.euid===0||r.egid===0)return!0;let n=(r.uid==this.uid?448:0)|(r.gid==this.gid?56:0)|7;return(e&this.mode&n)==e}cred(e=Number(this.uid),r=Number(this.gid)){return{uid:e,gid:r,suid:Number(this.uid),sgid:Number(this.gid),euid:e,egid:r}}chmod(e){this.mode=this._convert(this.mode&61440|e)}chown(e,r){e=Number(e),r=Number(r),!isNaN(e)&&0<=e&&e<2**32&&(this.uid=this._convert(e)),!isNaN(r)&&0<=r&&r<2**32&&(this.gid=this._convert(r))}get atimeNs(){return BigInt(this.atimeMs)*1000n}get mtimeNs(){return BigInt(this.mtimeMs)*1000n}get ctimeNs(){return BigInt(this.ctimeMs)*1000n}get birthtimeNs(){return BigInt(this.birthtimeMs)*1000n}},he=class extends yl{constructor(){super(...arguments),this._isBigint=!1}};var kp=525687744115;var ji=2**32-1,Yt=0n;function Op(){return Math.round(Math.random()*2**32).toString(16)}function Es(){return BigInt("0x"+Op()+Op())}var j;(function(t){t[t.ino=0]="ino",t[t.size=8]="size",t[t.mode=12]="mode",t[t.nlink=14]="nlink",t[t.uid=18]="uid",t[t.gid=22]="gid",t[t.atime=26]="atime",t[t.birthtime=34]="birthtime",t[t.mtime=42]="mtime",t[t.ctime=50]="ctime",t[t.end=58]="end"})(j||(j={}));var Gt=class{get data(){return new Uint8Array(this.buffer)}constructor(e){let r=!e;if(e??(e=new ArrayBuffer(j.end)),e?.byteLength<j.end)throw new RangeError(`Can not create an inode from a buffer less than ${j.end} bytes`);if(this.view=new DataView(e),this.buffer=e,!r)return;this.ino=Es(),this.nlink=1,this.size=4096;let n=Date.now();this.atimeMs=n,this.mtimeMs=n,this.ctimeMs=n,this.birthtimeMs=n}get ino(){return this.view.getBigUint64(j.ino,!0)}set ino(e){this.view.setBigUint64(j.ino,e,!0)}get size(){return this.view.getUint32(j.size,!0)}set size(e){this.view.setUint32(j.size,e,!0)}get mode(){return this.view.getUint16(j.mode,!0)}set mode(e){this.view.setUint16(j.mode,e,!0)}get nlink(){return this.view.getUint32(j.nlink,!0)}set nlink(e){this.view.setUint32(j.nlink,e,!0)}get uid(){return this.view.getUint32(j.uid,!0)}set uid(e){this.view.setUint32(j.uid,e,!0)}get gid(){return this.view.getUint32(j.gid,!0)}set gid(e){this.view.setUint32(j.gid,e,!0)}get atimeMs(){return this.view.getFloat64(j.atime,!0)}set atimeMs(e){this.view.setFloat64(j.atime,e,!0)}get birthtimeMs(){return this.view.getFloat64(j.birthtime,!0)}set birthtimeMs(e){this.view.setFloat64(j.birthtime,e,!0)}get mtimeMs(){return this.view.getFloat64(j.mtime,!0)}set mtimeMs(e){this.view.setFloat64(j.mtime,e,!0)}get ctimeMs(){return this.view.getFloat64(j.ctime,!0)}set ctimeMs(e){this.view.setFloat64(j.ctime,e,!0)}toStats(){return new he(this)}update(e){let r=!1;return this.size!==e.size&&(this.size=e.size,r=!0),this.mode!==e.mode&&(this.mode=e.mode,r=!0),this.nlink!==e.nlink&&(this.nlink=e.nlink,r=!0),this.uid!==e.uid&&(this.uid=e.uid,r=!0),this.uid!==e.uid&&(this.uid=e.uid,r=!0),this.atimeMs!==e.atimeMs&&(this.atimeMs=e.atimeMs,r=!0),this.mtimeMs!==e.mtimeMs&&(this.mtimeMs=e.mtimeMs,r=!0),this.ctimeMs!==e.ctimeMs&&(this.ctimeMs=e.ctimeMs,r=!0),r}};var jN=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];function Vn(t){if(typeof t=="number")return zN(t);if(!jN.includes(t))throw new Error("Invalid flag string: "+t);return t}function zN(t){switch(t){case 0:return"r";case 1052672:return"rs";case 2:return"r+";case 1052674:return"rs+";case 577:return"w";case 705:return"wx";case 578:return"w+";case 706:return"wx+";case 1089:return"a";case 1217:return"ax";case 1090:return"a+";case 1218:return"ax+";default:throw new Error("Invalid flag number: "+t)}}function Gn(t){let e=0;return e<<=1,e+=+zi(t),e<<=1,e+=+gr(t),e<<=1,e}function zi(t){return t.indexOf("r")!==-1||t.indexOf("+")!==-1}function gr(t){return t.indexOf("w")!==-1||t.indexOf("a")!==-1||t.indexOf("+")!==-1}function _l(t){return t.indexOf("a")!==-1}var Hi=class{[Symbol.asyncDispose](){return this.close()}[Symbol.dispose](){return this.closeSync()}datasync(){return this.sync()}datasyncSync(){return this.syncSync()}},je=class extends Hi{constructor(e,r,n,i,o=new Uint8Array(new ArrayBuffer(0,e.metadata().noResizableBuffers?{}:{maxByteLength:ji}))){if(super(),this.fs=e,this.path=r,this.flag=n,this.stats=i,this._buffer=o,this._position=0,this.dirty=!1,this.stats.size!=o.byteLength){if(zi(this.flag))throw new Error(`Size mismatch: buffer length ${o.byteLength}, stats size ${this.stats.size}`);this.dirty=!0}}get buffer(){return this._buffer}get position(){return _l(this.flag)?this.stats.size:this._position}set position(e){this._position=e}async sync(){this.dirty&&(await this.fs.sync(this.path,this._buffer,this.stats),this.dirty=!1)}syncSync(){this.dirty&&(this.fs.syncSync(this.path,this._buffer,this.stats),this.dirty=!1)}async close(){await this.sync()}closeSync(){this.syncSync()}async stat(){return new he(this.stats)}statSync(){return new he(this.stats)}_truncate(e){if(this.dirty=!0,!gr(this.flag))throw new g(m.EPERM,"File not opened with a writeable mode.");if(this.stats.mtimeMs=Date.now(),e>this._buffer.length){let r=new Uint8Array(e-this._buffer.length);this.writeSync(r,0,r.length,this._buffer.length);return}this.stats.size=e,this._buffer=this._buffer.slice(0,e)}async truncate(e){this._truncate(e),await this.sync()}truncateSync(e){this._truncate(e),this.syncSync()}_write(e,r=0,n=this.stats.size,i=this.position){if(this.dirty=!0,!gr(this.flag))throw new g(m.EPERM,"File not opened with a writeable mode.");let o=i+n;if(o>this.stats.size&&(this.stats.size=o,o>this._buffer.byteLength))if(this._buffer.buffer.resizable&&this._buffer.buffer.maxByteLength<=o)this._buffer.buffer.resize(o);else{let a=new Uint8Array(new ArrayBuffer(o,this.fs.metadata().noResizableBuffers?{}:{maxByteLength:ji}));a.set(this._buffer),this._buffer=a}let s=e.slice(r,r+n);return this._buffer.set(s,i),this.stats.mtimeMs=Date.now(),this.position=i+s.byteLength,s.byteLength}async write(e,r,n,i){let o=this._write(e,r,n,i);return await this.sync(),o}writeSync(e,r=0,n=this.stats.size,i=this.position){let o=this._write(e,r,n,i);return this.syncSync(),o}_read(e,r=0,n=this.stats.size,i){if(!zi(this.flag))throw new g(m.EPERM,"File not opened with a readable mode.");this.dirty=!0,i??(i=this.position);let o=i+n;o>this.stats.size&&(o=i+Math.max(this.stats.size-i,0)),this.stats.atimeMs=Date.now(),this._position=o;let s=o-i;return s==0||new Uint8Array(e.buffer,r,n).set(this._buffer.slice(i,o)),s}async read(e,r,n,i){let o=this._read(e,r,n,i);return await this.sync(),{bytesRead:o,buffer:e}}readSync(e,r,n,i){let o=this._read(e,r,n,i);return this.statSync(),o}async chmod(e){this.dirty=!0,this.stats.chmod(e),await this.sync()}chmodSync(e){this.dirty=!0,this.stats.chmod(e),this.syncSync()}async chown(e,r){this.dirty=!0,this.stats.chown(e,r),await this.sync()}chownSync(e,r){this.dirty=!0,this.stats.chown(e,r),this.syncSync()}async utimes(e,r){this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,await this.sync()}utimesSync(e,r){this.dirty=!0,this.stats.atime=e,this.stats.mtime=r,this.syncSync()}async _setType(e){this.dirty=!0,this.stats.mode=this.stats.mode&-61441|e,await this.sync()}_setTypeSync(e){this.dirty=!0,this.stats.mode=this.stats.mode&-61441|e,this.syncSync()}},Vi=class extends je{constructor(e,r,n,i,o){super(e,r,n,i,o)}async sync(){}syncSync(){}async close(){}closeSync(){}};var Gr={uid:0,gid:0,suid:0,sgid:0,euid:0,egid:0};var HN="/";function Cp(t,e){let r="",n=0,i=-1,o=0,s="\0";for(let a=0;a<=t.length;++a){if(a<t.length)s=t[a];else{if(s=="/")break;s="/"}if(s=="/"){if(!(i===a-1||o===1))if(o===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){let c=r.lastIndexOf("/");c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=a,o=0;continue}else if(r.length!==0){r="",n=0,i=a,o=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,a):r=t.slice(i+1,a),n=a-i-1;i=a,o=0}else s==="."&&o!==-1?++o:o=-1}return r}function Yn(...t){let e="";for(let n of[...t.reverse(),HN])if(n.length&&(e=`${n}/${e}`,n.startsWith("/")))break;let r=e.startsWith("/");return e=Cp(e,!r),r?`/${e}`:e.length?e:"/"}function VN(t){if(!t.length)return".";let e=t.startsWith("/"),r=t.endsWith("/");return t=Cp(t,!e),t.length?(r&&(t+="/"),e?`/${t}`:t):e?"/":r?"./":"."}function rt(...t){if(!t.length)return".";let e=t.join("/");return e?.length?VN(e):"."}function P(t){if(t.length===0)return".";let e=t[0]==="/",r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t[i]==="/"){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)}function z(t,e){let r=0,n=-1,i=!0;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let o=e.length-1,s=-1;for(let a=t.length-1;a>=0;--a)if(t[a]==="/"){if(!i){r=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(t[a]===e[o]?--o===-1&&(n=a):(o=-1,n=s));return r===n?n=s:n===-1&&(n=t.length),t.slice(r,n)}for(let o=t.length-1;o>=0;--o)if(t[o]==="/"){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)}var ze=class{metadata(){return{name:this.constructor.name.toLowerCase(),readonly:!1,totalSpace:0,freeSpace:0,noResizableBuffers:!1,noAsyncCache:this._disableSync??!1,type:kp}}constructor(){}async ready(){}async exists(e,r){try{return await this.stat(e,r),!0}catch(n){return n.code!="ENOENT"}}existsSync(e,r){try{return this.statSync(e,r),!0}catch(n){return n.code!="ENOENT"}}};function Kn(t){class e extends t{constructor(){super(...arguments),this._queue=[],this._isInitialized=!1}get _queueRunning(){return!!this._queue.length}queueDone(){return new Promise(n=>{let i=()=>this._queueRunning?setTimeout(i):n();i()})}async ready(){if(await super.ready(),!(this._isInitialized||this._disableSync)){this.checkSync(),await this._sync.ready();try{await this.crossCopy("/"),this._isInitialized=!0}catch(n){throw this._isInitialized=!1,n}}}checkSync(n,i){if(this._disableSync)throw new g(m.ENOTSUP,"Sync caching has been disabled for this async file system",n,i);if(!this._sync)throw new g(m.ENOTSUP,"No sync cache is attached to this async file system",n,i)}renameSync(n,i,o){this.checkSync(n,"rename"),this._sync.renameSync(n,i,o),this.queue("rename",n,i,o)}statSync(n,i){return this.checkSync(n,"stat"),this._sync.statSync(n,i)}createFileSync(n,i,o,s){return this.checkSync(n,"createFile"),this._sync.createFileSync(n,i,o,s),this.queue("createFile",n,i,o,s),this.openFileSync(n,i,s)}openFileSync(n,i,o){this.checkSync(n,"openFile");let s=this._sync.openFileSync(n,i,o),a=s.statSync(),c=new Uint8Array(a.size);return s.readSync(c),new je(this,n,i,a,c)}unlinkSync(n,i){this.checkSync(n,"unlinkSync"),this._sync.unlinkSync(n,i),this.queue("unlink",n,i)}rmdirSync(n,i){this.checkSync(n,"rmdir"),this._sync.rmdirSync(n,i),this.queue("rmdir",n,i)}mkdirSync(n,i,o){this.checkSync(n,"mkdir"),this._sync.mkdirSync(n,i,o),this.queue("mkdir",n,i,o)}readdirSync(n,i){return this.checkSync(n,"readdir"),this._sync.readdirSync(n,i)}linkSync(n,i,o){this.checkSync(n,"link"),this._sync.linkSync(n,i,o),this.queue("link",n,i,o)}syncSync(n,i,o){this.checkSync(n,"sync"),this._sync.syncSync(n,i,o),this.queue("sync",n,i,o)}existsSync(n,i){return this.checkSync(n,"exists"),this._sync.existsSync(n,i)}async crossCopy(n){this.checkSync(n,"crossCopy");let i=await this.stat(n,Gr);if(i.isDirectory()){if(n!=="/"){let s=await this.stat(n,Gr);this._sync.mkdirSync(n,s.mode,s.cred())}let o=await this.readdir(n,Gr);for(let s of o)await this.crossCopy(rt(n,s))}else{let o=await this.openFile(n,Vn("r"),Gr),s=this._sync.createFileSync(n,Vn("w"),i.mode,i.cred());try{let a=new Uint8Array(i.size);await o.read(a),s.writeSync(a,0,i.size)}finally{await o.close(),s.closeSync()}}}async _next(){if(!this._queueRunning)return;let[n,...i]=this._queue.shift();await this[n](...i),await this._next()}queue(...n){this._queue.push(n),this._next()}}return e}function Mp(t){class e extends t{metadata(){return{...super.metadata(),readonly:!0}}async rename(n,i,o){throw new g(m.EROFS)}renameSync(n,i,o){throw new g(m.EROFS)}async createFile(n,i,o,s){throw new g(m.EROFS)}createFileSync(n,i,o,s){throw new g(m.EROFS)}async unlink(n,i){throw new g(m.EROFS)}unlinkSync(n,i){throw new g(m.EROFS)}async rmdir(n,i){throw new g(m.EROFS)}rmdirSync(n,i){throw new g(m.EROFS)}async mkdir(n,i,o){throw new g(m.EROFS)}mkdirSync(n,i,o){throw new g(m.EROFS)}async link(n,i,o){throw new g(m.EROFS)}linkSync(n,i,o){throw new g(m.EROFS)}async sync(n,i,o){throw new g(m.EROFS)}syncSync(n,i,o){throw new g(m.EROFS)}}return e}var iM=typeof globalThis.setImmediate=="function"?globalThis.setImmediate:t=>setTimeout(t,0);function Et(t){if(typeof t!="string")throw new g(m.EINVAL,"Can not encode a non-string");return new Uint8Array(Array.from(t).map(e=>e.charCodeAt(0)))}function Gi(t){if(!(t instanceof Uint8Array))throw new g(m.EINVAL,"Can not decode a non-Uint8Array");return Array.from(t).map(e=>String.fromCharCode(e)).join("")}function xl(t){return JSON.parse(Gi(t),(e,r)=>e==""?r:BigInt(r))}function nt(t){return Et(JSON.stringify(t,(e,r)=>e==""?r:r.toString()))}var Bp=5,Kr=class extends ze{async ready(){this._initialized||(await this.checkRoot(),this._initialized=!0)}constructor(e){super(),this.store=e,this._initialized=!1}metadata(){return{...super.metadata(),name:this.store.name}}async empty(){await this.store.clear(),await this.checkRoot()}emptySync(){this.store.clearSync(),this.checkRootSync()}async rename(e,r,n){let i=this.store.transaction(),o=P(e),s=z(e),a=P(r),c=z(r),l=await this.findINode(i,o),f=await this.getDirListing(i,l,o);if(!l.toStats().hasAccess(2,n))throw g.With("EACCES",e,"rename");if(!f[s])throw g.With("ENOENT",e,"rename");let u=f[s];if(delete f[s],(a+"/").indexOf(e+"/")===0)throw new g(m.EBUSY,o);let h,d;if(a===o?(h=l,d=f):(h=await this.findINode(i,a),d=await this.getDirListing(i,h,a)),d[c]){let E=await this.getINode(i,d[c],r);if(E.toStats().isFile())try{await i.remove(E.ino),await i.remove(d[c])}catch(w){throw await i.abort(),w}else throw g.With("EPERM",r,"rename")}d[c]=u;try{await i.set(l.ino,nt(f)),await i.set(h.ino,nt(d))}catch(E){throw await i.abort(),E}await i.commit()}renameSync(e,r,n){let i=this.store.transaction(),o=P(e),s=z(e),a=P(r),c=z(r),l=this.findINodeSync(i,o),f=this.getDirListingSync(i,l,o);if(!l.toStats().hasAccess(2,n))throw g.With("EACCES",e,"rename");if(!f[s])throw g.With("ENOENT",e,"rename");let u=f[s];if(delete f[s],(a+"/").indexOf(e+"/")==0)throw new g(m.EBUSY,o);let h,d;if(a===o?(h=l,d=f):(h=this.findINodeSync(i,a),d=this.getDirListingSync(i,h,a)),d[c]){let E=this.getINodeSync(i,d[c],r);if(E.toStats().isFile())try{i.removeSync(E.ino),i.removeSync(d[c])}catch(w){throw i.abortSync(),w}else throw g.With("EPERM",r,"rename")}d[c]=u;try{i.setSync(l.ino,nt(f)),i.setSync(h.ino,nt(d))}catch(E){throw i.abortSync(),E}i.commitSync()}async stat(e,r){let n=this.store.transaction(),i=await this.findINode(n,e);if(!i)throw g.With("ENOENT",e,"stat");let o=i.toStats();if(!o.hasAccess(4,r))throw g.With("EACCES",e,"stat");return o}statSync(e,r){let n=this.findINodeSync(this.store.transaction(),e).toStats();if(!n.hasAccess(4,r))throw g.With("EACCES",e,"stat");return n}async createFile(e,r,n,i){let o=new Uint8Array(0),s=await this.commitNew(this.store.transaction(),e,le.FILE,n,i,o);return new je(this,e,r,s.toStats(),o)}createFileSync(e,r,n,i){return this.commitNewSync(e,le.FILE,n,i),this.openFileSync(e,r,i)}async openFile(e,r,n){let i=this.store.transaction(),o=await this.findINode(i,e),s=await i.get(o.ino);if(!o.toStats().hasAccess(Gn(r),n))throw g.With("EACCES",e,"openFile");if(!s)throw g.With("ENOENT",e,"openFile");return new je(this,e,r,o.toStats(),s)}openFileSync(e,r,n){let i=this.store.transaction(),o=this.findINodeSync(i,e),s=i.getSync(o.ino);if(!o.toStats().hasAccess(Gn(r),n))throw g.With("EACCES",e,"openFile");if(!s)throw g.With("ENOENT",e,"openFile");return new je(this,e,r,o.toStats(),s)}async unlink(e,r){return this.remove(e,!1,r)}unlinkSync(e,r){this.removeSync(e,!1,r)}async rmdir(e,r){if((await this.readdir(e,r)).length>0)throw g.With("ENOTEMPTY",e,"rmdir");await this.remove(e,!0,r)}rmdirSync(e,r){if(this.readdirSync(e,r).length>0)throw g.With("ENOTEMPTY",e,"rmdir");this.removeSync(e,!0,r)}async mkdir(e,r,n){let i=this.store.transaction(),o=Et("{}");await this.commitNew(i,e,le.DIRECTORY,r,n,o)}mkdirSync(e,r,n){this.commitNewSync(e,le.DIRECTORY,r,n,Et("{}"))}async readdir(e,r){let n=this.store.transaction(),i=await this.findINode(n,e);if(!i.toStats().hasAccess(4,r))throw g.With("EACCES",e,"readdur");return Object.keys(await this.getDirListing(n,i,e))}readdirSync(e,r){let n=this.store.transaction(),i=this.findINodeSync(n,e);if(!i.toStats().hasAccess(4,r))throw g.With("EACCES",e,"readdir");return Object.keys(this.getDirListingSync(n,i,e))}async sync(e,r,n){let i=this.store.transaction(),o=await this._findINode(i,P(e),z(e)),s=await this.getINode(i,o,e),a=s.update(n);try{await i.set(s.ino,r),a&&await i.set(o,s.data)}catch(c){throw await i.abort(),c}await i.commit()}syncSync(e,r,n){let i=this.store.transaction(),o=this._findINodeSync(i,P(e),z(e)),s=this.getINodeSync(i,o,e),a=s.update(n);try{i.setSync(s.ino,r),a&&i.setSync(o,s.data)}catch(c){throw i.abortSync(),c}i.commitSync()}async link(e,r,n){let i=this.store.transaction(),o=P(e);if(!(await this.findINode(i,o)).toStats().hasAccess(4,n))throw g.With("EACCES",o,"link");let a=P(r),c=await this.findINode(i,a),l=await this.getDirListing(i,c,a);if(!c.toStats().hasAccess(2,n))throw g.With("EACCES",a,"link");let f=await this._findINode(i,o,z(e)),u=await this.getINode(i,f,e);if(!u.toStats().hasAccess(2,n))throw g.With("EACCES",r,"link");u.nlink++,l[z(r)]=f;try{i.setSync(f,u.data),i.setSync(c.ino,nt(l))}catch(h){throw i.abortSync(),h}i.commitSync()}linkSync(e,r,n){let i=this.store.transaction(),o=P(e);if(!this.findINodeSync(i,o).toStats().hasAccess(4,n))throw g.With("EACCES",o,"link");let a=P(r),c=this.findINodeSync(i,a),l=this.getDirListingSync(i,c,a);if(!c.toStats().hasAccess(2,n))throw g.With("EACCES",a,"link");let f=this._findINodeSync(i,o,z(e)),u=this.getINodeSync(i,f,e);if(!u.toStats().hasAccess(2,n))throw g.With("EACCES",r,"link");u.nlink++,l[z(r)]=f;try{i.setSync(f,u.data),i.setSync(c.ino,nt(l))}catch(h){throw i.abortSync(),h}i.commitSync()}async checkRoot(){let e=this.store.transaction();if(await e.get(Yt))return;let r=new Gt;r.mode=511|le.DIRECTORY,await e.set(r.ino,Et("{}")),await e.set(Yt,r.data),await e.commit()}checkRootSync(){let e=this.store.transaction();if(e.getSync(Yt))return;let r=new Gt;r.mode=511|le.DIRECTORY,e.setSync(r.ino,Et("{}")),e.setSync(Yt,r.data),e.commitSync()}async _findINode(e,r,n,i=new Set){let o=rt(r,n);if(i.has(o))throw new g(m.EIO,"Infinite loop detected while finding inode",o);if(i.add(o),r=="/"&&n==="")return Yt;let s=r=="/"?await this.getINode(e,Yt,r):await this.findINode(e,r,i),a=await this.getDirListing(e,s,r);if(!(n in a))throw g.With("ENOENT",Yn(r,n),"_findINode");return a[n]}_findINodeSync(e,r,n,i=new Set){let o=rt(r,n);if(i.has(o))throw new g(m.EIO,"Infinite loop detected while finding inode",o);if(i.add(o),r=="/"&&n==="")return Yt;let s=r=="/"?this.getINodeSync(e,Yt,r):this.findINodeSync(e,r,i),a=this.getDirListingSync(e,s,r);if(!(n in a))throw g.With("ENOENT",Yn(r,n),"_findINode");return a[n]}async findINode(e,r,n=new Set){let i=await this._findINode(e,P(r),z(r),n);return this.getINode(e,i,r)}findINodeSync(e,r,n=new Set){let i=this._findINodeSync(e,P(r),z(r),n);return this.getINodeSync(e,i,r)}async getINode(e,r,n){let i=await e.get(r);if(!i)throw g.With("ENOENT",n,"getINode");return new Gt(i.buffer)}getINodeSync(e,r,n){let i=e.getSync(r);if(!i)throw g.With("ENOENT",n,"getINode");return new Gt(i.buffer)}async getDirListing(e,r,n){if(!r.toStats().isDirectory())throw g.With("ENOTDIR",n,"getDirListing");let i=await e.get(r.ino);if(!i)throw g.With("ENOENT",n,"getDirListing");return xl(i)}getDirListingSync(e,r,n){if(!r.toStats().isDirectory())throw g.With("ENOTDIR",n,"getDirListing");let i=e.getSync(r.ino);if(!i)throw g.With("ENOENT",n,"getDirListing");return xl(i)}async addNew(e,r,n){for(let i=0;i<Bp;i++){let o=Es();if(!await e.get(o))return await e.set(o,r),o}throw new g(m.ENOSPC,"No inode IDs available",n,"addNewNode")}addNewSync(e,r,n){for(let i=0;i<Bp;i++){let o=Es();if(!e.getSync(o))return e.setSync(o,r),o}throw new g(m.ENOSPC,"No inode IDs available",n,"addNewNode")}async commitNew(e,r,n,i,o,s){let a=P(r),c=await this.findINode(e,a);if(!c.toStats().hasAccess(2,o))throw g.With("EACCES",r,"commitNewFile");let l=z(r),f=await this.getDirListing(e,c,a);if(r==="/")throw g.With("EEXIST",r,"commitNewFile");if(f[l])throw await e.abort(),g.With("EEXIST",r,"commitNewFile");try{let u=new Gt;return u.ino=await this.addNew(e,s,r),u.mode=i|n,u.uid=o.uid,u.gid=o.gid,u.size=s.length,f[l]=await this.addNew(e,u.data,r),await e.set(c.ino,nt(f)),await e.commit(),u}catch(u){throw e.abort(),u}}commitNewSync(e,r,n,i,o=new Uint8Array){let s=this.store.transaction(),a=P(e),c=this.findINodeSync(s,a);if(!c.toStats().hasAccess(2,i))throw g.With("EACCES",e,"commitNewFile");let l=z(e),f=this.getDirListingSync(s,c,a);if(e==="/")throw g.With("EEXIST",e,"commitNewFile");if(f[l])throw g.With("EEXIST",e,"commitNewFile");let u=new Gt;try{u.ino=this.addNewSync(s,o,e),u.size=o.length,u.mode=n|r,u.uid=i.uid,u.gid=i.gid,f[l]=this.addNewSync(s,u.data,e),s.setSync(c.ino,nt(f))}catch(h){throw s.abortSync(),h}return s.commitSync(),u}async remove(e,r,n){let i=this.store.transaction(),o=P(e),s=await this.findINode(i,o),a=await this.getDirListing(i,s,o),c=z(e);if(!a[c])throw g.With("ENOENT",e,"removeEntry");let l=a[c],f=await this.getINode(i,l,e);if(!f.toStats().hasAccess(2,n))throw g.With("EACCES",e,"removeEntry");if(delete a[c],!r&&f.toStats().isDirectory())throw g.With("EISDIR",e,"removeEntry");if(r&&!f.toStats().isDirectory())throw g.With("ENOTDIR",e,"removeEntry");try{await i.set(s.ino,nt(a)),--f.nlink<1&&(await i.remove(f.ino),await i.remove(l))}catch(u){throw await i.abort(),u}await i.commit()}removeSync(e,r,n){let i=this.store.transaction(),o=P(e),s=this.findINodeSync(i,o),a=this.getDirListingSync(i,s,o),c=z(e),l=a[c];if(!l)throw g.With("ENOENT",e,"removeEntry");let f=this.getINodeSync(i,l,e);if(!f.toStats().hasAccess(2,n))throw g.With("EACCES",e,"removeEntry");if(delete a[c],!r&&f.toStats().isDirectory())throw g.With("EISDIR",e,"removeEntry");if(r&&!f.toStats().isDirectory())throw g.With("ENOTDIR",e,"removeEntry");try{i.setSync(s.ino,nt(a)),--f.nlink<1&&(i.removeSync(f.ino),i.removeSync(l))}catch(u){throw i.abortSync(),u}i.commitSync()}};var As=class{constructor(e){this.store=e,this.aborted=!1}async[Symbol.asyncDispose](){this.aborted||await this.commit()}[Symbol.dispose](){this.aborted||this.commitSync()}},Ts=class extends As{async get(e){return this.getSync(e)}async set(e,r){return this.setSync(e,r)}async remove(e){return this.removeSync(e)}async commit(){return this.commitSync()}async abort(){return this.abortSync()}},Rs=class extends As{getSync(){throw g.With("ENOSYS",void 0,"AsyncTransaction.getSync")}setSync(){throw g.With("ENOSYS",void 0,"AsyncTransaction.setSync")}removeSync(){throw g.With("ENOSYS",void 0,"AsyncTransaction.removeSync")}commitSync(){throw g.With("ENOSYS",void 0,"AsyncTransaction.commitSync")}abortSync(){throw g.With("ENOSYS",void 0,"AsyncTransaction.abortSync")}};var Yi=class extends Ts{constructor(e){super(e),this.originalData=new Map,this.modifiedKeys=new Set}getSync(e){let r=this.store.get(e);return this.stashOldValue(e,r),r}setSync(e,r){return this.markModified(e),this.store.set(e,r)}removeSync(e){this.markModified(e),this.store.delete(e)}commitSync(){}abortSync(){for(let e of this.modifiedKeys){let r=this.originalData.get(e);r?this.store.set(e,r):this.store.delete(e)}}stashOldValue(e,r){this.originalData.has(e)||this.originalData.set(e,r)}markModified(e){this.modifiedKeys.add(e),this.originalData.has(e)||this.originalData.set(e,this.store.get(e))}};var Il=class extends Map{constructor(e="tmp"){super(),this.name=e}async sync(){}clearSync(){this.clear()}transaction(){return new Yi(this)}},Sr={name:"InMemory",isAvailable(){return!0},options:{name:{type:"string",required:!1,description:"The name of the store"}},create({name:t}){let e=new Kr(new Il(t));return e.checkRootSync(),e}};function GN(t){return typeof t=="object"&&t!=null&&"fd"in t&&"path"in t&&"position"in t}function Pp(t){return typeof t=="object"&&t!=null&&"_zenfs"in t&&!!t._zenfs}var Xn=new Map;function Nl(t,{port:e,timeout:r=1e3,fs:n}={}){let i=new Error().stack.slice(6);if(!e)throw g.With("EINVAL");return new Promise((o,s)=>{let a=Math.random().toString(16).slice(10);Xn.set(a,{resolve:o,reject:s,fs:n}),e.postMessage({...t,_zenfs:!0,id:a,stack:i});let c=setTimeout(()=>{let l=new g(m.EIO,"RPC Failed");l.stack+=i,s(l),typeof c=="object"&&c.unref()},r)})}function Wp(t){if(!Pp(t))return;let{id:e,value:r,error:n,stack:i}=t;if(!Xn.has(e)){let c=new g(m.EIO,"Invalid RPC id:"+e);throw c.stack+=i,c}let{resolve:o,reject:s,fs:a}=Xn.get(e);if(n){let c=g.fromJSON(r);c.stack+=i,s(c),Xn.delete(e);return}if(GN(r)){let{fd:c,path:l,position:f}=r,u=new vs(a,c,l,f);o(u),Xn.delete(e);return}o(r),Xn.delete(e)}function Up(t,e){if(!t)throw g.With("EINVAL");t["on"in t?"on":"addEventListener"]("message",r=>{e("data"in r?r.data:r)})}var vs=class extends Hi{constructor(e,r,n,i){super(),this.fs=e,this.fd=r,this.path=n,this.position=i}rpc(e,...r){return Nl({scope:"file",fd:this.fd,method:e,args:r},this.fs.options)}_throwNoSync(e){throw new g(m.ENOTSUP,"Syncrohnous operations not support on PortFile",this.path,e)}stat(){return this.rpc("stat")}statSync(){this._throwNoSync("stat")}truncate(e){return this.rpc("truncate",e)}truncateSync(){this._throwNoSync("truncate")}write(e,r,n,i){return this.rpc("write",e,r,n,i)}writeSync(){this._throwNoSync("write")}async read(e,r,n,i){return await this.rpc("read",e,r,n,i)}readSync(){this._throwNoSync("read")}chown(e,r){return this.rpc("chown",e,r)}chownSync(){this._throwNoSync("chown")}chmod(e){return this.rpc("chmod",e)}chmodSync(){this._throwNoSync("chmod")}utimes(e,r){return this.rpc("utimes",e,r)}utimesSync(){this._throwNoSync("utimes")}_setType(e){return this.rpc("_setType",e)}_setTypeSync(){this._throwNoSync("_setType")}close(){return this.rpc("close")}closeSync(){this._throwNoSync("close")}sync(){return this.rpc("sync")}syncSync(){this._throwNoSync("sync")}},qp=class extends Kn(ze){constructor(e){super(),this.options=e,this._sync=Sr.create({name:"port-tmpfs"}),this.port=e.port,Up(this.port,Wp)}metadata(){return{...super.metadata(),name:"PortFS"}}rpc(e,...r){return Nl({scope:"fs",method:e,args:r},{...this.options,fs:this})}async ready(){await this.rpc("ready"),await super.ready()}rename(e,r,n){return this.rpc("rename",e,r,n)}async stat(e,r){return new he(await this.rpc("stat",e,r))}sync(e,r,n){return this.rpc("sync",e,r,n)}openFile(e,r,n){return this.rpc("openFile",e,r,n)}createFile(e,r,n,i){return this.rpc("createFile",e,r,n,i)}unlink(e,r){return this.rpc("unlink",e,r)}rmdir(e,r){return this.rpc("rmdir",e,r)}mkdir(e,r,n){return this.rpc("mkdir",e,r,n)}readdir(e,r){return this.rpc("readdir",e,r)}exists(e,r){return this.rpc("exists",e,r)}link(e,r,n){return this.rpc("link",e,r,n)}};function $p(t){try{return JSON.parse(t),!0}catch{return!1}}function Al(t){return t.at(0).toUpperCase()+t.slice(1)}var Tl=Symbol("struct_init"),KN=Symbol("struct");var jp=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64"],zp=[...jp,...jp.map(t=>Al(t)),"char"];function Hp(t,e){return function(r,n){let i=typeof n=="object"?n.name:n;if(typeof i=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+i.toString()),i=i.toString()),!i)throw new ReferenceError("Invalid name for struct member");if(typeof r!="object")throw new TypeError("Invalid member for struct field");if(!("constructor"in r))throw new TypeError("Invalid member for struct field");let o=r.constructor;o[Tl]||=[],o[Tl].push({name:i,type:t,length:e})}}function QN(t){function e(r,n){return typeof r=="number"?Hp(t,r):Hp(t)(r,n)}return e}var HM=Object.fromEntries(zp.map(t=>[t,QN(t)]));var Vp=1,Fs=class t extends Map{constructor(){super()}files(){let e=new Map;for(let[r,n]of this)n.isFile()&&e.set(r,n);return e}toJSON(){return{version:Vp,entries:Object.fromEntries(this)}}toString(){return JSON.stringify(this.toJSON())}dirEntries(e){let r=[];for(let n of this.keys())P(n)==e&&r.push(z(n));return r}fromJSON(e){if(e.version!=Vp)throw new g(m.EINVAL,"Index version mismatch");this.clear();for(let[r,n]of Object.entries(e.entries)){let i=new he(n);i.isDirectory()&&(i.fileData=Et(JSON.stringify(this.dirEntries(r)))),this.set(r,i)}}static parse(e){if(!$p(e))throw new g(m.EINVAL,"Invalid JSON");let r=JSON.parse(e),n=new t;return n.fromJSON(r),n}};var Rl=class extends Mp(ze){async ready(){await super.ready(),!this._isInitialized&&(this.index.fromJSON(await this.indexData),this._isInitialized=!0)}constructor(e){super(),this.indexData=e,this.index=new Fs,this._isInitialized=!1}async reloadFiles(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=await this.getData(e,r)}reloadFilesSync(){for(let[e,r]of this.index.files())delete r.fileData,r.fileData=this.getDataSync(e,r)}async stat(e){return this.statSync(e)}statSync(e){if(!this.index.has(e))throw g.With("ENOENT",e,"stat");return this.index.get(e)}async openFile(e,r,n){if(gr(r))throw new g(m.EPERM,e);let i=this.index.get(e);if(!i)throw g.With("ENOENT",e,"openFile");if(!i.hasAccess(Gn(r),n))throw g.With("EACCES",e,"openFile");return new Vi(this,e,r,i,i.isDirectory()?i.fileData:await this.getData(e,i))}openFileSync(e,r,n){if(gr(r))throw new g(m.EPERM,e);let i=this.index.get(e);if(!i)throw g.With("ENOENT",e,"openFile");if(!i.hasAccess(Gn(r),n))throw g.With("EACCES",e,"openFile");return new Vi(this,e,r,i,i.isDirectory()?i.fileData:this.getDataSync(e,i))}async readdir(e){return this.readdirSync(e)}readdirSync(e){let r=this.index.get(e);if(!r)throw g.With("ENOENT",e,"readdir");if(!r.isDirectory())throw g.With("ENOTDIR",e,"readdir");return JSON.parse(Gi(r.fileData))}};var Ek=Lt(Ve(),1);var bk=Lt(Ve(),1);var zA=Lt(Ve(),1);var Xi=new Map;yw("/",Sr.create({name:"root"}));function yw(t,e){if(t[0]!=="/"&&(t="/"+t),t=Yn(t),Xi.has(t))throw new g(m.EINVAL,"Mount point "+t+" is already in use.");Xi.set(t,e)}var TS=Lt(AS(),1);function xk(t){switch(t.name){case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"TypeMismatchError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function rr(t,e,r){if(t instanceof g)return t;let n=t instanceof DOMException?m[xk(t)]:m.EIO,i=new g(n,t.message,e,r);return i.stack=t.stack,i.cause=t.cause,i}var FS=class extends Kn(ze){constructor(e){super(),this._handles=new Map,this._sync=Sr.create({name:"accessfs-cache"}),this._handles.set("/",e)}metadata(){return{...super.metadata(),name:"WebAccess",noResizableBuffers:!0}}async sync(e,r,n){let i=await this.stat(e);n.mtime!==i.mtime&&await this.writeFile(e,r)}async rename(e,r){try{let n=await this.getHandle(e);if(n instanceof FileSystemDirectoryHandle){let c=await this.readdir(e);if(await this.mkdir(r),c.length==0)await this.unlink(e);else for(let l of c)await this.rename(rt(e,l),rt(r,l)),await this.unlink(e)}if(!(n instanceof FileSystemFileHandle))return;let i=await n.getFile(),o=await this.getHandle(P(r));if(!(o instanceof FileSystemDirectoryHandle))return;let a=await(await o.getFileHandle(z(r),{create:!0})).createWritable();await a.write(await i.arrayBuffer()),a.close(),await this.unlink(e)}catch(n){throw rr(n,e,"rename")}}async writeFile(e,r){if(r.buffer.resizable)throw new g(m.EINVAL,"Resizable buffers can not be written",e,"write");let n=await this.getHandle(P(e));if(!(n instanceof FileSystemDirectoryHandle))return;let o=await(await n.getFileHandle(z(e),{create:!0})).createWritable();await o.write(r),await o.close()}async createFile(e,r){return await this.writeFile(e,new Uint8Array),this.openFile(e,r)}async stat(e){let r=await this.getHandle(e);if(!r)throw g.With("ENOENT",e,"stat");if(r instanceof FileSystemDirectoryHandle)return new he({mode:511|le.DIRECTORY,size:4096});if(r instanceof FileSystemFileHandle){let{lastModified:n,size:i}=await r.getFile();return new he({mode:511|le.FILE,size:i,mtimeMs:n})}throw new g(m.EBADE,"Handle is not a directory or file",e,"stat")}async openFile(e,r){let n=await this.getHandle(e);if(!(n instanceof FileSystemFileHandle))throw g.With("EISDIR",e,"openFile");try{let i=await n.getFile(),o=new Uint8Array(await i.arrayBuffer()),s=new he({mode:511|le.FILE,size:i.size,mtimeMs:i.lastModified});return new je(this,e,r,s,o)}catch(i){throw rr(i,e,"openFile")}}async unlink(e){let r=await this.getHandle(P(e));if(r instanceof FileSystemDirectoryHandle)try{await r.removeEntry(z(e),{recursive:!0})}catch(n){throw rr(n,e,"unlink")}}async link(e){throw g.With("ENOSYS",e,"WebAccessFS.link")}async rmdir(e){return this.unlink(e)}async mkdir(e){if(await this.getHandle(e))throw g.With("EEXIST",e,"mkdir");let n=await this.getHandle(P(e));if(!(n instanceof FileSystemDirectoryHandle))throw g.With("ENOTDIR",e,"mkdir");await n.getDirectoryHandle(z(e),{create:!0})}async readdir(e){let r=await this.getHandle(e);if(!(r instanceof FileSystemDirectoryHandle))throw g.With("ENOTDIR",e,"readdir");let n=[];for await(let i of r.keys())n.push(i);return n}async getHandle(e){if(this._handles.has(e))return this._handles.get(e);let r="/";for(let n of e.split("/").slice(1)){let i=this._handles.get(r);if(!(i instanceof FileSystemDirectoryHandle))throw g.With("ENOTDIR",r,"getHandle");r=rt(r,n);try{let o=await i.getDirectoryHandle(n);this._handles.set(r,o)}catch(o){let s=o;if(s.name=="TypeMismatchError")try{let a=await i.getFileHandle(n);this._handles.set(r,a)}catch(a){rr(a,r,"getHandle")}if(s.name==="TypeError")throw new g(m.ENOENT,s.message,r,"getHandle");rr(s,r,"getHandle")}}return this._handles.get(e)}};function wi(t){return new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=n=>{n.preventDefault(),r(rr(t.error))}})}var eu=class extends Rs{constructor(e,r){super(r),this.tx=e,this.store=r,this._idb=e.objectStore(r.name)}get(e){return wi(this._idb.get(e.toString()))}async set(e,r){await wi(this._idb.put(r,e.toString()))}remove(e){return wi(this._idb.delete(e.toString()))}async commit(){this.tx.commit()}async abort(){try{this.tx.abort()}catch(e){throw rr(e)}}};async function Ik(t,e=globalThis.indexedDB){let r=e.open(t);return r.onupgradeneeded=()=>{let i=r.result;i.objectStoreNames.contains(t)&&i.deleteObjectStore(t),i.createObjectStore(t)},await wi(r)}var tu=class{constructor(e){this.db=e}sync(){throw new Error("Method not implemented.")}get name(){return this.db.name}clear(){return wi(this.db.transaction(this.name,"readwrite").objectStore(this.name).clear())}clearSync(){throw g.With("ENOSYS",void 0,"IndexedDBStore.clearSync")}transaction(){let e=this.db.transaction(this.name,"readwrite");return new eu(e,this)}},kS={name:"IndexedDB",options:{storeName:{type:"string",required:!1,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."},idbFactory:{type:"object",required:!1,description:"The IDBFactory to use. Defaults to globalThis.indexedDB."}},async isAvailable(t=globalThis.indexedDB){try{if(!(t instanceof IDBFactory))return!1;let e=t.open("__zenfs_test");return await wi(e),t.deleteDatabase("__zenfs_test"),!0}catch{return t.deleteDatabase("__zenfs_test"),!1}},async create(t){let e=await Ik(t.storeName||"zenfs",t.idbFactory),r=new tu(e),n=new(Kn(Kr))(r);return t?.disableAsyncCache||(n._sync=Sr.create({name:"idb-cache"})),n}};var OS=kS,LS=async(t={"/tmp":mn,"/data":OS},e=n=>{},r=n=>{})=>{try{return await vp({mounts:t}),e($i),!0}catch(n){return r(n),!1}},ya=(t,e)=>(t.startsWith("/")||(t="/"+t),e&&(e.startsWith("/")||(e="/"+e),t=e+t),t),Le=async(t,e=OS)=>{t=ya(t);let r=t.split("/")[1];if(!r)throw`Bad Path: ${t}`;return r="/"+r,await CS(r)||await LS({["/"+r]:e}),t},mi=async(t="")=>(t=await Le(t),await $e(t)),ru=async(t="data/myfile.csv")=>(t=await Le(t),await jn(t,"utf8")),nu=async(t="data/myfile.csv",e=0,r=5120,n=(i,o)=>{})=>{if(t=await Le(t),t)try{let i=await Oe(t,"r"),o=await uo(t);r==="end"&&(r=o);let s=new Uint8Array(r-e),{bytesRead:a}=await i.read(s,0,r-e,e),c=new TextDecoder().decode(s.subarray(0,a));return await i.close(),n(c,t),c}catch(i){console.error(i)}else{console.error("Path name is not defined");return}},Nk=async(t="data",e=r=>{})=>{t=await Le(t);let r=await ut(t);return e(r),r},fo=async(t,e,r=n=>{})=>(t=await Le(t),await wr(t,e),r(e),!0),gi=async(t,e,r=n=>{})=>(t=await Le(t),await mi(t)?await bs(t,e):await wr(t,e),r(e),!0),iu=async(t="data/myfile.csv",e=()=>{})=>(t=await Le(t),await qn(t),e(),!0),Ak=async t=>(await zn(t),!0),Tk=async t=>(await qi(t),!0),Rk=async(t="data/myfile.csv",e="end",r=0,n=(i,o)=>{})=>{t=await Le(t);let i=await uo(t);e==="end"&&(e=i);let o=await nu(t,r,e,n);return n(o,t),o},ou=async(t="data",e=r=>{})=>{t=await Le(t);let r=await ut(t);return e(r),r},uo=async(t="data/myfile.csv",e=r=>{})=>{t=await Le(t);let n=(await pr(t)).size;return e(n),n},ho=async(t="data/myfile.csv",e=(r,n)=>{})=>{t=await Le(t);let r=await Oe(t,"r"),n=new Uint8Array(65535),{bytesRead:i}=await r.read(n,0,65535,0),a=new TextDecoder().decode(n.subarray(0,i)).split(`
`)[0];return await r.close(),e(a,t),a},su=async(t="data/myfile.csv",e=10)=>{t=await Le(t);let n=(await pr(t)).size,i=e*1024*1024,o=await Oe(t,"r"),s=0,a=i,c=async()=>{if(s<n){s+a>n&&(a=n-s);let l=new Uint8Array(a),{bytesRead:f}=await o.read(l,0,a,s),u=new TextDecoder().decode(l.subarray(0,f)),h=t.split("/")[2];if(s/i>0){let d=Math.round(s/i);h.endsWith(".csv")?h=h.substring(0,h.length-4)+"_"+d+".csv":h+="_"+d}Dt.saveCSV(u,h),s+=i,await c()}};return await c(),await o.close(),!0},DS=async(t="data/myfile.csv",e=(o,s,a,c)=>{},r=1e4,n=0,i={transpose:!1})=>{let o=await uo(t),s=n,a=async()=>{let c=s+r;c>o&&(c=o);let l=await pa(t,s,c,i);await e(l,s,c,o),s=c,s!==o&&await a()};return await a(),!0},pa=async(t="data/myfile.csv",e=0,r="end",n={transpose:!1})=>{t=await Le(t);let i=n.transpose||!1,o=await ho(t);if(!o)return;let s=o.split(","),a=await uo(t);r==="end"&&(r=a);let c=(await nu(t,e,r))?.split(`
`).slice(1,-1),l=u=>{try{u=JSON.parse(u)}catch{}return u},f=i?[]:{};return c.forEach(u=>{let h=u.split(",");if(i){let d={};h.forEach((E,w)=>{d[s[w]]=l(E)}),f.push(d)}else h.forEach((d,E)=>{let w=s[E];f[w]||(f[w]=[]),f[w].push(l(d))})}),f},CS=async t=>{try{let e=await ut(t);return!0}catch{return!1}},au={initFS:LS,dirExists:CS,exists:mi,readFile:ru,readTextFileChunk:nu,getFilenames:Nk,writeFile:fo,appendFile:gi,deleteFile:iu,readFileAsText:Rk,getFileSize:uo,getCSVHeader:ho,listFiles:ou,createFolder:Ak,deleteFolder:Tk};var MS=class{GDriveInstance;constructor(e){this.GDriveInstance=e}backupFS_CSVToDrive=(e,r)=>(r||(r=this.inferMimeType(e)),new Promise(async(n,i)=>{e=ya(e),this.GDriveInstance.isLoggedIn?ru(e).then(o=>{if(!o)return;let s=new Blob([o],{type:r});this.GDriveInstance.checkFolder(this.GDriveInstance.directory,a=>{let c={name:e.split("/")[2],mimeType:r,parents:[a.files[0].id]},l=this.GDriveInstance.gapi.auth.getToken().access_token;var f=new FormData;f.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),f.append("file",s);var u=new XMLHttpRequest;u.open("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),u.setRequestHeader("Authorization","Bearer "+l),u.responseType="json",u.onload=()=>{console.log("Uploaded file id: ",u.response.id),n(!0)},u.send(f)})}).catch(console.error):(console.warn("Sign in with Google first!"),this.GDriveInstance.handleUserSignIn().then(async()=>{this.GDriveInstance.isLoggedIn&&n(await this.backupFS_CSVToDrive(e,r))}))}));driveToLocalDB=(e,r="data",n=o=>{},i)=>(i||(i=this.inferMimeType(e.name)),new Promise((o,s)=>{if(this.GDriveInstance.isLoggedIn){var a=this.GDriveInstance.gapi.client.drive.files.export({fileId:e.id,mimeType:i});a.then(async c=>{let l=e.name,f=ya(l,r);await gi(f,c.body),n(c.body),o(c.body)})}else console.warn("Sign in with Google first!"),this.GDriveInstance.handleUserSignIn().then(async()=>{this.GDriveInstance.isLoggedIn&&o(await this.driveToLocalDB(e,r,n,i))})}));inferMimeType=(e,r=!1)=>{switch(e.split(".").pop().toLowerCase()){case"csv":return r?"text/csv":"application/vnd.google-apps.spreadsheet";case"tsv":return"text/tab-separated-values";case"txt":return"text/plain";case"html":return"text/html";case"json":return"application/json";case"xml":return"application/xml";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";case"pdf":return"application/pdf";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"ppt":return"application/vnd.ms-powerpoint";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"odt":return"application/vnd.oasis.opendocument.text";case"ods":return"application/vnd.oasis.opendocument.spreadsheet";case"odp":return"application/vnd.oasis.opendocument.presentation";case"rtf":return"application/rtf";case"zip":return"application/zip";case"rar":return"application/vnd.rar";case"7z":return"application/x-7z-compressed";case"tar":return"application/x-tar";case"gz":return"application/gzip";case"mp3":return"audio/mpeg";case"wav":return"audio/wav";case"ogg":return"audio/ogg";case"mp4":return"video/mp4";case"avi":return"video/x-msvideo";case"mov":return"video/quicktime";case"wmv":return"video/x-ms-wmv";case"flv":return"video/x-flv";case"mkv":return"video/x-matroska";default:return"application/octet-stream"}}};var Ke={};function vk(t,e,r){return(1-r)*t+r*e}function cu(t,e,r,n=!0){if(r<=2)return[t,e];let i=1/r,o=new Array(r);o[0]=t;for(let s=1;s<=r;s++)o[s]=vk(t,e,i*s),n&&(o[s]=Math.floor(o[s]));return o}var BS=async(t,e,r,n)=>{if(!e){let l=Object.keys(Ke);l.length>0?e=l[l.length-1]:e=`csv${new Date().toISOString()}`}let i=Ke[e];if(!i){let l=Array.from(Object.keys(t));l.indexOf("timestamp")>-1&&l.splice(l.indexOf("timestamp"),1),Ke[e]={header:r||["timestamp","localized",...l],lastX:void 0,buffer:"",buffered:0,bufferSize:n?.bufferSize?n.bufferSize:0,toFixed:n?.toFixed?n.toFixed:0,xIncrement:n?.xIncrement?n.xIncrement:0},i=Ke[e];let f=await ho(e).catch(()=>null);(!f||f!==i.header.join(","))&&(r=i.header)}if(!i.header||i.header?.length===0){let l=Array.from(Object.keys(t));l.indexOf("timestamp")>-1&&l.splice(l.indexOf("timestamp"),1),i.header=r||["timestamp","localized",...l]}else r&&(i.header=r);let o=1;for(let l in t){let f=t[l];i.header.indexOf(l)>-1&&f&&Array.isArray(f)&&f?.length>o&&(o=f?.length)}let s;if(i.xIncrement?i.lastX?t[i.header[2]]?Array.isArray(t[i.header[2]])?s=i.lastX+i.xIncrement*t[i.header[2]].length:s=i.lastX+i.xIncrement:t[i.header[0]]&&Array.isArray(t[i.header[0]])?s=i.lastX+i.xIncrement*t[i.header[0]].length:s=i.lastX+i.xIncrement:typeof t[i.header[0]]<"u"?s=t[i.header[0]]:(i.header[0].toLowerCase().includes("time")||i.header[0].toLowerCase().includes("unix"))&&(s=Date.now()):t[i.header[0]]?s=t[i.header[0]]:s=Date.now(),typeof i.lastX>"u"&&(i.lastX=Array.isArray(s)?s[0]:s),typeof s>"u")if(i.header[0].includes("time")){let l=Date.now();o===1?s=Date.now():(s=cu(i.lastX,l,o),s.shift())}else{let l=i.lastX+1;o>1?(s=new Array(o).fill(""),s[o-1]=l):s=l}else o>1&&s?.length!==o&&(!Array.isArray(s)||s.length===1?(s=cu(i.lastX,s,o,!0),s.shift()):(s=cu(s[0],s[s.length-1],o,!0),s.shift()));let a=[];if(Array.isArray(s)){let l={};for(let f=0;f<s.length;f++){a.push([]);for(let u=0;u<i.header.length;u++){let h=t[i.header[u]];if(u===0){a[f][0]=s[f],i.header[u+1]==="localized"&&(u++,a[f][u]=Si(s[f]));continue}h===void 0?a[f][u]="":Array.isArray(h)?h.length===s.length?a[f][u]=h[f]:i.header[u]in l?h.length===1&&f===s.length-1?a[f][u]=h[l[i.header[u]]]:Math.floor(h.length*f/s.length)>l[i.header[u]]?(l[i.header[u]]++,a[f][u]=h[l[i.header[u]]]):a[f][u]="":(l[i.header[u]]=f,h.length!==1&&(a[f][u]=h[f])):f===s.length-1?a[f][u]=h:a[f][u]="",typeof a[f][u]=="number"&&Math.floor(a[f][u])!==a[f][u]&&(a[f][u]=a[f][u].toFixed(Ke[e].toFixed))}}}else{a.push([]);for(let l=0;l<i.header.length;l++){if(l===0){a[0][0]=s,i.header[l+1]==="localized"&&(l++,a[0][l]=Si(s));continue}i.header[l]in t?a[0][l]=t[i.header[l]]:a[0][l]="",typeof a[0][l]=="number"&&Math.floor(a[0][l])!==a[0][l]&&(a[0][l]=a[0][l].toFixed(Ke[e].toFixed))}}let c="";if(r&&(c+=r.join(",")+`
`),a.forEach(l=>{c+=(n?.json?l.map(f=>JSON.stringify(f)):l).join(",")+`
`,i.bufferSize&&i.buffered++}),i.lastX=a[a.length-1][0],i.bufferSize)if(i.buffer+=c,i.buffered>i.bufferSize){let l=new Promise((f,u)=>{mi(e).then(h=>{h?gi(e,i.buffer,d=>{f(d)}):fo(e,i.buffer,d=>{f(d)})})});return await l,i.buffer="",i.buffered=0,l}else return await Promise.resolve(!0);else return await new Promise((l,f)=>{mi(e).then(u=>{u?gi(e,c,h=>{l(h)}):fo(e,c,h=>{l(h)})})})},Fk=(t,e)=>{Ke[e]&&(Ke[e].header=t)},PS=(t,e,r=5,n=0,i)=>{if(!Ke[t])return e?.indexOf("timestamp")>1&&(e.splice(e.indexOf("timestamp"),1),e.unshift("timestamp")),(e?.[0].toLowerCase().includes("time")||e?.[0].toLowerCase().includes("unix"))&&e[1]!=="localized"&&e.splice(1,0,"localized"),Ke[t]={header:e,lastX:e[1]==="localized"?Date.now():0,bufferSize:n,buffer:"",buffered:0,toFixed:r,xIncrement:i},new Promise((o,s)=>{mi(t).then(a=>{a||fo(t,Ke[t].header?Ke[t].header.join(",")+`
`:"",c=>{o(c)}).catch(s)})})},WS=(t,e=document.body)=>new Promise(async(r,n)=>{e.querySelector("#bfs"+t)&&e.querySelector("#bfs"+t)?.remove(),e.insertAdjacentHTML("beforeend",`<div id='bfs${t}' class='bfs${t}'></div>`);let i=e.querySelector("#bfs"+t);await ou(t).then(o=>{o.length===0?i.innerHTML="No Files!":o.forEach(s=>{i?.insertAdjacentHTML("beforeend",`<div id='${s}' class='bfsfilediv'>
                        <span class='bfsfiletitle'>Data: </span>
                        <span>${s}</span>
                        <button class='bfsdownloadbtn' id='download${s}'>Download CSV</button>
                        ${s.indexOf(".")>-1?`<button class='bfsdeletebtn' id='delete${s}'>Delete</button>`:""}
                    </div>`),document.getElementById(`delete${s}`)&&(document.getElementById(`delete${s}`).onclick=()=>{iu(t+"/"+s,()=>{WS(t,e)})}),document.getElementById(`download${s}`)&&(document.getElementById(`download${s}`).onclick=()=>{su(t+"/"+s,10)})}),r(o)}).catch(n)});async function kk(t="data/folderList",e){if(e&&!await au.exists(t)){await lu.createCSV(t,["folder","lastmodified"]);let r={folder:e,lastmodified:Date.now()};return await lu.appendCSV(r,t),r}else{let r=!1,n={};return await lu.processCSVChunksFromDB(t,(i,o,s,a)=>{for(let c in i)c==="folder"&&i[c].forEach((l,f)=>{l===e&&(r=!0,i.lastmodified[f]=Date.now())}),n[c]?n[c].push(...i[c]):n[c]=i[c]}),r||(n.folder?n.folder.push(e):n.folder=[e],n.lastmodified?n.lastmodified.push(Date.now()):n.lastmodified=[Date.now()]),await au.deleteFile(t),await PS(t,["folder","lastmodified"]),await BS(n,t),n}}async function Ok(t="data"){return t?await new Promise(e=>{pa(t+"/folderList").then(r=>{e(r?.folder?r?.folder:[])})}):[]}var lu={appendCSV:BS,updateCSVHeader:Fk,createCSV:PS,visualizeDirectory:WS,openCSV:Dt.openCSV,saveCSV:Dt.saveCSV,openCSVRaw:Dt.openCSVRaw,parseCSVData:uu,getCSVHeader:ho,writeToCSVFromDB:su,readCSVChunkFromDB:pa,processCSVChunksFromDB:DS,toISOLocal:Si,checkFolderList:kk,parseFolderList:Ok};export{Dt as CSV,MS as FS_Drive,ga as GDrive,du as GFileBrowser,au as ZenFsRoutes,BS as appendCSV,gi as appendFile,Le as checkDirInit,kk as checkFolderList,PS as createCSV,Ak as createFolder,lu as csvRoutes,iu as deleteFile,Tk as deleteFolder,CS as dirExists,mi as exists,ya as formatPath,ho as getCSVHeader,uo as getFileSize,Nk as getFilenames,LS as initFS,ou as listFiles,uu as parseCSVData,Ok as parseFolderList,DS as processCSVChunksFromDB,Dk as processDataForCSV,pa as readCSVChunkFromDB,ru as readFile,Rk as readFileAsText,nu as readTextFileChunk,Si as toISOLocal,Fk as updateCSVHeader,WS as visualizeDirectory,fo as writeFile,su as writeToCSVFromDB};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
